<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL 基础 | Saul&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/iconfont.css">
    <meta name="description" content="读书百遍其义自见，人生亦是如此。">
    <meta name="image" content="https://gitee.com/SaulJWu/blog-images/raw/master/images/20211109095548.png">
    <meta name="twitter:title" content="MySQL 基础">
    <meta name="twitter:description" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://gitee.com/SaulJWu/blog-images/raw/master/images/20211109095548.png">
    <meta name="twitter:url" content="https://sauljwu.github.io/60.%E6%9B%B4%E5%A4%9A/01.%E9%9D%A2%E8%AF%95%E9%A2%98/50.MySQL%20%E5%9F%BA%E7%A1%80.html">
    <meta name="twitter:site" content="@sauljwu">
    <meta property="og:type" content="article">
    <meta property="og:title" content="MySQL 基础">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://gitee.com/SaulJWu/blog-images/raw/master/images/20211109095548.png">
    <meta property="og:url" content="https://sauljwu.github.io/60.%E6%9B%B4%E5%A4%9A/01.%E9%9D%A2%E8%AF%95%E9%A2%98/50.MySQL%20%E5%9F%BA%E7%A1%80.html">
    <meta property="og:site_name" content="sauljwu">
    <meta property="article:published_time" content="2021-11-09T09:55:16.000Z">
    <meta property="article:tag" content="null">
    <meta itemprop="name" content="MySQL 基础">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://gitee.com/SaulJWu/blog-images/raw/master/images/20211109095548.png">
    <meta name="keywords" content="读书百遍其义自见，学习亦是如此，人生亦是如此。">
    <meta name="google-site-verification" content="zLD7NpxIQqa3yimtkMOD-WYwUKyLypzWkXW2KWh3xEs">
    <meta name="baidu-site-verification" content="code-qs7vaYoSzk">
    <meta name="theme-color" content="#722ED1">
    <link rel="preload" href="/assets/css/0.styles.6f6e2191.css" as="style"><link rel="preload" href="/assets/js/app.5deb200c.js" as="script"><link rel="preload" href="/assets/js/2.325951e6.js" as="script"><link rel="preload" href="/assets/js/220.9b77e578.js" as="script"><link rel="prefetch" href="/assets/js/10.be444d07.js"><link rel="prefetch" href="/assets/js/100.53dfb061.js"><link rel="prefetch" href="/assets/js/101.8c9c6028.js"><link rel="prefetch" href="/assets/js/102.2c6f457b.js"><link rel="prefetch" href="/assets/js/103.ee49b1aa.js"><link rel="prefetch" href="/assets/js/104.fc3338e9.js"><link rel="prefetch" href="/assets/js/105.5633592a.js"><link rel="prefetch" href="/assets/js/106.fc3bdfa4.js"><link rel="prefetch" href="/assets/js/107.d1c752a1.js"><link rel="prefetch" href="/assets/js/108.dd5c848a.js"><link rel="prefetch" href="/assets/js/109.6845c53a.js"><link rel="prefetch" href="/assets/js/11.62c8ce67.js"><link rel="prefetch" href="/assets/js/110.45406043.js"><link rel="prefetch" href="/assets/js/111.c9a95918.js"><link rel="prefetch" href="/assets/js/112.6cd22797.js"><link rel="prefetch" href="/assets/js/113.8b325179.js"><link rel="prefetch" href="/assets/js/114.f95b5044.js"><link rel="prefetch" href="/assets/js/115.f32da3bd.js"><link rel="prefetch" href="/assets/js/116.d2c077e8.js"><link rel="prefetch" href="/assets/js/117.7a14ed73.js"><link rel="prefetch" href="/assets/js/118.a5161590.js"><link rel="prefetch" href="/assets/js/119.9d96aac7.js"><link rel="prefetch" href="/assets/js/12.3ec53d6d.js"><link rel="prefetch" href="/assets/js/120.4bcbc027.js"><link rel="prefetch" href="/assets/js/121.e9ef8fe6.js"><link rel="prefetch" href="/assets/js/122.e77f8a47.js"><link rel="prefetch" href="/assets/js/123.5ee9dda5.js"><link rel="prefetch" href="/assets/js/124.e096a534.js"><link rel="prefetch" href="/assets/js/125.7cbce87e.js"><link rel="prefetch" href="/assets/js/126.4b1e44cb.js"><link rel="prefetch" href="/assets/js/127.6c0e78b0.js"><link rel="prefetch" href="/assets/js/128.f457e0e8.js"><link rel="prefetch" href="/assets/js/129.54768abb.js"><link rel="prefetch" href="/assets/js/13.f690cb02.js"><link rel="prefetch" href="/assets/js/130.937628fa.js"><link rel="prefetch" href="/assets/js/131.d5f05b1f.js"><link rel="prefetch" href="/assets/js/132.f01f061d.js"><link rel="prefetch" href="/assets/js/133.cc673095.js"><link rel="prefetch" href="/assets/js/134.84166ed1.js"><link rel="prefetch" href="/assets/js/135.c44f8870.js"><link rel="prefetch" href="/assets/js/136.92774e46.js"><link rel="prefetch" href="/assets/js/137.44ef7b2e.js"><link rel="prefetch" href="/assets/js/138.b41b698b.js"><link rel="prefetch" href="/assets/js/139.57246fa2.js"><link rel="prefetch" href="/assets/js/14.d3ca5610.js"><link rel="prefetch" href="/assets/js/140.0dafe1f7.js"><link rel="prefetch" href="/assets/js/141.2ad32399.js"><link rel="prefetch" href="/assets/js/142.6836d1a6.js"><link rel="prefetch" href="/assets/js/143.169c172d.js"><link rel="prefetch" href="/assets/js/144.4d10dc10.js"><link rel="prefetch" href="/assets/js/145.8e99b583.js"><link rel="prefetch" href="/assets/js/146.c4a34371.js"><link rel="prefetch" href="/assets/js/147.63f4ea0d.js"><link rel="prefetch" href="/assets/js/148.a0030d3c.js"><link rel="prefetch" href="/assets/js/149.01ad58a5.js"><link rel="prefetch" href="/assets/js/15.aee71ea8.js"><link rel="prefetch" href="/assets/js/150.79e43d74.js"><link rel="prefetch" href="/assets/js/151.5ac4a6b3.js"><link rel="prefetch" href="/assets/js/152.cad00a48.js"><link rel="prefetch" href="/assets/js/153.ce7eb32f.js"><link rel="prefetch" href="/assets/js/154.8b10c8f1.js"><link rel="prefetch" href="/assets/js/155.4b961e74.js"><link rel="prefetch" href="/assets/js/156.9204f61f.js"><link rel="prefetch" href="/assets/js/157.ccf7543e.js"><link rel="prefetch" href="/assets/js/158.fab7c7b7.js"><link rel="prefetch" href="/assets/js/159.6bdb31b2.js"><link rel="prefetch" href="/assets/js/16.d6966b09.js"><link rel="prefetch" href="/assets/js/160.03868e4e.js"><link rel="prefetch" href="/assets/js/161.6293c0ec.js"><link rel="prefetch" href="/assets/js/162.b6d7f5f8.js"><link rel="prefetch" href="/assets/js/163.2aaf0d85.js"><link rel="prefetch" href="/assets/js/164.71b1f008.js"><link rel="prefetch" href="/assets/js/165.86f1bd2c.js"><link rel="prefetch" href="/assets/js/166.e57e9750.js"><link rel="prefetch" href="/assets/js/167.de31da99.js"><link rel="prefetch" href="/assets/js/168.63db5f83.js"><link rel="prefetch" href="/assets/js/169.b737e68c.js"><link rel="prefetch" href="/assets/js/17.aeef2677.js"><link rel="prefetch" href="/assets/js/170.905f8399.js"><link rel="prefetch" href="/assets/js/171.22be3957.js"><link rel="prefetch" href="/assets/js/172.8086840d.js"><link rel="prefetch" href="/assets/js/173.bcfbc2d7.js"><link rel="prefetch" href="/assets/js/174.1137d23b.js"><link rel="prefetch" href="/assets/js/175.00d8ec1c.js"><link rel="prefetch" href="/assets/js/176.dbe8fb36.js"><link rel="prefetch" href="/assets/js/177.135319cc.js"><link rel="prefetch" href="/assets/js/178.f35a497b.js"><link rel="prefetch" href="/assets/js/179.5ea4fc96.js"><link rel="prefetch" href="/assets/js/18.437bd7aa.js"><link rel="prefetch" href="/assets/js/180.1c86e373.js"><link rel="prefetch" href="/assets/js/181.ed8eacba.js"><link rel="prefetch" href="/assets/js/182.9ecdd1c7.js"><link rel="prefetch" href="/assets/js/183.e88030dd.js"><link rel="prefetch" href="/assets/js/184.b77e8472.js"><link rel="prefetch" href="/assets/js/185.86992efd.js"><link rel="prefetch" href="/assets/js/186.186b7976.js"><link rel="prefetch" href="/assets/js/187.2310077c.js"><link rel="prefetch" href="/assets/js/188.9a9cd013.js"><link rel="prefetch" href="/assets/js/189.b26144c3.js"><link rel="prefetch" href="/assets/js/19.b9f7b38a.js"><link rel="prefetch" href="/assets/js/190.8d9880f4.js"><link rel="prefetch" href="/assets/js/191.122c53bc.js"><link rel="prefetch" href="/assets/js/192.b5de93bb.js"><link rel="prefetch" href="/assets/js/193.15c9a44f.js"><link rel="prefetch" href="/assets/js/194.9f285263.js"><link rel="prefetch" href="/assets/js/195.a52d2adb.js"><link rel="prefetch" href="/assets/js/196.3f64e46b.js"><link rel="prefetch" href="/assets/js/197.f59afec1.js"><link rel="prefetch" href="/assets/js/198.10b3deec.js"><link rel="prefetch" href="/assets/js/199.01c4d604.js"><link rel="prefetch" href="/assets/js/20.a1fed041.js"><link rel="prefetch" href="/assets/js/200.0c273549.js"><link rel="prefetch" href="/assets/js/201.c69763f2.js"><link rel="prefetch" href="/assets/js/202.0ad1177c.js"><link rel="prefetch" href="/assets/js/203.d6375dc7.js"><link rel="prefetch" href="/assets/js/204.71b58aa9.js"><link rel="prefetch" href="/assets/js/205.e5a785ea.js"><link rel="prefetch" href="/assets/js/206.a5dd027e.js"><link rel="prefetch" href="/assets/js/207.9096781b.js"><link rel="prefetch" href="/assets/js/208.5ab31b6a.js"><link rel="prefetch" href="/assets/js/209.ee3e9552.js"><link rel="prefetch" href="/assets/js/21.f0b86eb3.js"><link rel="prefetch" href="/assets/js/210.5abac8cc.js"><link rel="prefetch" href="/assets/js/211.1ae20348.js"><link rel="prefetch" href="/assets/js/212.c3dd8ebf.js"><link rel="prefetch" href="/assets/js/213.365e1025.js"><link rel="prefetch" href="/assets/js/214.a39ce184.js"><link rel="prefetch" href="/assets/js/215.581f8f59.js"><link rel="prefetch" href="/assets/js/216.cd8aea78.js"><link rel="prefetch" href="/assets/js/217.58abccc3.js"><link rel="prefetch" href="/assets/js/218.8f24e32f.js"><link rel="prefetch" href="/assets/js/219.6065a54c.js"><link rel="prefetch" href="/assets/js/22.99485d6e.js"><link rel="prefetch" href="/assets/js/221.183ba8fb.js"><link rel="prefetch" href="/assets/js/222.b708ad27.js"><link rel="prefetch" href="/assets/js/223.f15ce744.js"><link rel="prefetch" href="/assets/js/224.2e1dc3ce.js"><link rel="prefetch" href="/assets/js/225.f19daf62.js"><link rel="prefetch" href="/assets/js/226.dc907b62.js"><link rel="prefetch" href="/assets/js/227.6b1ffe53.js"><link rel="prefetch" href="/assets/js/228.5fa0e056.js"><link rel="prefetch" href="/assets/js/229.cc1c99ee.js"><link rel="prefetch" href="/assets/js/23.7b9ed736.js"><link rel="prefetch" href="/assets/js/230.19aebf07.js"><link rel="prefetch" href="/assets/js/231.2b3f680c.js"><link rel="prefetch" href="/assets/js/232.260912ad.js"><link rel="prefetch" href="/assets/js/233.b9ae2fde.js"><link rel="prefetch" href="/assets/js/234.c7b9653c.js"><link rel="prefetch" href="/assets/js/235.8b25a26d.js"><link rel="prefetch" href="/assets/js/236.04c16f2c.js"><link rel="prefetch" href="/assets/js/237.ce4da176.js"><link rel="prefetch" href="/assets/js/238.ac515c9a.js"><link rel="prefetch" href="/assets/js/239.59626d27.js"><link rel="prefetch" href="/assets/js/24.85305800.js"><link rel="prefetch" href="/assets/js/240.5608a794.js"><link rel="prefetch" href="/assets/js/241.29a54b91.js"><link rel="prefetch" href="/assets/js/242.b6fb0e9e.js"><link rel="prefetch" href="/assets/js/243.52b7a9f7.js"><link rel="prefetch" href="/assets/js/244.a7e3e4a6.js"><link rel="prefetch" href="/assets/js/245.c1492e1c.js"><link rel="prefetch" href="/assets/js/246.5e57c563.js"><link rel="prefetch" href="/assets/js/247.37e058be.js"><link rel="prefetch" href="/assets/js/248.bf9a69b4.js"><link rel="prefetch" href="/assets/js/249.872a34fb.js"><link rel="prefetch" href="/assets/js/25.baabfb9e.js"><link rel="prefetch" href="/assets/js/250.e455ea0b.js"><link rel="prefetch" href="/assets/js/251.8f17cd56.js"><link rel="prefetch" href="/assets/js/252.55c215aa.js"><link rel="prefetch" href="/assets/js/253.48eef264.js"><link rel="prefetch" href="/assets/js/254.831c8e56.js"><link rel="prefetch" href="/assets/js/255.af1cc3d8.js"><link rel="prefetch" href="/assets/js/256.5ef2aa03.js"><link rel="prefetch" href="/assets/js/257.3523aa37.js"><link rel="prefetch" href="/assets/js/258.c6f08800.js"><link rel="prefetch" href="/assets/js/259.78cf6359.js"><link rel="prefetch" href="/assets/js/26.8fd35486.js"><link rel="prefetch" href="/assets/js/260.db0a5459.js"><link rel="prefetch" href="/assets/js/261.66e121b1.js"><link rel="prefetch" href="/assets/js/262.0c85b04b.js"><link rel="prefetch" href="/assets/js/263.1de18f7e.js"><link rel="prefetch" href="/assets/js/264.3644116c.js"><link rel="prefetch" href="/assets/js/265.1096be4e.js"><link rel="prefetch" href="/assets/js/266.9f82ff25.js"><link rel="prefetch" href="/assets/js/267.d0134a9b.js"><link rel="prefetch" href="/assets/js/268.a49d448e.js"><link rel="prefetch" href="/assets/js/269.9dbc0b30.js"><link rel="prefetch" href="/assets/js/27.d92e1b1e.js"><link rel="prefetch" href="/assets/js/270.0778af1f.js"><link rel="prefetch" href="/assets/js/271.07f3e0d6.js"><link rel="prefetch" href="/assets/js/272.80acb538.js"><link rel="prefetch" href="/assets/js/273.39038e4c.js"><link rel="prefetch" href="/assets/js/274.dfc661d8.js"><link rel="prefetch" href="/assets/js/275.eef76199.js"><link rel="prefetch" href="/assets/js/276.70135542.js"><link rel="prefetch" href="/assets/js/277.6b7b2776.js"><link rel="prefetch" href="/assets/js/278.9ae076a1.js"><link rel="prefetch" href="/assets/js/279.4a2a0235.js"><link rel="prefetch" href="/assets/js/28.b15a9a4a.js"><link rel="prefetch" href="/assets/js/280.81188b31.js"><link rel="prefetch" href="/assets/js/281.68ba0888.js"><link rel="prefetch" href="/assets/js/282.c7362b07.js"><link rel="prefetch" href="/assets/js/29.dc59f6d5.js"><link rel="prefetch" href="/assets/js/3.b069e494.js"><link rel="prefetch" href="/assets/js/30.a6ccc6b3.js"><link rel="prefetch" href="/assets/js/31.0d6c5e56.js"><link rel="prefetch" href="/assets/js/32.1165d991.js"><link rel="prefetch" href="/assets/js/33.09d8ea06.js"><link rel="prefetch" href="/assets/js/34.fb2d7478.js"><link rel="prefetch" href="/assets/js/35.13b6c5e7.js"><link rel="prefetch" href="/assets/js/36.decada4b.js"><link rel="prefetch" href="/assets/js/37.68c20beb.js"><link rel="prefetch" href="/assets/js/38.74bf5aef.js"><link rel="prefetch" href="/assets/js/39.dad167ed.js"><link rel="prefetch" href="/assets/js/4.adaa1bb8.js"><link rel="prefetch" href="/assets/js/40.06fd85c4.js"><link rel="prefetch" href="/assets/js/41.0a7f9575.js"><link rel="prefetch" href="/assets/js/42.566c4057.js"><link rel="prefetch" href="/assets/js/43.db64a741.js"><link rel="prefetch" href="/assets/js/44.65dd07cc.js"><link rel="prefetch" href="/assets/js/45.15897d4b.js"><link rel="prefetch" href="/assets/js/46.f0503917.js"><link rel="prefetch" href="/assets/js/47.8ee4ebda.js"><link rel="prefetch" href="/assets/js/48.7e69c090.js"><link rel="prefetch" href="/assets/js/49.c4ad0c9c.js"><link rel="prefetch" href="/assets/js/5.c20be8b8.js"><link rel="prefetch" href="/assets/js/50.4da8aedc.js"><link rel="prefetch" href="/assets/js/51.a07f53cf.js"><link rel="prefetch" href="/assets/js/52.67f4a7a0.js"><link rel="prefetch" href="/assets/js/53.3a2bdf1e.js"><link rel="prefetch" href="/assets/js/54.4485bbe3.js"><link rel="prefetch" href="/assets/js/55.86fabec7.js"><link rel="prefetch" href="/assets/js/56.9ab42b07.js"><link rel="prefetch" href="/assets/js/57.8cf1a0ea.js"><link rel="prefetch" href="/assets/js/58.39e3c28b.js"><link rel="prefetch" href="/assets/js/59.c88972ae.js"><link rel="prefetch" href="/assets/js/6.2a62c8cd.js"><link rel="prefetch" href="/assets/js/60.6b124dd0.js"><link rel="prefetch" href="/assets/js/61.4e008373.js"><link rel="prefetch" href="/assets/js/62.0f0799c6.js"><link rel="prefetch" href="/assets/js/63.8e7579e6.js"><link rel="prefetch" href="/assets/js/64.6af6542d.js"><link rel="prefetch" href="/assets/js/65.6f21b0ab.js"><link rel="prefetch" href="/assets/js/66.d453d9bd.js"><link rel="prefetch" href="/assets/js/67.3ee91d23.js"><link rel="prefetch" href="/assets/js/68.115221b4.js"><link rel="prefetch" href="/assets/js/69.8936bedb.js"><link rel="prefetch" href="/assets/js/7.fb60c5b7.js"><link rel="prefetch" href="/assets/js/70.9a263b4c.js"><link rel="prefetch" href="/assets/js/71.daaeff3d.js"><link rel="prefetch" href="/assets/js/72.6b0e6283.js"><link rel="prefetch" href="/assets/js/73.49dc89c5.js"><link rel="prefetch" href="/assets/js/74.9b5ea005.js"><link rel="prefetch" href="/assets/js/75.a56d5cb4.js"><link rel="prefetch" href="/assets/js/76.bf483918.js"><link rel="prefetch" href="/assets/js/77.1d485991.js"><link rel="prefetch" href="/assets/js/78.43408ba2.js"><link rel="prefetch" href="/assets/js/79.5d421e5a.js"><link rel="prefetch" href="/assets/js/8.6b2e87de.js"><link rel="prefetch" href="/assets/js/80.987bbce1.js"><link rel="prefetch" href="/assets/js/81.5c46dc6f.js"><link rel="prefetch" href="/assets/js/82.db7e6f5b.js"><link rel="prefetch" href="/assets/js/83.ef49597c.js"><link rel="prefetch" href="/assets/js/84.0a70af1e.js"><link rel="prefetch" href="/assets/js/85.f80257bf.js"><link rel="prefetch" href="/assets/js/86.e9115684.js"><link rel="prefetch" href="/assets/js/87.f9e81814.js"><link rel="prefetch" href="/assets/js/88.2d1ed201.js"><link rel="prefetch" href="/assets/js/89.5f22787d.js"><link rel="prefetch" href="/assets/js/9.c3271233.js"><link rel="prefetch" href="/assets/js/90.8e91aaba.js"><link rel="prefetch" href="/assets/js/91.a0c7fb4c.js"><link rel="prefetch" href="/assets/js/92.0676048c.js"><link rel="prefetch" href="/assets/js/93.b65c907f.js"><link rel="prefetch" href="/assets/js/94.04514d61.js"><link rel="prefetch" href="/assets/js/95.0c94a469.js"><link rel="prefetch" href="/assets/js/96.3fdc5912.js"><link rel="prefetch" href="/assets/js/97.615d477b.js"><link rel="prefetch" href="/assets/js/98.1ecfd9cf.js"><link rel="prefetch" href="/assets/js/99.57c5f4a2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6f6e2191.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="Saul's blog" class="logo"> <span class="site-name can-hide">Saul's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/technology/" class="nav-link">后端</a></div><div class="nav-item"><a href="/distributed/" class="nav-link">分布式</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><a href="/more/" class="nav-link">更多</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><a href="/friends/" class="nav-link">友情链接</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/SaulJWu/SaulJWu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://gitee.com/SaulJWu/blog-images/raw/master/images/20210627222322.jpg"> <div class="blogger-info"><h3>Saul.J.Wu</h3> <span>立身之本，不在高低。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/technology/" class="nav-link">后端</a></div><div class="nav-item"><a href="/distributed/" class="nav-link">分布式</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><a href="/more/" class="nav-link">更多</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><a href="/friends/" class="nav-link">友情链接</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/SaulJWu/SaulJWu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面试题</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ad8eec/" class="sidebar-link">面试点</a></li><li><a href="/pages/a00fdb/" class="sidebar-link">面试点二</a></li><li><a href="/pages/c3d3a0/" class="sidebar-link">高频面试题</a></li><li><a href="/pages/71ed63/" class="sidebar-link">多线程与高并发</a></li><li><a href="/pages/d4ed11/" aria-current="page" class="active sidebar-link">MySQL 基础</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/241fd3/" class="sidebar-link">MySql底层</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>博客搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>部署相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>填坑</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>收藏夹</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/friends/" class="sidebar-link">友情链接</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/more" title="更多-目录页" data-v-1cd794fe>更多</a></li> <li data-v-1cd794fe><a href="/more/#面试题" title="更多#面试题" data-v-1cd794fe>面试题</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>sujian</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-11-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          MySQL 基础
        </h1> <!----> <div class="theme-vdoing-content content__default"><p>MySQL 基础</p> <h3 id="配置文件-my-ini"><a href="#配置文件-my-ini" class="header-anchor">#</a> 配置文件(my.ini)</h3> <p><img src="https://gitee.com/SaulJWu/blog-images/raw/master/images/20211109095548.png" alt="image-20211109095541579"></p> <h3 id="mysql服务的登录和退出-dos-命令"><a href="#mysql服务的登录和退出-dos-命令" class="header-anchor">#</a> MySQL服务的登录和退出 (dos 命令)</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    基本指令：
        登入：
            mysql -h [ip地址] -P [端口号] -u [用户名] -p[密码]（注意 -p和密码之间不允许有空格）
            或
            mysql -h [IP地址] -P [端口号] -u [用户名] -p (回车)  然后再出入密码
            如果是本机，并且端口为默认的3306，则可以省略 -h、-P 的输入。
            
        登出：
            quit
            或
            exit
            两者都可以
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="mysql-常见命令"><a href="#mysql-常见命令" class="header-anchor">#</a> MySQL 常见命令</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    1. 查看当前所有的数据库
        show databases；
    2. 打开指定的库
        use [库名]；
    3. 查看当前库的所有表
        show tables；
    4. 查看其它库的所有表
        show tables from [库名]；
    5. 创建表
        create table [表名](
            列名 列类型，
            列名 列类型，
            ...
        )；
    6. 查看表结构
        desc [表名]
    7. 查看服务器的版本
        mysql -V
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="mysql-的语法规范"><a href="#mysql-的语法规范" class="header-anchor">#</a> MySQL 的语法规范</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    1. 不区分大小写，但建议关键字大写，表名、列名小写。
    2. 每条命令用分号结尾。
    3. 每条命令根据需要，可以进行缩进或换行。
    4.  注释：
        单行注释：#注释文字
        单行注释：-- 注释文字
        多行注释：/* 注释文字 */

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="dql-语法-select-查询"><a href="#dql-语法-select-查询" class="header-anchor">#</a> DQL 语法（select 查询）</h3> <h4 id="基础查询语法-不带条件的单字段或多字段查询"><a href="#基础查询语法-不带条件的单字段或多字段查询" class="header-anchor">#</a> 基础查询语法（不带条件的单字段或多字段查询）</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>    <span class="token comment">-- 基础语法：</span>
        <span class="token keyword">select</span> 查询列表 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
    <span class="token comment">-- 特点：</span>
        <span class="token comment">-- 1. 查询列表可以是：表中的字段、常量值、表达式、函数。</span>
        <span class="token comment">-- 2. 查询的结果是一个虚拟的表格。</span>
    
    <span class="token comment">-- 例子：</span>
        <span class="token comment">-- 1、查询表中的单个字段</span>
            <span class="token keyword">select</span> 字段名 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span> 
        
        <span class="token comment">-- 2、查询表中的多个字段</span>
            <span class="token keyword">select</span> 字段<span class="token number">1</span>，字段<span class="token number">2</span>，字段<span class="token number">3</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
        
        <span class="token comment">-- 3、查询表中的所有字段</span>
            <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h5 id="起别名-as"><a href="#起别名-as" class="header-anchor">#</a> 起别名（AS）</h5> <p><strong>方式一：使用 AS</strong> <code>SELECT last_name AS 姓,first_name AS 名 FROM employees;</code></p> <p><strong>方式二：使用空格</strong> <code>SELECT last_name 姓,first_name 名 FROM employees;</code></p> <blockquote><p>特殊案例：查询salary，显示结果为 out put
<strong>因为 out 是一个关键词，所以 mysql 官方推荐我们使用双引号括起来。</strong> <code>SELECT salary &quot;out put&quot; FROM employees;</code></p></blockquote> <h5 id="去重-distinct"><a href="#去重-distinct" class="header-anchor">#</a> 去重 (DISTINCT)</h5> <p><strong>案例：查询员工表中涉及到的所有的部门编号</strong> <code>SELECT DISTINCT department_id FROM employees</code></p> <h5 id="拼接-concat"><a href="#拼接-concat" class="header-anchor">#</a> 拼接（concat）</h5> <p><strong>案例：查询员工名和姓连接成一个字段，并显示为 姓名</strong> <code>SELECT CONCAT(last_name,first_name) AS 姓名 FROM employees</code></p> <h4 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h4> <h5 id="转义符和通配符"><a href="#转义符和通配符" class="header-anchor">#</a> 转义符和通配符</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
通配符：
    % ：代表任意的单个或多个字符
    _ ： 代表任意的单个字符

转义符：
    mysql官方默认是 ' \' ;但是如果我们想自己定义，也可以使用 ESCAPE 来指定。
*/</span>
<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查询员工名中第二个字符为 _ 的员工名。</span>
        <span class="token comment">-- 方式一：</span>
            <span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'_\_%'</span><span class="token punctuation">;</span>
        
       <span class="token comment">-- 方式二：（我们指定 # 为转义符）</span>
            <span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'_#_%'</span> <span class="token keyword">ESCAPE</span> <span class="token string">'#'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h5 id="条件表达式"><a href="#条件表达式" class="header-anchor">#</a> 条件表达式</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 简单条件运算符</span>
    <span class="token comment">-- &gt;、&lt;、=、!=、&lt;&gt;、&gt;=、&lt;=</span>

<span class="token comment">-- 案例</span>
    <span class="token comment">-- 1、查询工资大于 12000 的员工信息</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary <span class="token operator">&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 2、查询部门编号不等于 90 号的员工名和部门编号</span>
        <span class="token comment">-- 方式一：</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">!=</span> <span class="token number">90</span><span class="token punctuation">;</span>

        <span class="token comment">-- 方式二：（建议使用此方式）</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">&lt;&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>
        
<span class="token comment">-- 额外知识：</span>
    <span class="token comment">-- 在使用 mybatis 中，编写动态sql 使用 &lt;&gt; 会报错，所以只能使用 != 进行判断。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="逻辑表达式"><a href="#逻辑表达式" class="header-anchor">#</a> 逻辑表达式</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 逻辑运算符：用于连接条件表达式</span>
    <span class="token comment">-- &amp;&amp; 和 and：两个条件都为true，结果为true，反之为false</span>
    <span class="token comment">-- || 和 or：只要有一个条件为true，结果为true，反之为false</span>
    <span class="token comment">-- ! 和 not：如果连接的条件本身为false，结果为true，反之为false</span>
    <span class="token comment">-- mysql 推荐我们使用 and 、or 、not ；</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 1、查询工资在 10000 到 20000 之间的员工名、工资以及奖金</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>salary<span class="token punctuation">,</span>commission_pct <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary <span class="token operator">&gt;=</span> <span class="token number">10000</span> <span class="token operator">AND</span> salary <span class="token operator">&lt;=</span> <span class="token number">20000</span><span class="token punctuation">;</span>
        
    <span class="token comment">-- 2、查询部门编号不是在 90 到 110 之间，或者工资高于 15000 的员工信息</span>
        <span class="token comment">-- 方式一：</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">&lt;</span> <span class="token number">90</span> <span class="token operator">OR</span> department_id <span class="token operator">&gt;</span> <span class="token number">110</span> <span class="token operator">OR</span> salary <span class="token operator">&gt;</span> <span class="token number">15000</span><span class="token punctuation">;</span>

        <span class="token comment">-- 方式二：</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> <span class="token operator">NOT</span><span class="token punctuation">(</span>department_id <span class="token operator">&gt;=</span> <span class="token number">90</span> <span class="token operator">AND</span> department_id <span class="token operator">&lt;=</span> <span class="token number">110</span><span class="token punctuation">)</span> <span class="token operator">OR</span> salary <span class="token operator">&gt;</span> <span class="token number">15000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="模糊查询"><a href="#模糊查询" class="header-anchor">#</a> 模糊查询</h5> <h6 id="like关键字"><a href="#like关键字" class="header-anchor">#</a> like关键字</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- like</span>
    <span class="token comment">-- 基本语法：</span>
        <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名 <span class="token operator">like</span> <span class="token string">'通配符和搜索内容'</span><span class="token punctuation">;</span>

    <span class="token comment">-- 特点：</span>
        <span class="token comment"># 一般和通配符搭配使用；</span>
    
    <span class="token comment">-- 案例：</span>
        <span class="token comment">-- 1、查询员工名中包含字符 a 的员工信息</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'%a%'</span><span class="token punctuation">;</span>
            
        <span class="token comment">-- 2、查询员工名中第三个字符为 n，第五个字符为 l 的员工名和工资</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'__n_l%'</span><span class="token punctuation">;</span>
        
        <span class="token comment">-- 3、查询员工名中第二个字符为 _ 的员工名（因为 _ 是一个通配符，所以我们需要使用 ' \' 进行转义）</span>
            <span class="token comment">-- 方式一：</span>
            <span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'_\_%'</span><span class="token punctuation">;</span>
        
           <span class="token comment">-- 方式二：（我们指定 # 为转义符）</span>
            <span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'_#_%'</span> <span class="token keyword">ESCAPE</span> <span class="token string">'#'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="范围查询"><a href="#范围查询" class="header-anchor">#</a> 范围查询</h5> <h6 id="between-and-关键字"><a href="#between-and-关键字" class="header-anchor">#</a> between and 关键字</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 基本语法：</span>
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名 <span class="token operator">BETWEEN</span> 条件<span class="token number">1</span> <span class="token operator">AND</span> 条件<span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">-- 特点：</span>
    <span class="token comment">-- 1. 使用 between and 可以提高语句的简洁度。意思是：在 条件1 和 条件2 之间。</span>
    <span class="token comment">-- 2. 包含条件值 ，等同于 &gt;= 、&lt;=。</span>
    <span class="token comment">-- 3. 注意两个条件值的顺序，弄反了不会报错但是会查不出数据。</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 1、查询员工编号在 100 到 120 之间的员工信息</span>
        <span class="token comment">-- 基础运算符方式：</span>
           <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">&gt;=</span> <span class="token number">100</span> <span class="token operator">AND</span> employee_id <span class="token operator">&lt;=</span> <span class="token number">120</span><span class="token punctuation">;</span>
    
        <span class="token comment">-- 使用 between and 优化</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">BETWEEN</span> <span class="token number">100</span> <span class="token operator">AND</span> <span class="token number">120</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h6 id="in-关键字"><a href="#in-关键字" class="header-anchor">#</a> in 关键字</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 基本语法</span>
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名 <span class="token operator">in</span><span class="token punctuation">(</span>条件<span class="token number">1</span>，条件<span class="token number">2</span>，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>；
    
<span class="token comment">-- 特点：</span>
    <span class="token comment">-- 1. 使用 in 提高语句简洁度。意思是：包含 条件1，条件2，条件3，... 的数据</span>
    <span class="token comment">-- 2. in 列表的值类型必须一致或兼容（可相互转换）。如：'123' 和 123 。</span>
    <span class="token comment">--3. in 的列表不允许是空的。</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 1、查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES 中的一个员工名和工种编号</span>
        <span class="token comment">-- 逻辑运算符方式</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span> <span class="token operator">OR</span> job_id <span class="token operator">=</span> <span class="token string">'AD_VP'</span> <span class="token operator">OR</span> job_id <span class="token operator">=</span> <span class="token string">'AD_PRES'</span><span class="token punctuation">;</span>
        
        <span class="token comment">-- 使用关键字 in</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> job_id <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'IT_PROG'</span><span class="token punctuation">,</span><span class="token string">'AD_VP'</span><span class="token punctuation">,</span><span class="token string">'AD_PRES'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h6 id="is-null-或-is-not-null-关键字"><a href="#is-null-或-is-not-null-关键字" class="header-anchor">#</a> is null 或 is not null 关键字</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 基本语法：</span>
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名 <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名 <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
    
<span class="token comment">-- 特点：</span>
    <span class="token comment">-- 因为 = 或 &lt;&gt; 都不能用于判断 null 值，所以我们可以使用 is null 或 is not null 来判断。</span>
    
<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 1、查询奖金率为空的员工名和奖金率。</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>commission_pct <span class="token keyword">from</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h6 id="安全等于"><a href="#安全等于" class="header-anchor">#</a> 安全等于</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 基本语法：</span>
    <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> 字段名 <span class="token operator">&lt;=&gt;</span> 条件<span class="token punctuation">;</span>

<span class="token comment">-- 特点：</span>
    <span class="token comment">-- 可以用于判断 null 值，也可以用于判断普通值。缺点是可读性较低。</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 1、查询奖金率为空的员工名和奖金率</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>commission_pct <span class="token keyword">from</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">&lt;=&gt;</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
        
    <span class="token comment">-- 2、查询工资为 12000 的员工信息</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>salary <span class="token keyword">from</span> employees <span class="token keyword">WHERE</span> salary <span class="token operator">&lt;=&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="排序查询"><a href="#排序查询" class="header-anchor">#</a> 排序查询</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 基本语法</span>
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 【<span class="token keyword">where</span> 筛选条件】<span class="token keyword">order</span> <span class="token keyword">by</span> 字段名【<span class="token keyword">asc</span><span class="token operator">/</span><span class="token keyword">desc</span>】 <span class="token comment">#不写默认是 asc（升序）</span>

<span class="token comment">-- 特点：</span>
    <span class="token comment">-- 1. ASC 代表的是升序，DESC 代表的是降序。如果不写，默认是 ASC 。</span>
    <span class="token comment">-- 2. ORDER BY 中可以支持单个字段、多个字段、表达式、函数、别名。</span>
    <span class="token comment">-- 3. ORDER BY 一般是放在查询语句的最后面，LIMIT 除外。</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 1、查询员工信息，要求工资从高到低排序</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>

    <span class="token comment">-- 2、查询部门编号 &gt;= 90 的员工信息，按入职时间的先后进行排序</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">&gt;=</span> <span class="token number">90</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> hiredate<span class="token punctuation">;</span> <span class="token comment">#不写默认是 ASC</span>
        
    <span class="token comment">-- 3、按年薪的高低显示员工的信息和年薪【按表达式结果高到低排序】</span>
        <span class="token comment">-- 方式一：</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span>salary<span class="token operator">*</span><span class="token number">12</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 年薪 <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary<span class="token operator">*</span><span class="token number">12</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
        
        <span class="token comment">-- 方式二：</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span>salary<span class="token operator">*</span><span class="token number">12</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 年薪 <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 年薪 <span class="token keyword">DESC</span><span class="token punctuation">;</span>

    <span class="token comment">-- 4、按姓名的长度显示员工的姓名和工资【按函数结果排序】</span>
        <span class="token comment">-- 方式一：</span>
            <span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span> 字节长度<span class="token punctuation">,</span>last_name<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> LENGTH<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span> <span class="token keyword">DESC</span>
            
        <span class="token comment">-- 方式二：</span>
            <span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span> 字节长度<span class="token punctuation">,</span>last_name<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 字节长度 <span class="token keyword">DESC</span>
            
    <span class="token comment">-- 5、查询员工信息，要求先按工资排序，再按员工编号降序【按多个字段排序】</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary <span class="token keyword">ASC</span> <span class="token punctuation">,</span>employee_id <span class="token keyword">DESC</span>；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="分组查询"><a href="#分组查询" class="header-anchor">#</a> 分组查询</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 基本语法：</span>
    <span class="token keyword">select</span> 分组函数，列（要求出现在<span class="token keyword">group</span> <span class="token keyword">by</span>的后面）
    <span class="token keyword">from</span> 表 
<span class="token comment">--    【where 筛选条件】</span>
    <span class="token keyword">group</span> <span class="token keyword">by</span> 分组的列表 
<span class="token comment">--    【having 子句（对分组的结果集进一步的筛选）】</span>
<span class="token comment">--    【order by 子句】</span>
    
<span class="token comment">-- 特点：</span>
    <span class="token comment">-- 查询列要求是分组函数和 group by 后出现的字段。</span>
    <span class="token comment">-- HAVING 子句一定要跟在 group by 子句后面</span>
    <span class="token comment">-- 使用 HAVING 子句原因是，WHERE 关键字无法与聚合函数一起使用。HAVING 子句可以让我们筛选分组后的各组数据。</span>
    <span class="token comment">-- 分组查询中的筛选条件分为两类</span>
        <span class="token comment">-- 分组前筛选</span>
            <span class="token comment">-- 数据源：原始表里存在的</span>
            <span class="token comment">-- 位置：group by子句的前面</span>
            <span class="token comment">-- 关键字：where</span>
        <span class="token comment">-- 分组后筛选</span>
            <span class="token comment">-- 数据源：分组后的结果集</span>
            <span class="token comment">-- 位置：group by子句的后面</span>
            <span class="token comment">-- 关键字：having</span>
    <span class="token comment">-- 分组函数做条件肯定是放在 HAVING 子句中</span>
    <span class="token comment">-- 能用分组前筛选的，就优先考虑使用分组前筛选。简而言之就是，能用 where 完成的就不用 having。</span>
    <span class="token comment">-- group by子句支持单个字段分组，多个字段分组（字段之间用逗号隔开），也可以使用表达式分组</span>
    <span class="token comment">-- 同时也可以添加排序（排序放在整个分组查询的最后）</span>

<span class="token comment">-- 案 例</span>
    <span class="token comment">-- 查询每个工种的最高工资</span>
        <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> job_id<span class="token punctuation">;</span>
    
    <span class="token comment">-- 查询每个位置上的部门个数</span>
        <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>location_id <span class="token keyword">FROM</span> departments <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> location_id<span class="token punctuation">;</span>
    
    <span class="token comment">-- 查询邮箱中包含a字符的，每个部门的平均工资</span>
        <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> email <span class="token operator">LIKE</span> <span class="token string">'%a%'</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">;</span>
    
    <span class="token comment">-- 查询有奖金的每个领导手下员工的最高工资</span>
        <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>manager_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> manager_id<span class="token punctuation">;</span>
    
    <span class="token comment">-- 查询每个部门的员工个数</span>
        <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">;</span>
    
    <span class="token comment">-- 按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数&gt;5的有哪些</span>
        <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>LENGTH<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> LENGTH<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span> <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">5</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 查询每个部门的员工个数，并且对结果进行筛选，员工个数&gt;2的才显示（HAVING 子句）</span>
        <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 查询每个工种有奖金的员工的最高工资 &gt; 12000 的工种编号和最高工资</span>
        <span class="token comment">-- 方式一：使用 and</span>
            <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">null</span> <span class="token operator">AND</span> salary<span class="token operator">&gt;</span><span class="token number">12000</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> job_id；
    
        <span class="token comment">-- 方式二：使用 HAVING 子句</span>
            <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> 工资<span class="token punctuation">,</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">null</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> job_id <span class="token keyword">HAVING</span> 工资<span class="token operator">&gt;</span><span class="token number">12000</span>
    
    <span class="token comment">-- 查询领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号是哪个，以及其最低工资</span>
        <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> 最低工资<span class="token punctuation">,</span>manager_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> manager_id <span class="token operator">&gt;</span> <span class="token number">102</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> manager_id <span class="token keyword">HAVING</span> 最低工资<span class="token operator">&gt;</span><span class="token number">5000</span><span class="token punctuation">;</span>

    <span class="token comment">-- 查询每个部门每个工种的员工的平均工资（多字段分组）</span>
        <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>department_id<span class="token punctuation">,</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">,</span>job_id<span class="token punctuation">;</span>

    <span class="token comment">-- 查询每个部门每个工种的员工的平均工资，并且按平均工资的高低显示（倒序）</span>
        <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>department_id<span class="token punctuation">,</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">,</span>job_id <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">DESC</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><h4 id="连接查询"><a href="#连接查询" class="header-anchor">#</a> 连接查询</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>又称多表查询，当查询的字段来自于多个表时，就会用到连接查询

注意：笛卡尔积现象的发生
    笛卡尔积：表1 有m行，表2 有n行，结果=m*n 行
    发生原因：没有有效的连接条件
    避免：一定要注意添加有效的连接条件
    

分类：
    按年代分类：
        sql92 标准：仅仅支持内连接，多表用逗号分隔
        sql99 标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接，多表使用 【连接类型】join 连接。 
    
    按功能分类：
        内连接：
            等值连接
            非等值连接
            自连接
        外连接：
            左外连接
            右外连接
            全外连接
        交叉连接

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h5 id="七种join"><a href="#七种join" class="header-anchor">#</a> 七种JOIN</h5> <p><img src="https://gitee.com/SaulJWu/blog-images/raw/master/images/20211109095711.png" alt="image-20211109095711495"></p> <h5 id="内连接-等值连接、非等值连接、自连接"><a href="#内连接-等值连接、非等值连接、自连接" class="header-anchor">#</a> 内连接（等值连接、非等值连接、自连接）</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 其实内连接就跟我们前面写的那些查询语句差不多，只不过是多表</span>

<span class="token comment">-- 内连接：只有条件的交叉连接，根据某个条件筛选出符合条件的记录，不符合条件的记录不会出现在结果集中，即取出两张表中匹配到的数据，匹配不到的不保留</span>

<span class="token comment">-- 等值连接</span>
   <span class="token comment">-- 1、多表等值连接的结果为多表的交集部分</span>
   <span class="token comment">-- 2、n表连接，至少需要n-1个连接条件</span>
   <span class="token comment">-- 3、多表的顺序没有要求</span>
   <span class="token comment">-- 4、一般需要为表起别名</span>
   <span class="token comment">-- 5、可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</span>
   
<span class="token comment">-- 案 例</span>
   <span class="token comment">-- 查询有奖金的员工名、部门名</span>
       <span class="token comment">-- sql 92：</span>
           <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_name<span class="token punctuation">,</span>commission_pct <span class="token keyword">FROM</span> employees e<span class="token punctuation">,</span>departments d <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id <span class="token operator">AND</span> e<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
       
       <span class="token comment">-- sql 99：</span>
           <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_name <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> e <span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id <span class="token operator">AND</span> e<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
           
   
   <span class="token comment">-- 查询城市名中第二个字符为 o 的部门名和城市名</span>
       <span class="token comment">-- sql 92：</span>
           <span class="token keyword">SELECT</span> department_name<span class="token punctuation">,</span>city <span class="token keyword">FROM</span> departments d<span class="token punctuation">,</span>locations l <span class="token keyword">WHERE</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id <span class="token operator">AND</span> city <span class="token operator">LIKE</span> <span class="token string">'_o%'</span><span class="token punctuation">;</span>
   
       <span class="token comment">-- sql 99：</span>
           <span class="token keyword">SELECT</span> department_name<span class="token punctuation">,</span>city <span class="token keyword">FROM</span> departments d <span class="token keyword">JOIN</span> locations l <span class="token keyword">ON</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id <span class="token keyword">WHERE</span> city <span class="token operator">LIKE</span> <span class="token string">'_o%'</span><span class="token punctuation">;</span>
           
   
   <span class="token comment">-- 查询每个城市的部门个数，并且个数大于3的（分组+筛选）</span>
       <span class="token comment">-- sql 92：</span>
           <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 个数<span class="token punctuation">,</span> city <span class="token keyword">FROM</span> departments d<span class="token punctuation">,</span>locations l <span class="token keyword">WHERE</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> city <span class="token keyword">HAVING</span> 个数 <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>

       <span class="token comment">-- sql 99：</span>
           <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 个数<span class="token punctuation">,</span> city <span class="token keyword">FROM</span> departments d <span class="token keyword">JOIN</span> locations l <span class="token keyword">on</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> city <span class="token keyword">HAVING</span> 个数 <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>
           

   <span class="token comment">-- 查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资（多条分组）</span>
       <span class="token comment">-- sql 92：</span>
           <span class="token keyword">SELECT</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> departments d<span class="token punctuation">,</span>employees e <span class="token keyword">WHERE</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id <span class="token operator">AND</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>manager_id<span class="token punctuation">;</span>
       
       <span class="token comment">-- sql 99：</span>
           <span class="token keyword">SELECT</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> departments d <span class="token keyword">JOIN</span> employees e <span class="token keyword">on</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>manager_id<span class="token punctuation">;</span>


   <span class="token comment">-- 查询员工名、部门名和所在的城市（多表连接）</span>
       <span class="token comment">-- sql 92：</span>
           <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_name<span class="token punctuation">,</span>city <span class="token keyword">FROM</span> employees e<span class="token punctuation">,</span>departments d<span class="token punctuation">,</span>locations l <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id <span class="token operator">AND</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id<span class="token punctuation">;</span>

       <span class="token comment">-- sql 99：</span>
           <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_name<span class="token punctuation">,</span>city <span class="token keyword">FROM</span> employees e <span class="token keyword">JOIN</span> departments d  <span class="token keyword">ON</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id <span class="token keyword">JOIN</span> locations l <span class="token keyword">ON</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id<span class="token punctuation">;</span>


<span class="token comment">-- 等值连接和非等值连接的区别：连接条件为=则为等值连接，反之为非等值连接</span>

<span class="token comment">-- 等值连接和自然连接的区别：</span>
   <span class="token comment">-- 等值连接中不要求相等属性值的属性名相同，而自然连接要求相等属性值的属性名必须相同，即两关系只有在同名属性才能进行自然连接。</span>
   
   <span class="token comment">-- 等值连接不会将重复属性去掉，而自然连接去掉重复属性，也可以说，自然连接是去掉重复列的等值连接</span>
   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h5 id="外连接-左外连接、右外连接"><a href="#外连接-左外连接、右外连接" class="header-anchor">#</a> 外连接（左外连接、右外连接）</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 外连接：取出连接表中匹配到的数据，匹配不到的也会保留，其值为NULL。</span>

<span class="token comment">-- 特点：</span>
    <span class="token comment">-- 1、外连接的查询结果为主表中的所有记录，如果从表中有和它匹配的，则显示匹配的值，如果从表中没有相匹配的值，则显示为NULL</span>
    
    <span class="token comment">-- 2、左外连接，left join 左边的是主表，右外连接，right join 右边的是主表</span>

<span class="token comment">-- 案 例</span>
    <span class="token comment">-- 查询显示员工名以及其部门名称（左连接）</span>
        <span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>department_name <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> e <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
        
    <span class="token comment">-- 查询显示员工名以及其部门名称（右连接）</span>
        <span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>department_name <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> e <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
        
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="全外连接"><a href="#全外连接" class="header-anchor">#</a> 全外连接</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 在MySQL中，只提供了内连接，左外连接与右外连接。如果想要实现全外连接的效果，就需要使用 UNION</span>

<span class="token comment">-- UNION 操作符用于合并两个或多个 SELECT 语句的结果集。</span>

<span class="token comment">-- 全外连接：左表和右表都不做限制，所有的记录都显示，两表不足的地方用null 填充（等同于左连接+右连接）</span>

<span class="token comment">-- 示 例：</span>
   <span class="token comment">-- 连接员工表和部门表，显示员工信息以及部门名称</span>
       <span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>department_name <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> e <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
       <span class="token keyword">UNION</span>
       <span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>department_name <span class="token keyword">FROM</span> employees e <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="交叉连接"><a href="#交叉连接" class="header-anchor">#</a> 交叉连接</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 交叉连接（笛卡儿积）：将两个表的所有数据全部对应显示一次，简单来说就是笛卡儿积。</span>

<span class="token comment">-- 了解即可，正式工作如果写了，就赶紧准备提桶跑路。</span>

<span class="token comment">-- 示 例：</span>
  <span class="token comment">-- 连接员工表和部门表，显示员工信息以及部门名称</span>
      <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> departments；

<span class="token comment">-- PS:工作中用完就可以提桶跑路了。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>含义：
    出现在其他语句中的 select 语句，称为子查询或内查询
    内部嵌套其他select语句的查询，称为外查询或外查询

分类：
     按子查询出现的位置：
        select 后面
        from 后面
        where 或 having 后面
        exists后面（相关子查询）
    
    按结果集的行列数不同：
        标量子查询（结果集只有一行一列）
        列子查询（结果集只有一列多行）
        行子查询（结果集有一行多列）
        表子查询（结果集一般为多行多列）
    
支持的子查询类型：
    select 后面：仅仅支持标量子查询
    from 后面：支持表子查询
    where 或 having 后面：标量子查询，列子查询，行子查询
    exists 后面：仅支持表子查询
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="select-后面的子查询使用"><a href="#select-后面的子查询使用" class="header-anchor">#</a> select 后面的子查询使用</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>    <span class="token comment">-- select 后面：仅仅支持标量子查询（结果集只有一行一列）</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查询每个部门的员工个数</span>
        <span class="token keyword">SELECT</span> d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> FROMemployees e <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span> 个数 <span class="token keyword">FROM</span> departments d<span class="token punctuation">;</span>

    
    <span class="token comment">-- 查询员工号=102的部门名</span>
        <span class="token keyword">SELECT</span> <span class="token punctuation">(</span>
            <span class="token keyword">SELECT</span> department_name <span class="token keyword">FROM</span> departments d 
            <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> employees e 
            <span class="token keyword">on</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id 
            <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token number">102</span>
        <span class="token punctuation">)</span> 部门名<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h5 id="exists-后面的子查询使用-也称作-相关子查询"><a href="#exists-后面的子查询使用-也称作-相关子查询" class="header-anchor">#</a> exists 后面的子查询使用（也称作 相关子查询）</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 特 点：</span>
    <span class="token comment">-- 返回的结果是：1 或 0</span>
    <span class="token comment">-- 对于子查询的类型无限制，可以是标量子查询，也可以是列子查询或是行子查询</span>

<span class="token comment">-- 案 例：</span>
    <span class="token comment">-- 查询有员工的部门名</span>
        <span class="token keyword">SELECT</span> department_name <span class="token keyword">FROM</span> departments d <span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees e <span class="token keyword">WHERE</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="from-后面的子查询使用"><a href="#from-后面的子查询使用" class="header-anchor">#</a> from 后面的子查询使用</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查询每个部门的平均工资和工资等级</span>
    <span class="token keyword">SELECT</span> ag_dep<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>g<span class="token punctuation">.</span>grade_level
    <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> ag<span class="token punctuation">,</span>department_id
        <span class="token keyword">FROM</span> employees
        <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id
    <span class="token punctuation">)</span> ag_dep
    <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> job_grades g
    <span class="token keyword">on</span> ag_dep<span class="token punctuation">.</span>ag <span class="token operator">BETWEEN</span> lowest_sal <span class="token operator">AND</span> highest_sal

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="where-后面的子查询使用"><a href="#where-后面的子查询使用" class="header-anchor">#</a> where 后面的子查询使用</h5> <h6 id="标量子查询"><a href="#标量子查询" class="header-anchor">#</a> 标量子查询</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
<span class="token comment">-- 特 点：</span>
    <span class="token comment">-- 1、子查询放在条件的右侧</span>
    <span class="token comment">-- 2、标量子查询，一般搭配着单行操作符使用：&gt;, &lt;, &gt;=, &lt;=, =, &lt;&gt;</span>
    <span class="token comment">-- 3、子查询的执行优先于主查询执行。</span>
    <span class="token comment">-- 4、在标量子查询中，如果该子查询的结果不是单行单列，那么则会报错。</span>
    <span class="token comment">-- 5、子查询要编写在 （）里面</span>


<span class="token comment">-- 案 例：</span>
    <span class="token comment">-- 查询salary &gt; Abel 的员工信息 </span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span>  salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span>
	        <span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> last_name <span class="token operator">=</span> <span class="token string">'Abel'</span><span class="token punctuation">)</span>；

    <span class="token comment">-- 返回 job_id 与 141 号员工相同，salary 比 143 号员工多的员工姓名，job_id 和工资</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>job_id<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> job_id <span class="token operator">=</span> 
	        <span class="token punctuation">(</span><span class="token keyword">SELECT</span> job_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">141</span><span class="token punctuation">)</span> 
        <span class="token operator">AND</span> salary <span class="token operator">&gt;</span> 
	        <span class="token punctuation">(</span><span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">143</span><span class="token punctuation">)</span>；

    <span class="token comment">-- 返回公司工资最少的员工的名字，job_id和工资</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>job_id<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary <span class="token operator">=</span> 
	        <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">-- 查询最低工资大于50号部门最低工资的部门id和其最低工资</span>
        <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> 工资<span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id 
        <span class="token keyword">HAVING</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span>  <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h6 id="列子查询"><a href="#列子查询" class="header-anchor">#</a> 列子查询</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
<span class="token comment">-- 特 点：</span>
    <span class="token comment">-- 1、 列子查询也称作多行子查询，因为返回的结果是 一列多行 的数据</span>
    <span class="token comment">-- 2、使用列子查询，要搭配 多行比较操作符 来使用：</span>
        <span class="token comment">-- IN / NOT IN ：等于列表中的任意一个</span>
        <span class="token comment">-- ANY / SOME ：和子查询返回的某一个值比较</span>
        <span class="token comment">-- ALL ：和子查询返回的所有值进行比较</span>
        
        
<span class="token comment">-- 案 例 ：</span>
    <span class="token comment">-- 返回 location_id 是 1400 或 1700 的部门中的所有员工姓名</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">in</span> 
            <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> department_id <span class="token keyword">FROM</span> departments <span class="token keyword">WHERE</span> location_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1400</span><span class="token punctuation">,</span><span class="token number">1700</span><span class="token punctuation">)</span><span class="token punctuation">)</span>；

    <span class="token comment">-- 返回其他部门中比 job_id 为 'IT_PROG' 部门里任一工资低的员工的员工号、姓名、job_id 以及 salary</span>
		<span class="token keyword">SELECT</span> employee_id<span class="token punctuation">,</span>last_name<span class="token punctuation">,</span>job_id<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary <span class="token operator">&gt;</span> <span class="token keyword">ANY</span><span class="token punctuation">(</span>
			<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span>
		<span class="token punctuation">)</span> <span class="token operator">AND</span> job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT_PROG'</span><span class="token punctuation">;</span>
        
    <span class="token comment">-- 返回其他部门中比 job_id 为 'IT_PROG' 部门所有工资都低的员工的员工号、姓名、job_id 以及 salary</span>
         <span class="token keyword">SELECT</span> employee_id<span class="token punctuation">,</span>last_name<span class="token punctuation">,</span>job_id<span class="token punctuation">,</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary <span class="token operator">&lt;</span> <span class="token keyword">ALL</span><span class="token punctuation">(</span>
            <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span>
        <span class="token punctuation">)</span> <span class="token operator">AND</span> job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT_PROG'</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h6 id="行子查询-仅作了解"><a href="#行子查询-仅作了解" class="header-anchor">#</a> 行子查询（仅作了解）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
<span class="token comment">-- 特 点：</span>
    <span class="token comment">-- 行子查询。返回的结果集有可能是一行多列，也有可能是多行多列</span>
    <span class="token comment">-- 使用行子查询，则条件必须一致，都是统一 等于 ，大于，或是小于。</span>
    
    
<span class="token comment">-- 案 例：(由于行子查询比较难懂，所以用标量子查询来作为演示)</span>
    <span class="token comment">-- 查询员工编号最小并且工资最高的员工信息</span>
        <span class="token comment">-- 标量子查询写法：</span>
           <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token punctuation">(</span>
                <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>employee_id<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees
            <span class="token punctuation">)</span> <span class="token operator">AND</span> salary <span class="token operator">=</span> <span class="token punctuation">(</span>
                <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">-- 行子查询写法：</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> <span class="token punctuation">(</span>employee_id<span class="token punctuation">,</span>salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
	            <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>employee_id<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="分页查询"><a href="#分页查询" class="header-anchor">#</a> 分页查询</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 当要显示的数据，无法在一页显示时，需要使用分页查询来分割显示的数据</span>
    
<span class="token comment">-- 特 点：</span>
    <span class="token comment">-- limit 语句放在查询语句的最后</span>
    <span class="token comment">-- 分页起始值的计算公式：select 查询列表 from 表名 limit (page-1)*size , size</span>
        <span class="token comment">-- page：要显示的页数</span>
        <span class="token comment">-- size：每页的条数</span>
    
<span class="token comment">--语 法：</span>
        <span class="token keyword">select</span> 字段<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
        <span class="token keyword">from</span> 表名
       【连接查询
        <span class="token keyword">where</span> 筛选条件
        <span class="token keyword">group</span> <span class="token keyword">by</span> 分组字段
        <span class="token keyword">having</span> 分组后的筛选条件
        <span class="token keyword">order</span> <span class="token keyword">by</span> 排序字段 正序<span class="token operator">/</span>倒序】
        <span class="token keyword">limit</span> <span class="token keyword">offset</span> <span class="token punctuation">,</span> size
        
        <span class="token keyword">offset</span>：要显示的数据的起始索引（起始索引从 <span class="token number">0</span> 开始）
        size：要显示的条目个数

<span class="token comment">-- 案 例：</span>
    <span class="token comment">-- 查询前五条员工信息</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>

    <span class="token comment">-- 查询第11条~第25条员工信息</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">LIMIT</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">;</span>

    <span class="token comment">-- 有奖金的员工信息，并且工资较高的前10名显示</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary <span class="token keyword">DESC</span> <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span>
       
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="联合查询-union"><a href="#联合查询-union" class="header-anchor">#</a> 联合查询（union）</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- union（联合、合并）：将多条查询语句的结果合并成一个结果</span>

<span class="token comment">-- 特 点：</span>
    <span class="token comment">-- 要求多条查询语句的查询列数是一致的！</span>
    <span class="token comment">-- 要求多条查询语句的查询的每一列的类型和顺序最好一致</span>
    <span class="token comment">-- union关键字默认去重，如果使用 union all 可以包含重复项</span>


<span class="token comment">-- 语 法：</span>
    查询语句<span class="token number">1</span>
    <span class="token keyword">union</span>
    查询语句<span class="token number">2</span>
    <span class="token keyword">union</span>
    。。。


<span class="token comment">-- 案 例：</span>
    <span class="token comment">-- 查询部门编号&gt;90 或 邮箱包含 a 的员工信息</span>
        <span class="token comment">-- 不使用联合查询的方式：</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> email <span class="token operator">LIKE</span> <span class="token string">'%a%'</span> <span class="token operator">OR</span> department_id <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>
        
        <span class="token comment">-- 联合查询</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> email <span class="token operator">LIKE</span> <span class="token string">'%a%'</span>
            <span class="token keyword">UNION</span>
            <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> department_id <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>概念：
    类似于 java 的方法。

好处：
    1. 隐藏了实现细节
    2. 提高代码的重用性

调用：
    select 函数名(实参列表) 【from 表】;

分类：
    1、单行函数
        如：concat、length、ifnull 等
    2、分组函数，一般用作统计，又称为统计函数、聚合函数或者组函数。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="系统函数"><a href="#系统函数" class="header-anchor">#</a> 系统函数</h3> <h4 id="单行函数"><a href="#单行函数" class="header-anchor">#</a> 单行函数</h4> <h5 id="字符函数"><a href="#字符函数" class="header-anchor">#</a> 字符函数</h5> <h6 id="拼接函数-concat"><a href="#拼接函数-concat" class="header-anchor">#</a> 拼接函数( CONCAT )</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token comment">/*
    在java中，如果我们想拼接字符串，可以直接使用 + 号，但是MySQL中的 + 号只有一个作用，那就是运算。
    而如果我们想拼接字段名，可以使用 CONCAT() 函数。
 */</span>
 <span class="token comment">-- 基础语法：</span>
    <span class="token keyword">select</span> CONCAT<span class="token punctuation">(</span>字段名<span class="token number">1</span>，字段名<span class="token number">2</span>，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
    
<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查询显示员工的姓名，要求姓和名要合并一起显示,中间以空格隔开</span>
        <span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">,</span>first_name<span class="token punctuation">)</span> 姓名 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h6 id="判空函数-ifnull"><a href="#判空函数-ifnull" class="header-anchor">#</a> 判空函数（IFNULL）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 在查询数据时，其中有一个字段的值有可能存在 null 值，而我们想给予其一个默认值，可以使用判空函数。</span>

<span class="token comment">-- 基础语法：</span>
    <span class="token keyword">select</span> IFNULL<span class="token punctuation">(</span>字段名，默认值<span class="token punctuation">)</span> <span class="token keyword">from</span> 表名；

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查询员工名、奖金率和员工编号，如果奖金率为空则显示为 0，否则正常显示奖金率。</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> commission_pct<span class="token punctuation">,</span> employee_id <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="长度函数-length"><a href="#长度函数-length" class="header-anchor">#</a> 长度函数（LENGTH）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token comment">-- 如果我们需要计算一个字符的长度，那么我们可以使用函数：LENGTH（字符）</span>
 
 <span class="token comment">-- 基础语法：</span>
    <span class="token keyword">select</span> LENGTH<span class="token punctuation">(</span>字符串<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
 <span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查询员工名字的长度</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>LENGTH<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span> 字节长度 <span class="token keyword">FROM</span> employees；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="大小写转换函数-upper、lower"><a href="#大小写转换函数-upper、lower" class="header-anchor">#</a> 大小写转换函数（UPPER、LOWER）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- UPPER 可以将选定的数据转换为大写</span>
<span class="token comment">-- LOWER 可以将选定的数据转换为小写</span>

<span class="token comment">-- 基础语法：</span>
    <span class="token keyword">SELECT</span> UPPER<span class="token punctuation">(</span>实参<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">/</span> <span class="token keyword">SELECT</span> LOWER<span class="token punctuation">(</span>实参<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 将姓变大写，名变小写，然后拼接，中间以空格隔开</span>
    <span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>UPPER<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">,</span>LOWER<span class="token punctuation">(</span>first_name<span class="token punctuation">)</span><span class="token punctuation">)</span> 姓名 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h6 id="截取函数-substr"><a href="#截取函数-substr" class="header-anchor">#</a> 截取函数（SUBSTR）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 根据条件截取指定的字符串</span>
<span class="token comment">/*
要注意！和 java 不同，索引是从1开始！！！

截取函数一共有四种方式：

SUBSTR(str,pos,len) ：截取从指定索引处指定字符长度的字符

SUBSTR(str FROM pos FOR len)：截取从指定索引处指定字符长度的字符

SUBSTR(str,pos)： 截取从指定索引处后面所有的字符

SUBSTR(str FROM pos)： 截取从指定索引处后面所有的字符
*/</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查询员工名字，第一个字母和第二个字母之间使用下划线隔开</span>
        <span class="token comment">-- 方式一：</span>
            <span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>SUBSTR<span class="token punctuation">(</span>first_name<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'_'</span><span class="token punctuation">,</span>SUBSTR<span class="token punctuation">(</span>first_name<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 员工名 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

        <span class="token comment">-- 方式二：</span>
            <span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>SUBSTR<span class="token punctuation">(</span>first_name <span class="token keyword">FROM</span> <span class="token number">1</span> <span class="token keyword">FOR</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'_'</span><span class="token punctuation">,</span>SUBSTR<span class="token punctuation">(</span>first_name <span class="token keyword">FROM</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 员工名 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h6 id="计算起始索引函数-instr"><a href="#计算起始索引函数-instr" class="header-anchor">#</a> 计算起始索引函数（INSTR）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 用于查找指定字符在字符串中的起始下标</span>

<span class="token comment">-- 基本语法</span>
    <span class="token keyword">select</span> instr<span class="token punctuation">(</span>字符串，字符<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">-- 例子：</span>
        <span class="token keyword">SELECT</span> INSTR<span class="token punctuation">(</span><span class="token string">'老王找到了起夜级李姐'</span><span class="token punctuation">,</span><span class="token string">'李姐'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 下标<span class="token punctuation">;</span> <span class="token comment">#可直接复制运行</span>
    
<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查找员工编号为100，他的姓里面，下划线所在的起始索引</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>INSTR<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span><span class="token string">'_'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 起始索引 <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h6 id="过滤函数"><a href="#过滤函数" class="header-anchor">#</a> 过滤函数</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 过滤指定的字符串</span>

<span class="token comment">-- 基本语法</span>
    <span class="token comment">-- 完整格式：</span>
        <span class="token comment">-- TRIM([{BOTH | LEADING | TRAILING} [remstr] FROM] str)</span>

    <span class="token comment">-- 简化格式：</span>
        <span class="token comment">-- TRIM([remstr FROM] str)</span>
    
<span class="token comment">-- 返回字符串 str ， 其中所有remstr前缀和/或后缀都已被删除。若分类符BOTH、LEADING或TRAILING中没有一个是给定的,则假设为BOTH。remstr为可选项，在未指定情况下，可删除空格。</span>
    <span class="token comment">-- BOTH：过滤字符串头部和尾部</span>
    <span class="token comment">-- LEADING：过滤字符串的头部</span>
    <span class="token comment">-- TRAILING：过滤字符串的尾部</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 将字符串 '    bar    '  前后的空格去除掉</span>
        <span class="token keyword">SELECT</span> TRIM<span class="token punctuation">(</span><span class="token string">'    bar    '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果： 'bar'</span>
        
    <span class="token comment">-- 将字符串 ' xxxbarxxx '  前后的 ' x ' 去除掉</span>
        <span class="token keyword">SELECT</span> TRIM<span class="token punctuation">(</span>BOTH <span class="token string">'x'</span> <span class="token keyword">FROM</span> <span class="token string">'xxxbarxxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果： 'bar'</span>
    或
        <span class="token keyword">SELECT</span> TRIM<span class="token punctuation">(</span><span class="token string">'x'</span> <span class="token keyword">FROM</span> <span class="token string">'xxxbarxxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果： 'bar'</span>
        
    <span class="token comment">-- 将字符串 ' xxxbar '  前面的 ' x ' 去除掉</span>
        <span class="token keyword">SELECT</span> TRIM<span class="token punctuation">(</span>LEADING <span class="token string">'x'</span> <span class="token keyword">FROM</span> <span class="token string">'xxxbar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果： 'bar'</span>
        
    <span class="token comment">-- 将字符串 ' barxxx '  后面的 ' x ' 去除掉</span>
        <span class="token keyword">SELECT</span> TRIM<span class="token punctuation">(</span>TRAILING <span class="token string">'x'</span> <span class="token keyword">FROM</span> <span class="token string">'barxxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果： 'bar'</span>
    
    <span class="token comment">-- 将字符串 ' barxxyz '  后面的 ' xyz ' 去除掉</span>
        <span class="token keyword">SELECT</span> TRIM<span class="token punctuation">(</span>TRAILING <span class="token string">'xyz'</span> <span class="token keyword">FROM</span> <span class="token string">'barxxyz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果： 'barx'</span>

<span class="token comment">-- 在这里还有两个扩展的过滤函数，一般比较少用，因为只能去除空格，不能像 TRIM 一样可以去除指定字符</span>
    <span class="token comment">-- 去除左空格函数</span>
        <span class="token keyword">SELECT</span> LTRIM<span class="token punctuation">(</span><span class="token string">'     barbar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果： 'barbar'</span>
        
    <span class="token comment">-- 去除右空格函数</span>
        <span class="token keyword">SELECT</span> RTRIM<span class="token punctuation">(</span><span class="token string">'barbar    '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果： 'barbar'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h6 id="填充函数-lpad、rpad"><a href="#填充函数-lpad、rpad" class="header-anchor">#</a> 填充函数（LPAD、RPAD）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 用指定的字符实现填充指定长度</span>

<span class="token comment">-- 种类</span>
    <span class="token comment">-- 左填充：LPAD(str,len,padstr) </span>
        <span class="token keyword">select</span> LPAD<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">-- 右填充：RPAD(str,len,padstr)</span>
        <span class="token keyword">select</span> RPAD<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 使用 ' * ' 给字符串 '星星' 的左边填充，使其长度达到 10 。</span>
        <span class="token keyword">select</span> LPAD<span class="token punctuation">(</span><span class="token string">'星星'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span>；
            <span class="token comment">-- 结果：********星星</span>
        
    <span class="token comment">-- 使用 ' * ' 给字符串 '星星' 的左边填充，使其长度达到 10 。</span>
        <span class="token keyword">select</span> RPAD<span class="token punctuation">(</span><span class="token string">'星星'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span>；
            <span class="token comment">-- 结果：星星********</span>

<span class="token comment"># 注意不要搞混，虽然在mysql中utf-8下，一个中文字母等于3个字节，但是填充函数里填写的长度是字符长度，不是字节长度。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h6 id="替换函数-replace"><a href="#替换函数-replace" class="header-anchor">#</a> 替换函数（replace）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 将指定的字符串或字符替换成我们想要替换的数据</span>

<span class="token comment">-- 基本语法</span>
    <span class="token keyword">select</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span>from_str<span class="token punctuation">,</span>to_str<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 将员工编号为100，姓里面的下划线替换成 # 号</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span><span class="token keyword">REPLACE</span><span class="token punctuation">(</span>last_name<span class="token punctuation">,</span><span class="token string">'_'</span><span class="token punctuation">,</span><span class="token string">'#'</span><span class="token punctuation">)</span> 替换 <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token comment">-- 结果：K_ing &gt; K#ing</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="数字函数"><a href="#数字函数" class="header-anchor">#</a> 数字函数</h5> <h6 id="四舍五入函数-round"><a href="#四舍五入函数-round" class="header-anchor">#</a> 四舍五入函数（round）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 四舍五入：ROUND(X)</span>

<span class="token comment">-- 保留 D 位小数，四舍五入：ROUND(X,D)</span>
   
<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 将数值 1.65 四舍五入</span>
        <span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">1.65</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">-- 结果：2</span>
        
        

    <span class="token comment">-- 将数值 1.65789 四舍五入，并保留两位小数</span>
        <span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">1.65789</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">-- 结果：1.66</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h6 id="向上取整函数-ceil"><a href="#向上取整函数-ceil" class="header-anchor">#</a> 向上取整函数（ceil）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 向上取整，返回大于等于该参数的最小整数</span>

<span class="token comment">-- 基本语法：</span>
    <span class="token keyword">select</span> ceil<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 向上取整 1.00</span>
        <span class="token keyword">SELECT</span> CEIL<span class="token punctuation">(</span><span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">-- 结果：1</span>

    <span class="token comment">-- 向上取整 1.02</span>
        <span class="token keyword">SELECT</span> CEIL<span class="token punctuation">(</span><span class="token number">1.02</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">-- 结果：2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h6 id="向下取整函数-floor"><a href="#向下取整函数-floor" class="header-anchor">#</a> 向下取整函数（floor）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 向下取整，返回小于等于该参数的最大整数</span>

<span class="token comment">-- 基本语法：</span>
    <span class="token keyword">select</span> floor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 向下取整 9.99</span>
        <span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token number">9.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">-- 结果：9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h6 id="截断函数-truncate"><a href="#截断函数-truncate" class="header-anchor">#</a> 截断函数（TRUNCATE）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 指定截断后留下几位小数（不会进行四舍五入）</span>

<span class="token comment">-- 基本语法：</span>
    <span class="token keyword">SELECT</span> <span class="token keyword">TRUNCATE</span>（数值，保留位数）<span class="token punctuation">;</span>
    
<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 该 1.65789 数值保留两位小数，不进行四舍五入</span>
        <span class="token keyword">SELECT</span> <span class="token keyword">TRUNCATE</span><span class="token punctuation">(</span><span class="token number">1.65789</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">-- 结果：1.65</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h6 id="取余函数-mod"><a href="#取余函数-mod" class="header-anchor">#</a> 取余函数（mod）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 效果和直接使用运算符 % 一样</span>

<span class="token comment">-- 取余运算：a - a / b * b</span>
    <span class="token comment">-- 如 mod（10，3），结果就是 10 - 10 / 3 * 3 --&gt; 1</span>

<span class="token comment">-- 基本语法：</span>
    <span class="token keyword">SELECT</span> <span class="token function">MOD</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 计算 10 % 3</span>
        <span class="token keyword">SELECT</span> <span class="token function">MOD</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">-- 结果：1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h5> <h6 id="返回当前系统日期-时间-now"><a href="#返回当前系统日期-时间-now" class="header-anchor">#</a> 返回当前系统日期 + 时间（now）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 用于返回当前系统日期 + 时间</span>

<span class="token comment">-- 基本语法：</span>
    <span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h6 id="返回当前系统日期-curdate"><a href="#返回当前系统日期-curdate" class="header-anchor">#</a> 返回当前系统日期（CURDATE）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 该函数只返回系统当前日期，不返回时间</span>

<span class="token comment">-- 基本语法：</span>
    <span class="token keyword">SELECT</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h6 id="返回当前系统时间-curtime"><a href="#返回当前系统时间-curtime" class="header-anchor">#</a> 返回当前系统时间（CURTIME）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 该函数只返回系统当前时间，不返回日期</span>

<span class="token comment">-- 基本语法：</span>
    <span class="token keyword">SELECT</span> CURTIME<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h6 id="获取指定部分-年、月、日、时分秒等等"><a href="#获取指定部分-年、月、日、时分秒等等" class="header-anchor">#</a> 获取指定部分，年、月、日、时分秒等等</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 年（year）</span>
    <span class="token keyword">select</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token comment">-- 月（month）</span>
    <span class="token keyword">select</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token comment">-- 日（day）</span>
    <span class="token keyword">SELECT</span> <span class="token keyword">DAY</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 还有 hour、minute、second 等等。因为这类型函数非常得多，具体就不一一展示了，有兴趣可以自行去查询</span>



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h6 id="日期转换函数-strtodate、dateformat"><a href="#日期转换函数-strtodate、dateformat" class="header-anchor">#</a> 日期转换函数（StrToDate、DateFormat）</h6> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 将日期格式的字符转换成指定格式的日期</span>
    <span class="token keyword">select</span> STR_TO_DATE<span class="token punctuation">(</span>str<span class="token punctuation">,</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">-- 例：</span>
        <span class="token keyword">SELECT</span> STR_TO_DATE<span class="token punctuation">(</span><span class="token string">'9-13-1999'</span><span class="token punctuation">,</span><span class="token string">'%m-%d-%Y'</span><span class="token punctuation">)</span>

<span class="token comment">-- 将日期转换成字符</span>
    <span class="token keyword">select</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">-- 例：</span>
        <span class="token keyword">SELECT</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token string">'1999-9-13'</span><span class="token punctuation">,</span><span class="token string">'%Y年%m月%d日'</span><span class="token punctuation">)</span>

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查询入职日期为 1992--4-3 的员工信息</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">WHERE</span> hiredate <span class="token operator">=</span> STR_TO_DATE<span class="token punctuation">(</span><span class="token string">'1992--4-3'</span><span class="token punctuation">,</span><span class="token string">'%Y--%c-%d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token comment">-- 查询有奖金的员工名和入职日期（xx月/xx日 xx年）</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>DATE_FORMAT<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span><span class="token string">'%m月/%d日 %Y年'</span><span class="token punctuation">)</span> 入职日期 <span class="token keyword">FROM</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><table><thead><tr><th>序号</th> <th>格式符</th> <th>功能</th></tr></thead> <tbody><tr><td>1</td> <td>%Y</td> <td>四位的年份</td></tr> <tr><td>2</td> <td>%y</td> <td>2位的年份</td></tr> <tr><td>3</td> <td>%m</td> <td>月份(01,02,...,11,12)</td></tr> <tr><td>4</td> <td>%c</td> <td>月份(1,2,...,11,12)</td></tr> <tr><td>5</td> <td>%d</td> <td>日(01,02,... )</td></tr> <tr><td>6</td> <td>%H</td> <td>小时( 24小时制 )</td></tr> <tr><td>7</td> <td>%h</td> <td>小时( 12小时制 )</td></tr> <tr><td>8</td> <td>%i</td> <td>分钟( 00,01,...,59 )</td></tr> <tr><td>9</td> <td>%s</td> <td>秒( 00,01,...,59 )</td></tr></tbody></table> <h4 id="分组函数-又称聚合函数或统计函数、组函数"><a href="#分组函数-又称聚合函数或统计函数、组函数" class="header-anchor">#</a> 分组函数（又称聚合函数或统计函数、组函数）</h4> <h5 id="求和函数和求平均值函数-sum-avg"><a href="#求和函数和求平均值函数-sum-avg" class="header-anchor">#</a> 求和函数和求平均值函数（sum &amp; avg）</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- sum：将参数的值全部相加起来</span>
    <span class="token comment">-- 基本语法</span>
        <span class="token keyword">select</span> <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> expr<span class="token punctuation">)</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
    
    <span class="token comment">-- 案 例</span>
        <span class="token comment">-- 显示所有员工的工资总和</span>
            <span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> 总和 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
            
        <span class="token comment">-- 显示所有员工的工资总和（去重）</span>
            <span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> salary<span class="token punctuation">)</span> 总和 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token comment">-- avg：将参数的所有值进行相加，然后除以个数得到平均值</span>
    <span class="token comment">-- 基本语法</span>
        <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> expr<span class="token punctuation">)</span> <span class="token keyword">FROM</span> 表名

    <span class="token comment">-- 案 例</span>
        <span class="token comment">-- 显示员工的工资平均值</span>
            <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> 平均值 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
            
        <span class="token comment">-- 显示员工的工资平均值（去重）</span>
            <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> salary<span class="token punctuation">)</span> 平均值 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token comment">-- sum 和 avg 一般用于处理数值类型的数据</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h5 id="最大值和最小值-max-min"><a href="#最大值和最小值-max-min" class="header-anchor">#</a> 最大值和最小值（max &amp; min）</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- max：用于返回参数中的最大值</span>
    <span class="token comment">-- 基本语法</span>
        <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> expr<span class="token punctuation">)</span> <span class="token keyword">FROM</span> 表名<span class="token punctuation">;</span>

    <span class="token comment">-- 案 例</span>
        <span class="token comment">-- 查询返回工资最高的员工工资</span>
            <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> 最高工资 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

        <span class="token comment">-- 查询返回工资最高的员工工资（去重）</span>
            <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> salary<span class="token punctuation">)</span> 最高工资 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>


<span class="token comment">-- min：用于返回参数中的最小值</span>
    <span class="token comment">-- 基本语法</span>
        <span class="token keyword">select</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> expr<span class="token punctuation">)</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>

    <span class="token comment">-- 案 例</span>
        <span class="token comment">-- 查询返回工资最低的员工工资</span>
            <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> 最低工资 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

        <span class="token comment">-- 查询返回工资最低的员工工资（去重）</span>
            <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> salary<span class="token punctuation">)</span> 最低工资 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token comment">-- max 和 min 函数可以处理任何类型的参数。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h5 id="计算个数函数-count"><a href="#计算个数函数-count" class="header-anchor">#</a> 计算个数函数（count）</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- count：用于计算参数的个数</span>
    <span class="token comment">-- 基本语法</span>
        <span class="token keyword">select</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> expr<span class="token punctuation">,</span><span class="token punctuation">[</span>expr<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>

    <span class="token comment">-- 特点：</span>
        <span class="token comment">-- count（*）和 count（1）都是用来统计行数，这两者的使用也比较多</span>
        <span class="token comment">-- 在 MYISAM 存储引擎下，count（*）效率高一些</span>
        <span class="token comment">-- 在 INNODB 存储引擎下，count（1）和 count（*）效率一样，但在没有主键时，count（1）效率高一些。</span>
    
    <span class="token comment">-- 案 例</span>
        <span class="token comment">-- 查询有工资的员工个数</span>
            <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

        <span class="token comment">-- 查询有工资的员工个数（去重）</span>
            <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h5 id="流程控制函数-if、case"><a href="#流程控制函数-if、case" class="header-anchor">#</a> 流程控制函数（if、case）</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- if 函数：等同于 if else 的效果，但其实更类似于 三元表达式</span>

<span class="token comment">-- 基本语法</span>
    <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span>判断条件<span class="token punctuation">,</span><span class="token boolean">true</span>时的返回结果<span class="token punctuation">,</span><span class="token boolean">false</span>时的返回结果<span class="token punctuation">)</span>；

<span class="token comment">-- 案例：</span>
    <span class="token comment">-- 查询显示员工的名字和奖金率，如果奖金率为 null ，则显示为 0</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>commission_pct<span class="token punctuation">,</span><span class="token keyword">IF</span><span class="token punctuation">(</span>commission_pct <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>commission_pct<span class="token punctuation">)</span> 奖金率 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
        

<span class="token comment">-- case函数：等同于 switch case 的效果</span>

<span class="token comment">-- case函数有两种使用方式：</span>
<span class="token comment">--- 使用方式一：switch case</span>
<span class="token comment">/*
 java 中
    switch(变量或表达式){
        case 常量1:语句1；break；
        ...
        default：语句n；break； 
    }

mysql 中
    case 要判断的字段或表达式
    when 常量1 then 要显示的值1或语句1；
    when 常量2 then 要显示的值2或语句2；
    ...
    else 要显示的 值n 或 语句n；
    end

由此可以发现，MySQL中 case 对应 switch，when ... then ...；对应 case，else 对应 default，最后要使用 end 结束整个流程。
else 是可以被省略的，如同 java 中 default 可以被省略一样。
而且，then 后面要显示的是值而不是语句的时候，不需要加分号，否则会报错.
*/</span>

<span class="token comment">-- 案 例：</span>
    <span class="token comment">/* 查询员工的工资，要求：
          部门号 = 50，显示的工资为 1.1 倍
          部门号 = 80，显示的工资为 1.2 倍
          其他部门，显示的工资为原工资
    */</span>
        <span class="token keyword">SELECT</span> salary 原工资<span class="token punctuation">,</span>department_id<span class="token punctuation">,</span>
        <span class="token keyword">CASE</span> department_id
            <span class="token keyword">WHEN</span> <span class="token number">50</span> <span class="token keyword">THEN</span> salary<span class="token operator">*</span><span class="token number">1.1</span> 
            <span class="token keyword">WHEN</span> <span class="token number">80</span> <span class="token keyword">THEN</span> salary<span class="token operator">*</span><span class="token number">1.2</span>
            <span class="token keyword">ELSE</span> salary
        <span class="token keyword">END</span> <span class="token keyword">AS</span> 新工资 <span class="token keyword">FROM</span> employeesl<span class="token punctuation">;</span>

<span class="token comment">-- 使用方式二：if else</span>
<span class="token comment">/*
java 中：
    if（条件 1）{
        语句 1；
    }else if（条件 2）{
        语句 2；
    }
    ...
    else{
        语句 n；
    }
    
mysql 中
    case
    when 条件1 then 要显示的值1或语句1
    when 条件2 then 要显示的值2或语句2
    ...
    else 要显示的值n 或 语句n；
    end

在这种使用方式下，case 后面不需要跟条件，而是在 when 的后面写条件。
同样，else 可以被省略 ，以及 then 后面要显示的是值而不是语句的时候，不需要加分号，否则会报错.
*/</span>

<span class="token comment">-- 案 例：</span>
    <span class="token comment">/* 查询员工的工资的情况
          如果工资 &gt; 20000，显示A级别
          如果工资 &gt; 15000，显示B级别
          如果工资 &gt; 10000，显示C级别
          除此之外，显示D级别
    */</span>
    <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>salary 原工资<span class="token punctuation">,</span>
    <span class="token keyword">CASE</span> 
        <span class="token keyword">WHEN</span> salary<span class="token operator">&gt;</span><span class="token number">20000</span> <span class="token keyword">THEN</span> <span class="token string">'A'</span>
        <span class="token keyword">WHEN</span> salary<span class="token operator">&gt;</span><span class="token number">15000</span> <span class="token keyword">THEN</span> <span class="token string">'B'</span>
        <span class="token keyword">WHEN</span> salary<span class="token operator">&gt;</span><span class="token number">10000</span> <span class="token keyword">THEN</span> <span class="token string">'C'</span>
        <span class="token keyword">ELSE</span> <span class="token string">'D'</span>
    <span class="token keyword">END</span> 新工资 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><h3 id="自定义函数"><a href="#自定义函数" class="header-anchor">#</a> 自定义函数</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建语法：
    <span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> 返回类型
    <span class="token keyword">BEGIN</span>
            函数体<span class="token punctuation">;</span>
    <span class="token keyword">END</span><span class="token punctuation">;</span>

调用语法：
     <span class="token keyword">SELECT</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span><span class="token punctuation">;</span>

查看函数语法：
    <span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> 函数名；
    
删除函数语法：
    <span class="token keyword">DROP</span> <span class="token keyword">FUNCTION</span> 函数名；

注意：
    <span class="token number">1</span>、参数列表包含两部分：参数名 参数类型
    <span class="token number">2</span>、函数体：肯定会有 <span class="token keyword">return</span> 语句，如果没有会报错。如果 <span class="token keyword">return</span> 语句没有放在函数体的最后也不报错，但不建议。
    <span class="token number">3</span>、函数体如果仅仅只有一句<span class="token keyword">SQL</span>，则可以省略<span class="token keyword">begin</span> <span class="token keyword">end</span>。
    <span class="token number">4</span>、使用 <span class="token keyword">delimiter</span> 语句设置结束标记

案例：
<span class="token comment">--  无参有返回</span>
        返回男生的个数
        <span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf1<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">INT</span>
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">DECLARE</span> c <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> c <span class="token keyword">FROM</span> boys<span class="token punctuation">;</span>
            <span class="token keyword">RETURN</span> c<span class="token punctuation">;</span>
        <span class="token keyword">END</span><span class="token punctuation">;</span>

        <span class="token keyword">SELECT</span> myf1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--  有参有返回</span>
  <span class="token number">1</span>、根据员工名，返回它的工资
        <span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf2<span class="token punctuation">(</span>empName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">DOUBLE</span>
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">SET</span> <span class="token variable">@sal</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">SELECT</span> salary <span class="token keyword">INTO</span> <span class="token variable">@sal</span> <span class="token keyword">FROM</span> employees
            <span class="token keyword">WHERE</span> last_name <span class="token operator">=</span> empName<span class="token punctuation">;</span>

            <span class="token keyword">RETURN</span> <span class="token variable">@sal</span><span class="token punctuation">;</span>
        <span class="token keyword">END</span><span class="token punctuation">;</span>

        <span class="token keyword">SELECT</span> myf2<span class="token punctuation">(</span><span class="token string">&quot;Kochhar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token number">2</span>、根据部门名，返回该部门的平均工资
        <span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf3<span class="token punctuation">(</span>depName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">DOUBLE</span>
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">DECLARE</span> sal <span class="token keyword">DOUBLE</span><span class="token punctuation">;</span>
            <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">INTO</span> sal <span class="token keyword">FROM</span> employees e
            <span class="token keyword">JOIN</span> departments d <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
            <span class="token keyword">WHERE</span> d<span class="token punctuation">.</span>department_name <span class="token operator">=</span> depName<span class="token punctuation">;</span>

            <span class="token keyword">RETURN</span> sal<span class="token punctuation">;</span>
        <span class="token keyword">END</span><span class="token punctuation">;</span>

        <span class="token keyword">SELECT</span> myf3<span class="token punctuation">(</span><span class="token string">&quot;IT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h3 id="dml语言-表操作"><a href="#dml语言-表操作" class="header-anchor">#</a> DML语言(表操作)</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>    DML操作主要有三种：
        插入：<span class="token keyword">insert</span>
        修改：<span class="token keyword">update</span>
        删除：<span class="token keyword">delete</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="插入操作"><a href="#插入操作" class="header-anchor">#</a> 插入操作</h4> <p><img src="en-resource://database/651:1" alt="0ad953ed338cb77196b10a8f020f8606.png"></p> <h5 id="插入方式一"><a href="#插入方式一" class="header-anchor">#</a> 插入方式一</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语 法：</span>
    <span class="token keyword">insert</span> <span class="token keyword">into</span> 表名（列名<span class="token number">1</span>，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>）<span class="token keyword">values</span>（值<span class="token number">1</span>，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>）<span class="token punctuation">;</span>

<span class="token comment">-- 注意点：</span>
    <span class="token comment">-- 1、插入的值的类型要与列的类型一致或兼容</span>
        <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>borndate<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>photo<span class="token punctuation">,</span>boyfriend_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token string">'李姐'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'1990-4-23'</span><span class="token punctuation">,</span><span class="token string">'18888888888'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">-- 2、不可以为 null 的列必须插入值。可以为 null 的列则可以选择不插入值</span>
        <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token string">'李姐'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'18888888888'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 3、列的顺序可以调换</span>
        <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>id<span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'李姐'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'18888888888'</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token comment">-- 4、列数和值的个数必须一致</span>
        <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token string">'李姐'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'18888888888'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token comment">-- 5、可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</span>
        <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token string">'李姐'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'1990-4-23'</span><span class="token punctuation">,</span><span class="token string">'18888888888'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="插入方式二"><a href="#插入方式二" class="header-anchor">#</a> 插入方式二</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语 法：</span>
    <span class="token keyword">Insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">set</span> 列名<span class="token operator">=</span>值，列名<span class="token operator">=</span>值，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">-- 示 例：</span>
    <span class="token keyword">Insert</span> <span class="token keyword">into</span> beauty <span class="token keyword">set</span> id<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'白兰'</span><span class="token punctuation">,</span>phone<span class="token operator">=</span><span class="token string">'999'</span>
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="两种插入方式的差别"><a href="#两种插入方式的差别" class="header-anchor">#</a> 两种插入方式的差别</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 两种插入方式的差别：</span>
    <span class="token comment">-- 1、方式一支持单次插入多行，方式二不支持</span>
        <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token string">'李1'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'18888888888'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token string">'李2'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'18888888888'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token string">'李3'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'18888888888'</span><span class="token punctuation">)</span>；
        
    <span class="token comment">-- 2、方式一支持子查询，方式二不支持</span>
         <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>phone<span class="token punctuation">)</span> <span class="token keyword">select</span> id<span class="token punctuation">,</span>boyname<span class="token punctuation">,</span><span class="token string">'123456'</span> <span class="token keyword">from</span> boys <span class="token keyword">where</span> id <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="修改操作"><a href="#修改操作" class="header-anchor">#</a> 修改操作</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 修改单表的记录</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">update</span> 表名
            <span class="token keyword">set</span> 列<span class="token operator">=</span>新值，列<span class="token operator">=</span>新值，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            <span class="token keyword">where</span> 筛选条件<span class="token punctuation">;</span>
        
        <span class="token comment">--案 例：</span>
            <span class="token comment">-- 修改 beauty 表中姓唐的女神的电话为 13899888899</span>
                <span class="token keyword">UPDATE</span> beauty <span class="token keyword">SET</span> phone <span class="token operator">=</span> <span class="token string">'13899888899'</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">LIKE</span> <span class="token string">'唐%'</span><span class="token punctuation">;</span>


<span class="token comment">-- 修改多表的记录</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token comment">-- sql 92 语法：</span>
                <span class="token keyword">update</span> 表<span class="token number">1</span> 别名，表<span class="token number">2</span> 别名
                <span class="token keyword">set</span> 列<span class="token operator">=</span>值，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                <span class="token keyword">where</span> 连接条件
                <span class="token operator">and</span> 筛选条件<span class="token punctuation">;</span>



            <span class="token comment">-- sql 99 语法：</span>
                <span class="token keyword">update</span> 表<span class="token number">1</span> 别名
                <span class="token keyword">inner</span> <span class="token operator">|</span> <span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token keyword">join</span> 表<span class="token number">2</span> 别名
                <span class="token keyword">on</span> 连接条件
                <span class="token keyword">set</span> 列<span class="token operator">=</span>值，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                <span class="token keyword">where</span> 筛选条件<span class="token punctuation">;</span>
                
        
        <span class="token comment">-- 案 例：(主要介绍 sql99 语法)</span>
            <span class="token comment">-- 修改张无忌的女朋友的手机号为114</span>
                <span class="token keyword">UPDATE</span> boys bo <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> beauty b <span class="token keyword">ON</span> bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id 
                <span class="token keyword">SET</span> b<span class="token punctuation">.</span>phone <span class="token operator">=</span> <span class="token string">'114'</span> <span class="token keyword">WHERE</span> bo<span class="token punctuation">.</span>boyName <span class="token operator">=</span> <span class="token string">'张无忌'</span><span class="token punctuation">;</span>
                
            <span class="token comment">-- 修改没有男朋友的女神的男朋友编号都为 2 号</span>
                <span class="token keyword">UPDATE</span> boys bo <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> beauty b <span class="token keyword">on</span> bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id
                <span class="token keyword">SET</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">WHERE</span> bo<span class="token punctuation">.</span>id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h4 id="删除操作"><a href="#删除操作" class="header-anchor">#</a> 删除操作</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 方式一：delete</span>
    <span class="token comment">-- 1、单表的删除</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 筛选条件
    
        <span class="token comment">-- 案 例：</span>
            <span class="token comment">-- 删除手机号以 9 结尾的女神信息</span>
                <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> beauty <span class="token keyword">WHERE</span> phone <span class="token operator">LIKE</span> <span class="token string">'%9'</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 2、多表的删除</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token comment">-- sql 92语法：</span>
                <span class="token keyword">delete</span> 别名
                <span class="token keyword">from</span> 表<span class="token number">1</span> 别名，表<span class="token number">2</span> 别名
                <span class="token keyword">where</span> 连接条件
                <span class="token operator">and</span> 筛选条件<span class="token punctuation">;</span>
            
            
            <span class="token comment">-- sql 99语法：</span>
                <span class="token keyword">delete</span> 表<span class="token number">1</span>的别名，表<span class="token number">2</span>的别名
                <span class="token keyword">from</span> 表<span class="token number">1</span> 别名
                <span class="token keyword">inner</span> <span class="token operator">|</span> <span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token keyword">join</span> 表<span class="token number">2</span> 别名 <span class="token keyword">on</span> 连接条件
                <span class="token keyword">where</span> 筛选条件<span class="token punctuation">;</span>
                
        <span class="token comment">-- 案 例：</span>
            <span class="token comment">-- 删除张无忌的女朋友的信息</span>
                <span class="token keyword">DELETE</span> b <span class="token keyword">FROM</span> beauty b <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> boys bo <span class="token keyword">on</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id <span class="token keyword">WHERE</span> bo<span class="token punctuation">.</span>boyName <span class="token operator">=</span> <span class="token string">'张无忌'</span><span class="token punctuation">;</span>
            
            <span class="token comment">-- 删除黄晓明的信息以及他女朋友的信息</span>
                <span class="token keyword">DELETE</span> b<span class="token punctuation">,</span>bo <span class="token keyword">FROM</span> beauty b <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> boys bo <span class="token keyword">ON</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id <span class="token keyword">WHERE</span> bo<span class="token punctuation">.</span>boyName<span class="token operator">=</span><span class="token string">'黄晓明'</span><span class="token punctuation">;</span>
        

<span class="token comment">-- 方式二：truncate</span>
    <span class="token comment">-- 语 法：</span>
        <span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
    
    <span class="token comment">-- 特 点：</span>
        <span class="token comment">-- truncate 不允许添加筛选条件。</span>
        <span class="token comment">-- truncate 一般用于清空表所有数据。（又名删表跑路）</span>
    
    
    <span class="token comment">-- 案 例：</span>
        <span class="token comment">-- 将boys 表信息清空</span>
            <span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> boys<span class="token punctuation">;</span>


<span class="token comment">-- 方式一 与 方式二的区别：</span>
    <span class="token comment">-- delete 可以加 where 条件，truncate 不能加</span>
    
    <span class="token comment">-- truncate 删除，效率高一丢丢</span>
    
    <span class="token comment">-- 假如要删除的表中有自增长列，如果用 delete 删除后，再插入数据，自增长列的值从断点开始，而 truncate 删除后，再插入数据，自增长列的值从 1 开始。</span>
    
    <span class="token comment">-- truncate 删除没有返回值，delete 删除有返回值。</span>
    
    <span class="token comment">-- truncate 删除不能回滚，delete 删除可以回滚.</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h3 id="ddl语言"><a href="#ddl语言" class="header-anchor">#</a> DDL语言</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    DDL 语言简单来说就是对库和表的管理
    
    一、库的管理
        创建： create
        修改： alter
        删除： drop
        展示： show
        选择： use
    二、表的管理
        创建： create
        修改： alter
        删除： drop
        展示： show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="数据库的管理-库的crud"><a href="#数据库的管理-库的crud" class="header-anchor">#</a> 数据库的管理（库的CRUD）</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 库的管理</span>
    <span class="token comment">--创建： create</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token punctuation">[</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">]</span> 库名<span class="token punctuation">;</span>
            
    <span class="token comment">-- 修改： alter</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">alter</span> <span class="token keyword">database</span> 库名 修改条件 <span class="token keyword">set</span> 修改后的值
            
    <span class="token comment">-- 删除： drop</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">drop</span> <span class="token punctuation">[</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> <span class="token punctuation">]</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 展示： show</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
            
    <span class="token comment">-- 选择： use</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">use</span> 库名<span class="token punctuation">;</span>
            
<span class="token comment">-- 示 例：</span>
    <span class="token comment">-- 查询有多少个库</span>
        <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 更改库的字符集(gbk)</span>
        <span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> 库名 <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> gbk<span class="token punctuation">;</span>

    <span class="token comment">-- 新建库</span>
        <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> 库名<span class="token punctuation">;</span>

    <span class="token comment">-- 删除库</span>
        <span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">]</span> 库名<span class="token punctuation">;</span>

    <span class="token comment">-- 选择库</span>
        <span class="token keyword">USE</span> 库名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h4 id="表的管理-表的crud"><a href="#表的管理-表的crud" class="header-anchor">#</a> 表的管理（表的CRUD）</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 表的管理</span>
    <span class="token comment">--创建： </span>
        <span class="token comment">-- 语 法：</span>
            <span class="token comment">-- 新增列：ADD</span>
                <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> 列名 类型<span class="token punctuation">;</span>
            
            <span class="token comment">-- 新增表：CREATE</span>
                <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span>  <span class="token keyword">EXISTS</span> <span class="token punctuation">]</span> 表名（列名<span class="token number">1</span> 类型，列名<span class="token number">2</span> 类型，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>）<span class="token punctuation">;</span>
            
            
    <span class="token comment">-- 修改： modify</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token comment">-- modify：用于修改列名</span>
                <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> 列名 类型<span class="token punctuation">;</span>
                
            <span class="token comment">-- change：用于修改列的类型</span>
                <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 CHANGE <span class="token keyword">COLUMN</span> 列名 类型<span class="token punctuation">;</span>
                
            
    <span class="token comment">-- 删除： drop</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token comment">-- 删除列：</span>
                <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> 列名<span class="token punctuation">;</span>
                
            <span class="token comment">-- 删除表：</span>
                <span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">]</span> 表名<span class="token punctuation">;</span>
                
    
    
    <span class="token comment">-- 查看所有表： show</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
            
            
    <span class="token comment">-- 查看表结构：DESC</span>
        <span class="token comment">-- 语 法：</span>
            <span class="token keyword">DESC</span> 表名<span class="token punctuation">;</span>
            
            
<span class="token comment">-- 示 例：</span>
    <span class="token comment">-- 查询所有表</span>
        <span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>

    <span class="token comment">-- 创建表 Book</span>
        <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> book{
            id <span class="token keyword">INT</span><span class="token punctuation">,</span>
            bName <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>
            price <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span>
            authorId <span class="token keyword">INT</span><span class="token punctuation">,</span>
            publishDate <span class="token keyword">DATETIME</span>
        }<span class="token punctuation">;</span>

    <span class="token comment">-- admin 表中新增一个列 ，列名 remark , 类型为 text；</span>
        <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> admin <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> remark <span class="token keyword">TEXT</span><span class="token punctuation">;</span>
        
    <span class="token comment">-- 修改 admin 表中 remark 列的类型为 VARCHAR</span>
        <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> admin <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> remark <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 修改 admin 表中 remark 列名为 nick_name;</span>
        <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> admin CHANGE <span class="token keyword">COLUMN</span> remark nick_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">-- 删除 nick_name 列；</span>
        <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> admin <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> nick_name<span class="token punctuation">;</span>

    <span class="token comment">-- 修改表名;</span>
        <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> admin <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> one_admin<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h5 id="表的复制-扩展了解"><a href="#表的复制-扩展了解" class="header-anchor">#</a> 表的复制（扩展了解）</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 由于表的复制只是一个扩展知识，所以直接上 示例</span>

<span class="token comment">-- 示 例：</span>
    <span class="token comment">-- 1、仅仅复制表的结构</span>
            <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy <span class="token operator">LIKE</span> admin<span class="token punctuation">;</span>
    
    <span class="token comment">-- 2、复制表的结构 + 数据</span>
            <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy2 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> admin<span class="token punctuation">;</span>
    
    <span class="token comment">-- 3、只复制部分数据</span>
            <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy3 <span class="token keyword">select</span> id<span class="token punctuation">,</span>username <span class="token keyword">from</span> admin <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            
    <span class="token comment">-- 4、仅仅复制部分字段，无数据（提示，传入永远不可能成立的条件）</span>
            <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy4 <span class="token keyword">select</span> id<span class="token punctuation">,</span>username <span class="token keyword">from</span> admin <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h3> <h4 id="数值型"><a href="#数值型" class="header-anchor">#</a> 数值型</h4> <h5 id="整型"><a href="#整型" class="header-anchor">#</a> 整型</h5> <div class="language-text line-numbers-mode"><pre class="language-text"><code>分类：（仅仅是范围的区别）
    Tinyint：1 个字节，范围 -128 ~ 127 / 0 ~ 255
    
    Smallint：2 个字节，范围 -32768 ~ 32767 / 0 ~ 65535
    
    Mediumint：3 个字节，范围 -8388608 ~ 8388607 / 0 ~ 1577215
    
    int：4 个字节，范围 -2147483648 ~ 2147483647 /  0 ~ 4294967295
    
    Bigint：8 个字节，范围 -9223372036854775808 ~ 9223372036854775807 / 0 ~ 18446744073709551615


特点：
    1、如果不设置是无符号还是有符合，默认是有符号（可接受复数值）。要设置成无符号，则在字段类型后面追加 unsigned 关键字。
    
    2、如果插入的数值超过了范围，那么就会报 out of range 异常，并且插入临界值（如tinyint，大于 255的值则会插入255，小于 0 的则会插入 0）
    PS：在新版本的 mysql ，如果超过了范围就不再会插入了。
    
    3、如果不设置长度，那么则会使用默认长度。
    PS：长度代表了显示的值的最大位数，如果不够会则会用 0 在左边填充，但是必须设置使用 zerofill 关键字。
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h5 id="浮点型"><a href="#浮点型" class="header-anchor">#</a> 浮点型</h5> <div class="language-text line-numbers-mode"><pre class="language-text"><code>分类：（这里的范围就不写了，反正很大）
    浮点型：
        float（M,D）：4 个字节

        double（M,D）：8 个字节
    
    定点型：
        DEC（M,D）：DECIMAL 的缩写。
        
        DECIMAL（M,D）：最大取值范围与 double 相同，给定 decimal 的有效取值范围由 M 和 D 决定。


特点：
    1、M 代表整数部位 + 小数部位的总体长度，D 代表小数部位的长度。如果超过范围，则插入临界值。（5.7之后会直接报错）
    
    2、M 和 D 都是可以省略的，如果 decimal，则 M 默认为10，D 默认为 0。如果是 float 和 double，则会根据插入的数值的精度来决定精度。
    
    3、定点型的精确度较高，在金融里算是标准类型，用于存储金额等数据。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="字符型"><a href="#字符型" class="header-anchor">#</a> 字符型</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>短文本：
    分 类：
        char(M) ：范围在 0 ~ 255 之间的整数
        varchar（M）：范围在 0 ~ 65535 之间的整数
    
    特 点：
        char ：固定长度，默认长度是1，比较耗费空间，但是效率高
        varchar ：可变长度的字符 ，默认长度是 255 ，节省空间，但是效率较低
    
    

长文本（富文本）：
    分类：
        text ： 
        blob（较大的二进制）：


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="日期型"><a href="#日期型" class="header-anchor">#</a> 日期型</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>分 类 ：
    date ：占用4个字节，范围 1000-01-01 ~ 9999-12-31。只保存日期
    datetime ：占用8个字节，范围 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59。保存日期 + 时间
    timestamp ：占用4个字节，范围 19700101080001 ~ 2038年的某个时刻。保存日期 + 时间
    time ：占用3个字节，范围 -838:59:59 ~ 838:59:59。只保存时间
    year ：占用 1 个字节，范围 1901 - 2155。只保存年


datetime 与 timestamp的区别 ：
    时间范围：timestamp的范围要比 datetime 范围小。
    实际时区：timestamp 和实际时区有关，更能反映实际的日期，而 datetime 则只能反映出插入时的当地时区。
    timestamp 的属性受 Mysql 版本和 SQLMode 的影响很大，而 datetime 不会。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h3> <h4 id="常见约束"><a href="#常见约束" class="header-anchor">#</a> 常见约束</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    含义：一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性
    
    六大约束：
        NOT NULL：非空，用于保证该字段的值不能为空
        
        DEFAULT：默认，用于保证该字段有默认值
        
        PRIMARY KEY：主键，用于保证该字段的值具有唯一性，并且非空（默认生成索引）
        
        UNIQUE：唯一，用于保证该字段的值具有唯一性，可以为空（默认生成索引）
        
        CHECK：检查约束【mysql5.8以后才支持】
        
        FOREIGN KEY：外键，用于限制两个表的关系，保证该字段的值必须来自于主表的关联列的值。
                            在从表添加外键约束，用于引用主表中某列的值。
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="主键约束、唯一约束和外键约束特点"><a href="#主键约束、唯一约束和外键约束特点" class="header-anchor">#</a> 主键约束、唯一约束和外键约束特点</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    主键和唯一的区别：
        相同点：
            都保证了唯一性。
        不同点：
            主键约束的字段不允许为空，唯一约束的字段允许为空；
            主键约束一个表里只允许存在一个，唯一约束可以存在多个。
            
    外键约束：
        1、要求在从表设置外键关系
        2、从表的外键列的类型和主表的关联列的类型要求一致或兼容，但两者的字段叫什么并不要求一致。
        3、主表的关联列必须是一个KEY（一般是主键或唯一）
        4、插入数据时，先插入主表，再插入从表
        5、删除数据时，先删除从表，在删除主表

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="列级约束"><a href="#列级约束" class="header-anchor">#</a> 列级约束</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法：</span>
    <span class="token comment">-- 直接在字段名和类型后面追加 约束类型即可。</span>
    
<span class="token comment">-- 只支持：默认，非空，主键，唯一</span>


<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo <span class="token punctuation">(</span>
        <span class="token comment">-- 主键约束</span>
        id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
        <span class="token comment">-- 非空约束</span>
        stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
        <span class="token comment">-- 检查约束（此处仅为展示，并不支持 检查约束）</span>
        gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span><span class="token punctuation">(</span>gender<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">or</span> gender <span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">--唯一约束</span>
        seat <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
        <span class="token comment">-- 默认约束</span>
        age <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">19</span><span class="token punctuation">,</span>
        <span class="token comment">-- 外键约束（此处仅为展示，并不支持 外键约束）</span>
        majorId <span class="token keyword">INT</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> major<span class="token punctuation">(</span>
				id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
				majorName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="表级约束"><a href="#表级约束" class="header-anchor">#</a> 表级约束</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法：</span>
    <span class="token comment">-- 在所有字段的最下面：【constraint 约束名】 约束类型（字段名）</span>

<span class="token comment">-- 写【 constraint 约束名】</span>
    <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo <span class="token punctuation">(</span>
            id <span class="token keyword">INT</span><span class="token punctuation">,</span>
            stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            seat <span class="token keyword">INT</span><span class="token punctuation">,</span>
            age <span class="token keyword">INT</span><span class="token punctuation">,</span>
            majorId <span class="token keyword">INT</span><span class="token punctuation">,</span>
            <span class="token comment">-- 主键约束</span>
            <span class="token keyword">CONSTRAINT</span> pk <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">-- 唯一约束</span>
            <span class="token keyword">CONSTRAINT</span> uq <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>seat<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">-- 检查约束（此处仅为展示，并不支持 检查约束）</span>
            <span class="token keyword">CONSTRAINT</span> ck <span class="token keyword">CHECK</span><span class="token punctuation">(</span>gender<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">or</span> gender <span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">-- 外键约束</span>
            <span class="token keyword">CONSTRAINT</span> fk_stuinfo_major <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>majorid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

<span class="token comment">-- 不写【 constraint 约束名】</span>
    <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo <span class="token punctuation">(</span>
            id <span class="token keyword">INT</span><span class="token punctuation">,</span>
            stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            seat <span class="token keyword">INT</span><span class="token punctuation">,</span>
            age <span class="token keyword">INT</span><span class="token punctuation">,</span>
            majorId <span class="token keyword">INT</span><span class="token punctuation">,</span>
            <span class="token comment">-- 主键约束</span>
            <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">-- 唯一约束</span>
            <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>seat<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">-- 检查约束（此处仅为展示，并不支持 检查约束）</span>
            <span class="token keyword">CHECK</span><span class="token punctuation">(</span>gender<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">or</span> gender <span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">-- 外键约束</span>
            <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>majorid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>


    <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> major<span class="token punctuation">(</span>
                    id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
                    majorName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h4 id="修改表时添加约束"><a href="#修改表时添加约束" class="header-anchor">#</a> 修改表时添加约束</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">if</span> <span class="token keyword">EXISTS</span> stuinfo<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	stuname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	seat <span class="token keyword">INT</span><span class="token punctuation">,</span>
	majorid <span class="token keyword">INT</span>
<span class="token punctuation">)</span>

<span class="token comment">/*
1、添加列级约束
    ALTER TABLE 表名 MODIFY COLUMN 字段名 字段类型 约束类型;

2、添加表级约束
    ALTER TABLE 表名 ADD 【constraint 约束名】约束类型（字段名） 【外键的引用】;
*/</span>

<span class="token comment">-- 1、添加非空约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> stuname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token comment">-- 2、添加默认约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> age <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">18</span><span class="token punctuation">;</span>

<span class="token comment">-- 3、添加主键</span>
<span class="token comment">-- 列级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>

<span class="token comment">-- 表级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 4、添加唯一</span>
<span class="token comment">-- 列级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> seat <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">;</span>

<span class="token comment">-- 表级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>seat<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 5、添加外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_stuinfo_major <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>majorid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h4 id="修改表时删除约束"><a href="#修改表时删除约束" class="header-anchor">#</a> 修改表时删除约束</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 1、删除非空约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> stuname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token comment">-- 2、删除默认约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> age <span class="token keyword">INT</span><span class="token punctuation">;</span>

<span class="token comment">-- 3、删除主键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>

<span class="token comment">-- 4、删除唯一</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> seat<span class="token punctuation">;</span>

<span class="token comment">-- 5、删除外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> majorid<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="列级约束与表级约束区别"><a href="#列级约束与表级约束区别" class="header-anchor">#</a> 列级约束与表级约束区别</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    列级约束与表级约束区别大致为三个点：位置、支持的约束类型、是否可以起约束名
        位置：
            列级约束：在列的后面
            表级约束：在所有列的下面
            
        支持的约束类型：
            列级约束：语法都支持，但外键没有效果
            表级约束：默认和非空都不支持，其他支持
            
        是否可以起约束名：
            列级约束：不可以
            表级约束：可以（主键没有效果）
            
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="外键的级联删除和级联置空-不建议使用"><a href="#外键的级联删除和级联置空-不建议使用" class="header-anchor">#</a> 外键的级联删除和级联置空（不建议使用）</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>添加外键的语句：
        ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id);

为何需要级联删除或是级联置空？
        我们知道，一旦添加了外键约束，那么我们是不能直接删除主表的数据，必须先删除从表数据，才能去删除主表数据。但是现在如果我们就想直接操作主表删除数据，那么就要使用级联删除或是级联置空。
    
添加级联删除：
        非常简单，只需要在添加外键的语句后面加上 ON DELETE CASCADE；
        ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id) ON DELETE CASCADE;

添加级联置空：
        在添加外键的语句后面加上 ON DELETE SET NULL；
        ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id) ON DELETE SET NULL;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="tcl-数据库事务"><a href="#tcl-数据库事务" class="header-anchor">#</a> TCL（数据库事务）</h3> <h4 id="事务介绍"><a href="#事务介绍" class="header-anchor">#</a> 事务介绍</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    事务：
        事务由单独单元的一个或多个SQL语句组成，在这个单元中，每个MySQL语句是相互依赖的。而整个单独单元作为一个不可分割的整体，如果单元中某条SQL语句一旦执行失败或产生错误，整个单元将会回滚。所有受到影响的数据将返回到事务开始以前的状态；如果单元中的所有SQL语句均执行成功，则事务被顺利执行。

    说人话：
        事务就是要做的多件事情，要不全部做成功，要不全部不做。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="事务的四个特性"><a href="#事务的四个特性" class="header-anchor">#</a> 事务的四个特性</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>事务的 ACID 属性：
    1、原子性
        原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。
    
    2、一致性
        事务必须使数据库从一个一致性状态变换到另外一个一致性状态。
    
    3、隔离性
        事务的隔离性是指一个事务的执行不能被其他食物干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能相互干扰。
    
    4、持久性
        持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="事务的创建"><a href="#事务的创建" class="header-anchor">#</a> 事务的创建</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>隐式事务：
    事务没有明显的开启和结束的标记（比如 insert 、update、delete 语句）

显式事务：
    事务具有明显的开启和结束的标记（必须先将自动提交功能禁用：set autocommit=0；）
    
事务的过程：
    1、开启事务
        set autocommit=0；
        start transaction；（可写可不写）
        
    2、编写SQL语句
        语句1；
        语句2；
        ...
    
    3、结束事务
        commit；提交事务
        rollback；回滚事务

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="事务造成的并发问题-脏读等"><a href="#事务造成的并发问题-脏读等" class="header-anchor">#</a> 事务造成的并发问题（脏读等）</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>为什么会出现并发问题？
    对于同时运行的多个事务，当这些事务访问数据库中相同的数据时，如果没有采取必要的隔离机制，就会导致各种并发问题。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="脏读"><a href="#脏读" class="header-anchor">#</a> 脏读</h5> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    脏读：
        脏读就是指 T1 正在访问数据，并且对数据进行了修改，而这种修改还没有提交到数据库中，这时，T2 也访问这个数据，然后使用了这个数据。这时 T1 因为某些原因回滚了这些数据，那么是不是意味着，T2 刚才使用的这些数据，是无效的。
        
    例：现在有 A、B、两个人，每个人账户上都有 1000 块钱。
        现在 A 正准备往 B 的账户上转账 500 ，但是这个数据还没有提交，这时 B 去查账户发现自己的余额变成了 1500 ，B 很开心，于是去高级酒店大吃一顿。但是 A 正打算提交数据的时候，银行ATM 机出现故障，钱没转成功，B 吃完大餐结账的时候一刷卡，人直接傻了，账户只有一千块。于是 B 开始了在酒店洗碗还钱的生活...

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="不可重复读"><a href="#不可重复读" class="header-anchor">#</a> 不可重复读</h5> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    不可重复读：
        是指在一个事务内，多次读同一数据。在这个事务还没有结束时，另外一个事务也访问该同一数据。那么，在第一个事务中的两次读数据之间，由于第二个事务的修改，那么第一个事务两次读到的的数据可能是不一样的。这样就发生了在一个事务内两次读到的数据是不一样的，因此称为是不可重复读。
        
    例：现在 A 的账户上有 1000 块钱。
        A 看中了一辆太空飞船，准备去银行提款，路上打开手机看了一眼自己的余额是 1000，虽然有点肉痛，但是他还是毅然决然的要买这辆太空飞船。来到 ATM 机，掏出钱包，拿出银行卡放入、输入密码，一套动作行云流水，一气呵成，正当他准备输入金额提款，突然发现自己的余额变成了 500 。他人傻了，这时手机短信提示音响起，他拿起一看，原来今天是还花呗的日子，自己设定了自动换钱，所以时间一到，直接就自动扣款了。A 心想看来今天飞船是买不了了，还是回家吃泡面吧。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="幻读"><a href="#幻读" class="header-anchor">#</a> 幻读</h5> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    幻读：
        是指当事务不是独立执行时发生的一种现象，例如第一个事务对一个表中的数据进行了修改，这种修改涉及到表中的全部数据行。同时，第二个事务也修改这个表中的数据，这种修改是向表中插入一行新数据。那么，以后就会发生操作第一个事务的用户发现表中还有没有修改的数据行，就好象发生了幻觉一样。
    
    例：
        程序员某一天去消费，花了2千元，然后他的妻子去查看他今天的消费记录（全表扫描FTS，妻子事务开启），看到确实是花了2千元，就在这个时候，程序员花了1万买了一部电脑，即新增INSERT了一条消费记录，并提交。当妻子打印程序员的消费记录清单时（妻子事务提交），发现花了1.2万元，似乎出现了幻觉，这就是幻读。
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="幻读与不可重复读的区别"><a href="#幻读与不可重复读的区别" class="header-anchor">#</a> 幻读与不可重复读的区别</h5> <div class="language-text line-numbers-mode"><pre class="language-text"><code>幻读与不可重复读的概念很相像，但是也是有本质上的区别的。
    
不可重复的的重点是对同一数据的修改：
        同样的条件，读取过的数据，再次读取出来就发现值不一样了。

幻读的重点在于新增或者删除：
        同样的条件，第 1 次和第 2 次读出来的记录数不一样。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="事务的隔离级别"><a href="#事务的隔离级别" class="header-anchor">#</a> 事务的隔离级别</h4> <h5 id="查询及设置隔离级别"><a href="#查询及设置隔离级别" class="header-anchor">#</a> 查询及设置隔离级别</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 每启动一个 mysql 程序，就会获得一个单独的数据库连接，</span>
<span class="token comment">-- 每个数据库连接都有一个全局变量 @@tx_isolation，表示当前的事务隔离级别。</span>

<span class="token comment">-- 查看当前的隔离级别：</span>
    <span class="token keyword">SELECT</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>
    <span class="token comment">-- MySQL8.0：</span>
        <span class="token keyword">SELECT</span> @<span class="token variable">@transaction_isolation</span><span class="token punctuation">;</span>



<span class="token comment">-- 设置当前 mysql 连接的隔离级别：</span>
    <span class="token keyword">set</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation</span> <span class="token keyword">level</span> <span class="token keyword">read</span> <span class="token keyword">committed</span><span class="token punctuation">;</span>
    
<span class="token comment">-- 设置数据库系统的全局的隔离级别：</span>
    <span class="token keyword">set</span> <span class="token keyword">global</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation</span> <span class="token keyword">level</span> <span class="token keyword">read</span> <span class="token keyword">committed</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h5 id="数据库事务的隔离性"><a href="#数据库事务的隔离性" class="header-anchor">#</a> 数据库事务的隔离性</h5> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    数据库事务的隔离性：
            数据库系统必须具有隔离并发允许各个事务的能力，使它们不会相互影响，避免各种并发问题。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="隔离级别"><a href="#隔离级别" class="header-anchor">#</a> 隔离级别</h5> <div class="language-text line-numbers-mode"><pre class="language-text"><code>    隔离级别：
        一个事务与其他事务隔离的程度称为隔离级别
        数据库规定了多种事务隔离级别，不同隔离级别对应不同的干扰程度，隔离级别越高，数据一致性就越好，但并发性也会相对变弱。
        
    MySQL 的四种隔离级别：
        读未提交（Read uncommitted）：
            最低级别的隔离。
            允许一个事务读取到其他事务并未提交的变更。
            脏读、不可重复读和幻读的问题都会出现。
            
        读取已提交（Read committed，Oracle、PostgreSQL、SQL Server默认模式）：
            只允许一个事务读取到其他事务已经提交的变更。
            可以避免脏读，但是不可重复读和幻读依旧存在。
            
        可重复读（Repeatable read，MySQL默认模式）：
            确保事务可以多次从一个字段中读取相同的值。
            在这个事务的持续期间，禁止其他事务对这个字段进行更新。
            可以避免脏读和不可重复读的发生，但是无法防止幻读。

        串行化(Serializable，SQLite默认模式）：
            最高级别的隔离。
            在该级别下，所有事务都是串行化执行，简单来说可以理解原子性，事务A不操作完，事务B就无法操作。
            完全消除脏读、不可重复读和幻读的发生，但是非常的损耗数据库性能，以及效率低下。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="回滚点"><a href="#回滚点" class="header-anchor">#</a> 回滚点</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 在一个事务中，有可能我们只想回滚一部分操作，这个时候就可以设置回滚点</span>

<span class="token comment">-- 回滚点 savepoint 的使用</span>
    <span class="token keyword">set</span> autocommit<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
    <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> account <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">;</span>
    <span class="token keyword">SAVEPOINT</span> a<span class="token punctuation">;</span> <span class="token comment"># 设置保存点</span>
    <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> account <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">28</span><span class="token punctuation">;</span>
    <span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> a<span class="token punctuation">;</span> <span class="token comment"># 回滚到保存点</span>
    <span class="token comment">-- 最终结果：id为 25 的被删除，而 28 的数据则被回滚。</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="delete-和-truncate-在事务使用时的区别"><a href="#delete-和-truncate-在事务使用时的区别" class="header-anchor">#</a> delete 和 truncate 在事务使用时的区别</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token comment">-- 总结：delete 可以回滚，truncate 不能回滚</span>

<span class="token comment">-- 演示 delete：</span>
    <span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
    <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> account<span class="token punctuation">;</span>
    <span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>

<span class="token comment">-- 演示 truncate</span>
    <span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
    <span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> account<span class="token punctuation">;</span>
    <span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>什么是视图：
        MySQL 从5.0.1版本开始提供视图功能。一种虚拟存在的表，同真实表一样，视图也由列和行构成，但视图并不实际存在于数据库中。行和列的数据来自于定义视图的查询中所使用的表，并且还是在使用视图时动态生成的。

    简单来说就是：视图是一种虚拟存在的表，是一个逻辑表，本身并不包含数据。作为一个select语句保存在数据字典中的。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="创建视图"><a href="#创建视图" class="header-anchor">#</a> 创建视图</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token comment">-- 语法</span>
    <span class="token keyword">create</span> <span class="token keyword">view</span> 视图名 <span class="token keyword">as</span> 查询语句；

<span class="token comment">-- 案例</span>
    <span class="token comment">-- 查询邮箱中包含 a 字符的员工名、部门名和工种信息</span>
        <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> myv1
        <span class="token keyword">AS</span>
        <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_name<span class="token punctuation">,</span>job_title <span class="token keyword">FROM</span> employees e 
        <span class="token keyword">JOIN</span> departments d <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
        <span class="token keyword">JOIN</span> jobs j <span class="token keyword">ON</span> j<span class="token punctuation">.</span>job_id <span class="token operator">=</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>

    <span class="token comment">-- 创建视图查看每个部门的平均工资</span>
        <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> myv2
        <span class="token keyword">AS</span>
        <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> ag<span class="token punctuation">,</span>department_id
        <span class="token keyword">FROM</span> employees
        <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">;</span>

    <span class="token comment">-- 查看平均工资最低的部门信息</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myv2 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ag <span class="token keyword">LIMIT</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">-- 查询平均工资最低的部门名和工资</span>
        <span class="token keyword">SELECT</span> d<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> departments d <span class="token keyword">WHERE</span> 
        d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span> department_id <span class="token keyword">FROM</span> myv2 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ag <span class="token keyword">LIMIT</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="修改视图"><a href="#修改视图" class="header-anchor">#</a> 修改视图</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 修改视图有两种方式：</span>
    <span class="token comment">-- 方式一：</span>
        <span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">view</span> 视图名
        <span class="token keyword">as</span>
        查询语句<span class="token punctuation">;</span>
    <span class="token comment">-- 例：</span>
        <span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> myv3
        <span class="token keyword">AS</span>
        <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>job_id
        <span class="token keyword">FROM</span> employees
        <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> job_id<span class="token punctuation">;</span>
    
    <span class="token comment">-- 方式二：</span>
        <span class="token keyword">alter</span> <span class="token keyword">view</span> 视图名
        <span class="token keyword">as</span>
        查询语句<span class="token punctuation">;</span>
    <span class="token comment">-- 例：</span>
        <span class="token keyword">ALTER</span> <span class="token keyword">VIEW</span> myv3 
        <span class="token keyword">AS</span>
        <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="删除视图和查看视图"><a href="#删除视图和查看视图" class="header-anchor">#</a> 删除视图和查看视图</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 删除视图</span>
    <span class="token comment">-- 语法：</span>
        <span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> 视图名<span class="token punctuation">;</span>
    <span class="token comment">-- 例：</span>
        <span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> myv1；

<span class="token comment">-- 查看视图</span>
    <span class="token comment">-- 语法：</span>
        <span class="token keyword">DESC</span> 视图名<span class="token punctuation">;</span>
    <span class="token comment">-- 例：</span>
        <span class="token keyword">DESC</span> myv1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="视图和表的对比"><a href="#视图和表的对比" class="header-anchor">#</a> 视图和表的对比</h4> <table><thead><tr><th></th> <th>创建语法的关键字</th> <th>是否实际占用物理空间</th> <th>使用</th></tr></thead> <tbody><tr><td>视图</td> <td>create view</td> <td>只是保存了sql逻辑</td> <td>增删改查，一般不能增删改</td></tr> <tr><td>表</td> <td>create table</td> <td>保存了数据</td> <td>增删改查</td></tr></tbody></table> <h3 id="变量"><a href="#变量" class="header-anchor">#</a> 变量</h3> <h4 id="系统变量"><a href="#系统变量" class="header-anchor">#</a> 系统变量</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>系统变量分为两类：
        全局变量
        会话变量
        
说明：
    系统变量由系统提供，不是用户定义，当服务器启动时就会创建并赋予默认值来供我们使用。根据作用域的不同来区分。

作用域：
    全局变量：顾名思义就是全局有效
    会话变量：仅仅针对于当前会话（连接）有效

语法：
    1、查看所有的系统变量
        全局变量：SHOW GLOBAL VARIABLES;
        会话变量：SHOW SESSION VARIABLES;
        
    2、查看满足条件的部分系统变量
        全局变量：SHOW GLOBAL VARIABLES LIKE '% {查找条件} %'
        会话变量：SHOW SESSION VARIABLES LIKE '% {查找条件} %'
        
    3、查看指定的某个系统变量的值
        全局变量：SELECT GLOBAL 系统变量名；
        会话变量：SELECT SESSION 系统变量名；
        
    4、为某个系统变量赋值
        方式一：
            全局变量：SET GOLBAL 系统变量名 = 值；
            会话变量：SET SESSION 系统变量名 = 值；
            
        方式二：
            全局变量：SET @@GOLBAL 系统变量名 = 值；
            会话变量：SET @@SESSION 系统变量名 = 值；

注意：如果是全局级别，则加 GOLBAL ，如果是会话级别，则需要加上 SESSION，如果不写，则默认 SESSION;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="自定义变量"><a href="#自定义变量" class="header-anchor">#</a> 自定义变量</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>自定义变量分为两类：
        用户变量
        局部变量

作用域：
    用户变量：针对于当前会话（连接）有效，和会话变量的作用域一样
    局部变量：局部变量比较特殊，仅仅在定义它的 begin end 块中有效

说明：
    变量是用户自定义的

语法：
    1、声明并初始化
        用户变量:
            SET @用户变量名=值；或
            SET @用户变量名:=值；或
            SELECT @用户变量名:=值；

        局部变量：
            DECLARE 变量名 类型；
            DECLARE 变量名 类型 DEFAULT 值；


     2、赋值（更新变量的值）
        用户变量：
            方式一：与声明的语法相同
                SET @用户变量名=值；或
                SET @用户变量名:=值；或
                SELECT @用户变量名:=值；
            
            方式二：使用 SELECT INTO
                SELECT 字段 INTO 变量名 FROM 表；
        
        局部变量：
            SET 局部变量名=值；或
            SET 局部变量名:=值；或
            SELECT @局部变量名:=值；
            
            方式二：使用 SELECT INTO
                SELECT 字段 INTO 局部变量名 FROM 表；
        
    3、查看变量的值
        用户变量：
            SELECT @用户变量名；
        
        局部变量名：
            SELECT 局部变量名；

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="存储过程-了解"><a href="#存储过程-了解" class="header-anchor">#</a> 存储过程（了解）</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>存储过程是什么？
    存储过程可以说是一个记录集吧，它是由一些SQL语句组成的代码块，这些SQL语句代码像一个方法一样实现一些功能（对单表或多表的增删改查），然后再给这个代码块取一个名字，在用到这个功能的时候调用他就行了。

存储过程的好处：
    1. 由于数据库执行动作时，是先编译后执行的。然而存储过程是一个编译过的代码块，所以执行效率要比SQL语句高。
    2. 一个存储过程在程序在网络中交互时可以替代大堆的SQL语句，所以也能降低网络的通信量，提高通信速率。
    3. 通过存储过程能够使没有权限的用户在控制之下间接地存取数据库，从而确保数据的安全。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="存储过程的参数列表"><a href="#存储过程的参数列表" class="header-anchor">#</a> 存储过程的参数列表</h4> <div class="language-SQL line-numbers-mode"><pre class="language-sql"><code>注意：
    <span class="token number">1</span>、参数列表包含三部分：
        参数模式    参数名    参数类型
        举例：
        <span class="token operator">IN</span> stuname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>

        参数模式：
            <span class="token operator">IN</span>：该参数可以作为输入，也就是该参数需要调用方法入值。
            <span class="token keyword">OUT</span>：该参数可以作为输出，也就是该参数可以作为返回值。
            <span class="token keyword">INOUT</span>：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值。

    <span class="token number">2</span>、如果存储过程体仅仅只有一句话，<span class="token keyword">BEGIN</span> <span class="token keyword">END</span> 可以省略。
    <span class="token number">3</span>、存储过程体中的每条<span class="token keyword">SQL</span>语句的结尾要求必须加分号。
    <span class="token number">4</span>、如果要自定义结束符，则使用 <span class="token keyword">DELIMITER</span> 重新设置。
        语法：
            <span class="token keyword">DELIMITER</span> 结束标记
        举例：
            <span class="token keyword">DELIMITER</span> $
    <span class="token number">5</span>、存储过程一旦创建成功里面的<span class="token keyword">SQL</span>语句就不能修改，所以如果要修改，那就只能删除后重新创建。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="存储过程的创建"><a href="#存储过程的创建" class="header-anchor">#</a> 存储过程的创建</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建语法：
    <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> 存储过程名 <span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span>
    <span class="token keyword">BEGIN</span>
            存储过程体（一组合法的<span class="token keyword">SQL</span>语句）
    <span class="token keyword">END</span> 结束标记

调用语法：
    <span class="token keyword">CALL</span> 存储过程名（实参列表）；
    
举例：
    <span class="token number">1</span>、创建一个空参列表的存储过程并调用
        <span class="token keyword">DELIMITER</span> $
        <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp1<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> boys<span class="token punctuation">(</span>boyName<span class="token punctuation">,</span>userCP<span class="token punctuation">)</span>
            <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'老王'</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'李姐'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">END</span> $
        <span class="token keyword">CALL</span> myp1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建带 in 模式参数的存储过程</span>
    <span class="token number">2</span>、创建存储过程实现，根据女神名，查询对应的男神信息
        <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp2 <span class="token punctuation">(</span><span class="token operator">IN</span> beautyName <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> 
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">SELECT</span> bo<span class="token punctuation">.</span><span class="token operator">*</span>
            <span class="token keyword">FROM</span> boys bo
            <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> beauty b <span class="token keyword">ON</span> bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id
            <span class="token keyword">WHERE</span> b<span class="token punctuation">.</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> beautyName<span class="token punctuation">;</span>
        <span class="token keyword">END</span><span class="token punctuation">;</span>

        <span class="token comment">#调用</span>
        <span class="token keyword">CALL</span> myp2<span class="token punctuation">(</span><span class="token string">'赵敏'</span><span class="token punctuation">)</span>
        
    <span class="token number">3</span>、
        <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp3 <span class="token punctuation">(</span><span class="token operator">IN</span> id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">IN</span> boyname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">DECLARE</span> result <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">#声明并初始化</span>

            <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> result <span class="token comment">#赋值</span>
            <span class="token keyword">FROM</span> boys
            <span class="token keyword">WHERE</span> boys<span class="token punctuation">.</span>id <span class="token operator">=</span> id
            <span class="token operator">AND</span> boys<span class="token punctuation">.</span>boyName <span class="token operator">=</span> boyname<span class="token punctuation">;</span>

            <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span>result <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'成功'</span><span class="token punctuation">,</span><span class="token string">'失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">#使用</span>
        <span class="token keyword">END</span><span class="token punctuation">;</span>

        <span class="token keyword">CALL</span> myp3<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">'李姐'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token comment">-- 创建带 out 模式的存储过程</span>
    <span class="token number">1</span>、根据女神名，返回对应的男神名
        <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp4<span class="token punctuation">(</span><span class="token operator">IN</span> beautyName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">OUT</span> boyName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">SELECT</span> bo<span class="token punctuation">.</span>boyName <span class="token keyword">INTO</span> boyname
            <span class="token keyword">FROM</span> boys bo
            <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> beauty b <span class="token keyword">ON</span> bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id
            <span class="token keyword">WHERE</span> b<span class="token punctuation">.</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> beautyName<span class="token punctuation">;</span>
        <span class="token keyword">END</span><span class="token punctuation">;</span>

        <span class="token keyword">CALL</span> myp4<span class="token punctuation">(</span><span class="token string">'小昭'</span><span class="token punctuation">,</span><span class="token variable">@bName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">SELECT</span> <span class="token variable">@bName</span><span class="token punctuation">;</span>

    <span class="token number">2</span>、根据女神名，返回对应的男神名和男神魅力值
        <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp5<span class="token punctuation">(</span><span class="token operator">IN</span> beautyName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">OUT</span> boyName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">OUT</span> userCP <span class="token keyword">INT</span><span class="token punctuation">)</span>
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">SELECT</span> bo<span class="token punctuation">.</span>boyName <span class="token punctuation">,</span>bo<span class="token punctuation">.</span>userCP <span class="token keyword">INTO</span> boyName<span class="token punctuation">,</span>userCP
            <span class="token keyword">FROM</span> boys bo
            <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> beauty b <span class="token keyword">ON</span> bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id
            <span class="token keyword">WHERE</span> b<span class="token punctuation">.</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> beautyName<span class="token punctuation">;</span>
        <span class="token keyword">END</span><span class="token punctuation">;</span>
        
        <span class="token keyword">CALL</span> myp5<span class="token punctuation">(</span><span class="token string">'小昭'</span><span class="token punctuation">,</span><span class="token variable">@bName</span><span class="token punctuation">,</span><span class="token variable">@usercp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">SELECT</span> <span class="token variable">@bName</span><span class="token punctuation">,</span><span class="token variable">@usercp</span><span class="token punctuation">;</span>
        
<span class="token comment">-- 创建带 inout 模式参数的存储过程</span>
    <span class="token number">1</span>、传入 a 和 b 两个值，最终 a 和 b 都翻倍并返回
        <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp6 <span class="token punctuation">(</span><span class="token keyword">INOUT</span> a <span class="token keyword">INT</span><span class="token punctuation">,</span><span class="token keyword">INOUT</span> b <span class="token keyword">INT</span><span class="token punctuation">)</span>
        <span class="token keyword">BEGIN</span>
            <span class="token keyword">SET</span> a<span class="token operator">=</span>a<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">SET</span> b<span class="token operator">=</span>b<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">END</span><span class="token punctuation">;</span>
        <span class="token comment">-- 创建两个赋值的变量用于传入</span>
        <span class="token keyword">SET</span> <span class="token variable">@n</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">SET</span> <span class="token variable">@m</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">CALL</span> myp6<span class="token punctuation">(</span><span class="token variable">@n</span><span class="token punctuation">,</span><span class="token variable">@m</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">SELECT</span> <span class="token variable">@n</span><span class="token punctuation">,</span><span class="token variable">@m</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><h4 id="存储过程的删除"><a href="#存储过程的删除" class="header-anchor">#</a> 存储过程的删除</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>语法：
    <span class="token keyword">drop</span> <span class="token keyword">procedure</span> 存储过程名

例如：
    <span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> myp1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

注意：删除只能一个一个的删，不能批量删除！
        错误示范 ：
            <span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> myp1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> myp2<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="查看存储过程的结构"><a href="#查看存储过程的结构" class="header-anchor">#</a> 查看存储过程的结构</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>语法：
    <span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> 存储过程名<span class="token punctuation">;</span>

例如：
    <span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp2<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="流程控制结构"><a href="#流程控制结构" class="header-anchor">#</a> 流程控制结构</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>流程控制结构分为以下几种
        顺序结构：程序从上往下依次执行
        分支结构：程序从两条或多条路径中选择一条去执行
        循环结构：程序在满足一定条件的基础上，重复执行一段代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="分支结构"><a href="#分支结构" class="header-anchor">#</a> 分支结构</h4> <h5 id="case-结构"><a href="#case-结构" class="header-anchor">#</a> CASE 结构</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>情况<span class="token number">1</span>：类似于 java 中的 switch 语句，一般用于实现等值判断
语法：
        <span class="token keyword">CASE</span> 变量 <span class="token operator">|</span> 表达式 <span class="token operator">|</span> 字段
        <span class="token keyword">WHEN</span> 要判断的值 <span class="token keyword">THEN</span> 返回的值<span class="token number">1</span>或语句<span class="token number">1</span>
        <span class="token keyword">WHEN</span> 要判断的值 <span class="token keyword">THEN</span> 返回的值<span class="token number">2</span>或语句<span class="token number">2</span>；
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">ELSE</span> 要返回的值n或语句n
        <span class="token keyword">END</span> <span class="token keyword">CASE</span>；

情况<span class="token number">2</span>：类似于 java 中的多重 <span class="token keyword">IF</span> 语句，一般用于实现区间判断
语法：
    <span class="token keyword">CASE</span> 变量 <span class="token operator">|</span> 表达式 <span class="token operator">|</span> 字段
    <span class="token keyword">WHEN</span> 要判断的条件<span class="token number">1</span> <span class="token keyword">THEN</span> 返回的值<span class="token number">1</span>或语句<span class="token number">1</span>；
    <span class="token keyword">WHEN</span> 要判断的条件<span class="token number">2</span> <span class="token keyword">THEN</span> 返回的值<span class="token number">2</span>或语句<span class="token number">2</span>；
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">ELSE</span> 要返回的值n或语句n；
    <span class="token keyword">END</span> <span class="token keyword">CASE</span>；

特点：
  <span class="token number">1</span>、可以作为表达式，嵌套在其他语句中使用，可以放在任何地方，<span class="token keyword">BEGIN</span> <span class="token keyword">END</span> 中或 <span class="token keyword">BEGIN</span> <span class="token keyword">END</span> 的外面
  <span class="token number">2</span>、可以作为独立的语句去使用，只能放在 <span class="token keyword">BEGIN</span> <span class="token keyword">END</span> 中。
  <span class="token number">3</span>、如果 <span class="token keyword">WHEN</span> 中的值满足或条件成立，则执行对应的 <span class="token keyword">THEN</span> 后面的语句，并且结束 <span class="token keyword">CASE</span>。
        如果都不满足，则执行 <span class="token keyword">ELSE</span> 中的语句或值。
  <span class="token number">4</span>、<span class="token keyword">ELSE</span> 可以省略，如果 <span class="token keyword">ELSE</span> 省略了，并且所有 <span class="token keyword">WHEN</span> 条件都不满足，则返回 <span class="token boolean">NULL</span>
      
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h5 id="if-结构"><a href="#if-结构" class="header-anchor">#</a> IF 结构</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>    注意！是 <span class="token keyword">IF</span> 结构，不是 <span class="token keyword">IF</span> 函数
    
功能：
    实现多重分支
    
语法：
    <span class="token keyword">if</span> 条件<span class="token number">1</span> <span class="token keyword">then</span> 语句<span class="token number">1</span>；
    <span class="token keyword">elseif</span> 条件<span class="token number">2</span> <span class="token keyword">then</span> 语句<span class="token number">2</span>；
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    【<span class="token keyword">else</span> 语句n；】
    <span class="token keyword">end</span> <span class="token keyword">if</span>；
应用在 <span class="token keyword">begin</span> <span class="token keyword">end</span> 中

案例：
    根据传入的数据，来显示等级，比如传入的成绩：<span class="token number">90</span><span class="token operator">-</span><span class="token number">100</span>，返回A，<span class="token number">80</span><span class="token operator">-</span><span class="token number">90</span>，返回B，<span class="token number">60</span><span class="token operator">-</span><span class="token number">80</span>，返回C，否则，返回D。
    <span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> test_if<span class="token punctuation">(</span>score <span class="token keyword">INT</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">CHAR</span>
    <span class="token keyword">BEGIN</span>
        <span class="token keyword">IF</span> score<span class="token operator">&gt;=</span><span class="token number">90</span> <span class="token operator">AND</span> score<span class="token operator">&lt;=</span><span class="token number">100</span> <span class="token keyword">THEN</span> <span class="token keyword">RETURN</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
        <span class="token keyword">ELSEIF</span> score<span class="token operator">&gt;=</span><span class="token number">80</span> <span class="token keyword">THEN</span> <span class="token keyword">RETURN</span> <span class="token string">'B'</span><span class="token punctuation">;</span>
        <span class="token keyword">ELSEIF</span> score<span class="token operator">&gt;=</span><span class="token number">60</span> <span class="token keyword">THEN</span> <span class="token keyword">RETURN</span> <span class="token string">'C'</span><span class="token punctuation">;</span>
        <span class="token keyword">ELSE</span> <span class="token keyword">RETURN</span> <span class="token string">'D'</span><span class="token punctuation">;</span>
        <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>
    <span class="token keyword">END</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="循环结构"><a href="#循环结构" class="header-anchor">#</a> 循环结构</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>分类：
    while、loop、repeat
    
循环控制：
    iterate 类似于 continue，结束本次循环进入下一次
    leave 类似于 break，结束。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="while-结构"><a href="#while-结构" class="header-anchor">#</a> while 结构</h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#语法：</span>
    【标签:】while 循环条件 <span class="token keyword">do</span>
            循环体；
     end while【标签】<span class="token punctuation">;</span>

<span class="token comment">#案例：</span>
  <span class="token comment"># 批量插入，根据次数插入到 boy 表中，如果次数&gt;20则停止;</span>
        DROP PROCEDURE test_while1<span class="token punctuation">;</span>
        CREATE PROCEDURE test_while1<span class="token punctuation">(</span>IN insertCount INT<span class="token punctuation">)</span>
        BEGIN
                DECLARE i INT DEFAULT <span class="token number">1</span><span class="token punctuation">;</span>
                a:WHILE i<span class="token operator">&lt;</span><span class="token operator">=</span>insertCount DO
                        IF i<span class="token operator">&gt;</span><span class="token operator">=</span><span class="token number">20</span> THEN LEAVE a<span class="token punctuation">;</span>
                        END IF<span class="token punctuation">;</span>
                        INSERT INTO boy<span class="token punctuation">(</span>username,age<span class="token punctuation">)</span> VALUES<span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span><span class="token string">'xiaohua'</span>,i<span class="token punctuation">)</span>,<span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        SET <span class="token assign-left variable">i</span><span class="token operator">=</span>i+1<span class="token punctuation">;</span>
                END WHILE a<span class="token punctuation">;</span>
        END<span class="token punctuation">;</span>

  <span class="token comment"># 批量插入，根据次数插入到 boy 表中，只插入偶数次</span>
        DROP PROCEDURE test_while1<span class="token punctuation">;</span>
        CREATE PROCEDURE test_while1<span class="token punctuation">(</span>IN insertCount INT<span class="token punctuation">)</span>
        BEGIN
                DECLARE i INT DEFAULT <span class="token number">1</span> <span class="token punctuation">;</span>
                a:WHILE i<span class="token operator">&lt;</span><span class="token operator">=</span>insertCount DO
                        IF MOD<span class="token punctuation">(</span>i,2<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span> THEN iterate a<span class="token punctuation">;</span>
                        INSERT INTO boy<span class="token punctuation">(</span>username,age<span class="token punctuation">)</span> VALUES<span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span><span class="token string">'xiaohua'</span>,i<span class="token punctuation">)</span>,<span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        END IF<span class="token punctuation">;</span>
                        SET <span class="token assign-left variable">i</span><span class="token operator">=</span>i+1<span class="token punctuation">;</span>
                END WHILE a<span class="token punctuation">;</span>
        END<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h5 id="loop-结构"><a href="#loop-结构" class="header-anchor">#</a> loop 结构</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>语法：
    【标签:】<span class="token keyword">loop</span>
            循环体；
     <span class="token keyword">end</span> <span class="token keyword">loop</span>【标签】<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="repeat-结构"><a href="#repeat-结构" class="header-anchor">#</a> repeat 结构</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>语法：
    【标签:】<span class="token keyword">repeat</span>
            循环体；
     until 结束循环的条件
     <span class="token keyword">end</span> <span class="token keyword">repeat</span>【标签】<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="循环结构特点总结"><a href="#循环结构特点总结" class="header-anchor">#</a> 循环结构特点总结</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>特点：
    while：先判断后执行
    loop：没有条件的死循环
    repeat：先执行后判断
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/SaulJWu/SaulJWu.github.io/edit/master/docs/60.更多/01.面试题/50.MySQL 基础.md" target="_blank" rel="noopener noreferrer">帮我改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/11/13, 02:18:16</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/71ed63/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">多线程与高并发</div></a> <a href="/pages/241fd3/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">MySql底层</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/71ed63/" class="prev">多线程与高并发</a></span> <span class="next"><a href="/pages/241fd3/">MySql底层</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/e1cdbd/"><div>zabbix学习笔记二</div></a> <span>02-28</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/dc853a/"><div>zabbix学习笔记一</div></a> <span>02-10</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/12488f/"><div>Linux访问不了github</div></a> <span>12-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:Saul.J.Wu@outlook.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/SaulJWu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2022
    <span>Saul.J.Wu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.5deb200c.js" defer></script><script src="/assets/js/2.325951e6.js" defer></script><script src="/assets/js/220.9b77e578.js" defer></script>
  </body>
</html>