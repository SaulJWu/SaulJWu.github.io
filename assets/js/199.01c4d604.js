(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{689:function(s,t,a){"use strict";a.r(t);var e=a(15),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"detected-cgroupfs-as-the-docker-cgroup-driver-the-recommended-driver-is-systemd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#detected-cgroupfs-as-the-docker-cgroup-driver-the-recommended-driver-is-systemd"}},[s._v("#")]),s._v(' detected "cgroupfs" as the Docker cgroup driver. The recommended driver is "systemd".')]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("preflight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Running pre-flight checks\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARNING IsDockerSystemdCheck"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": detected "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cgroupfs"')]),s._v(" as the Docker cgroup driver. The recommended driver is "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"systemd"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" Please follow the guide at https://kubernetes.io/docs/setup/cri/\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARNING SystemVerification"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": this Docker version is not on the list of validated versions: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.10")]),s._v(".7. Latest validated version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.03")]),s._v("\nerror execution phase preflight: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("preflight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Some fatal errors occurred:\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR FileAvailable--etc-kubernetes-kubelet.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": /etc/kubernetes/kubelet.conf already exists\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR FileAvailable--etc-kubernetes-pki-ca.crt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": /etc/kubernetes/pki/ca.crt already exists\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("preflight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" If you know what you are doing, you can "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" a check non-fatal with "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("--ignore-preflight-errors"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"解决方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v("EOF"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/docker/daemon.json \n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"exec-opts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"native.cgroupdriver=systemd"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nEOF\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"重启docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重启docker"}},[s._v("#")]),s._v(" 重启docker")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl restart docker\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"重新加入集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重新加入集群"}},[s._v("#")]),s._v(" 重新加入集群")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v(" kubeadm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".2.6:6443 --token rxn33c.3z6vnm9c9bijkx1j "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n     --discovery-token-ca-cert-hash sha256:7ecf04dffe200a96149907498f0fd1833d92e3f416e3874ca2871ec5d4f2d376 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"etc-kubernetes-kubelet-conf-already-exists"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-kubernetes-kubelet-conf-already-exists"}},[s._v("#")]),s._v(" /etc/kubernetes/kubelet.conf already exists")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("preflight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Running pre-flight checks\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARNING SystemVerification"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": this Docker version is not on the list of validated versions: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.10")]),s._v(".7. Latest validated version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.03")]),s._v("\nerror execution phase preflight: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("preflight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Some fatal errors occurred:\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR FileAvailable--etc-kubernetes-kubelet.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": /etc/kubernetes/kubelet.conf already exists\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR FileAvailable--etc-kubernetes-pki-ca.crt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": /etc/kubernetes/pki/ca.crt already exists\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("preflight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" If you know what you are doing, you can "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" a check non-fatal with "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("--ignore-preflight-errors"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\nTo see the stack trace of this error execute with --v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" or higher\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"解决方法-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方法-2"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-node01 k8s_images"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubeadm reset")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("reset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" WARNING: Changes made to this "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubeadm init'")]),s._v(" or "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubeadm join'")]),s._v(" will be reverted.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("reset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Are you sure you want to proceed? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"重新加入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重新加入"}},[s._v("#")]),s._v(" 重新加入")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubeadm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".2.6:6443 --token rxn33c.3z6vnm9c9bijkx1j "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --discovery-token-ca-cert-hash sha256:7ecf04dffe200a96149907498f0fd1833d92e3f416e3874ca2871ec5d4f2d376 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"加入完查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加入完查看"}},[s._v("#")]),s._v(" 加入完查看")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl get nodes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);