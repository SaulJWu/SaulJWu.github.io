(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{713:function(s,a,t){"use strict";t.r(a);var n=t(15),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"安装vim和ifconig"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装vim和ifconig"}},[s._v("#")]),s._v(" 安装vim和ifconig")]),s._v(" "),t("h4",{attrs:{id:"ifconfig"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ifconfig"}},[s._v("#")]),s._v(" ifconfig")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum search ifconig\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"vim"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vim"}},[s._v("#")]),s._v(" vim")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、先执行： "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" 查看是否有显示下列三行代码（版本号等可能不同，不用在意）\nvim-enhanced-7.4.~~~\nvim-minimal-7.4.~~~\nvim-common-7.4.~~~\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、如果全都没有，则执行： yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" vim*\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、如果只是缺了其中的某条，就下载哪条： yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" vim-xxxx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[s._v("#")]),s._v(" gitlab")]),s._v(" "),t("ol",[t("li",[s._v("安装相关依赖")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" policycoreutils-python openssh-server openssh-clients postfix\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("启动ssh服务&设置为开机自启")])]),s._v(" "),t("blockquote",[t("p",[s._v("systemctl enable sshd && sudo systemctl start sshd")])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("设置postfix开机自启，并且postfix支持gitlab发信功能")])]),s._v(" "),t("blockquote",[t("p",[s._v("systemctl enable postfix && systemctl start postfix")])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("开放ssh以及http服务，然后重新加载防火墙列表")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("firewall-cmd --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssh --permanent\nfirewall-cmd --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http --permanent\nfirewall-cmd --reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("安装gitlab")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、下载 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.8")]),s._v(".2版本安装包\n\thttps://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/\n\t\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、cd /opt/\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、mkdir gitlab\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、cd gitlab/\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、将安装包上传\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("、执行命令\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh gitlab-ce-10.8.2-ce.0.el7.x86_64.rpm\t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ol",{attrs:{start:"6"}},[t("li",[s._v("修改gitlab配置")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、输入 \n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/gitlab/gitlab.rb\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、修改gitlab 访问地址和端口\n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". 找到 external_url ，将引号里的地址改成 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://本机IP地址:82'")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". 找到 nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'listen_port'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("，将值改为82（让gitlab默认监听82端口）\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ol",{attrs:{start:"7"}},[t("li",[s._v("重载配置及启动gitlab")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、 执行命令\ngitlab-ctl reconfigure\ngitlab-ctl restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("遇到报错：")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Running handlers:\nThere was an error running gitlab-ctl reconfigure:\n\nexecute[/opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8] (postgresql::enable line 80) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'\n---- Begin output of /opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8 ----\nSTDOUT: The files belonging to this database system will be owned by user \"gitlab-psql\".\nThis user must also own the server process.\nSTDERR: initdb: invalid locale settings; check LANG and LC_* environment variables\n---- End output of /opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8 ----\nRan /opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8 returned 1\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("解决：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("这是由于系统编码问题造成的，解决方法如下：\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LC_ALL")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("en_US.UTF-8 \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("en_US.UTF-8 \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANGUAGE")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("en_US.UTF-8\n执行完上面三个命令之后，最后还需要执行下面这个命令\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bashrc\n\n最后再执行 gitlab-ctl reconfigure ，过程可能会需要几分钟，耐心等待出现 \ngitlab Reconfigured"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#即代表执行成功！")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#紧接着再执行")]),s._v("\ngitlab-ctl restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("ol",{attrs:{start:"8"}},[t("li",[s._v("把端口添加到防火墙")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、输入命令\nfirewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("82")]),s._v("/tcp --permanent\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、重启防火墙\nfirewall-cmd --reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"9"}},[t("li",[s._v("如果Gitlab的IP地址已经更换，那么同时也需要更换项目中的IP地址")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、执行指令 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/opt/gitlab/gitlab-rails/etc\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、执行指令 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" gitlab.yml\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、将里面原来的IP地址改成现在的IP地址即可（SSH连接的地址也要记得同时更改）\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、重启服务 gitlab-ctl restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"更改网络配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更改网络配置"}},[s._v("#")]),s._v(" 更改网络配置")]),s._v(" "),t("ol",[t("li",[s._v("先备份原来设置")])]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('DEVICE="eth0"\nBOOTPROTO="dhcp"\nONBOOT="yes"\nTYPE="Ethernet"\nPERSISTENT_DHCLIENT="yes"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[s._v("#")]),s._v(" jenkins")]),s._v(" "),t("h4",{attrs:{id:"_1、安装-jdk-环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装-jdk-环境"}},[s._v("#")]),s._v(" 1、安装 JDK 环境")]),s._v(" "),t("h4",{attrs:{id:"_2、获取-jenkins-安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、获取-jenkins-安装包"}},[s._v("#")]),s._v(" 2、获取 jenkins 安装包")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/jenkins\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、 上传安装包\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、 执行命令安装 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh jenkins-xxxx（安装包全名）\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h4",{attrs:{id:"_3、修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、修改配置"}},[s._v("#")]),s._v(" 3、修改配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/sysconfig/jenkins\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、 修改内容：\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JENKINS_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8888"')]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"_4、启动jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、启动jenkins"}},[s._v("#")]),s._v(" 4、启动jenkins")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl start jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("报错")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Job "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" jenkins.service failed because the control process exited with error code. See "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"systemctl status jenkins.service"')]),s._v(" and "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"journalctl -xe"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" details.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("处理方式：")]),s._v(" "),t("blockquote",[t("p",[s._v("执行指令  systemctl status jenkins.service")])]),s._v(" "),t("p",[s._v("显示：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("jenkins.service - LSB: Jenkins Automation Server\n   Loaded: loaded "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/etc/rc.d/init.d/jenkins"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" bad"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" vendor preset: disabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   Active: failed "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Result: exit-code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since Wed "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-16 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 UTC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 6min ago\n     Docs: man:systemd-sysv-generator"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Starting LSB: Jenkins Automation Server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain runuser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("581")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": pam_unix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("runuser:session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": session opened "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user root by "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("uid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain jenkins"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("571")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Starting Jenkins bash: /usr/bin/java: No such "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain runuser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("581")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": pam_unix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("runuser:session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": session closed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user root\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": jenkins.service: control process exited, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("code")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("exited "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain jenkins"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("571")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("FAILED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Failed to start LSB: Jenkins Automation Server.\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Unit jenkins.service entered failed state.\nJun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":24:07 localhost.localdomain systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": jenkins.service failed.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("原因：jenkins 找不到 java 的路径")]),s._v(" "),t("p",[s._v("解决：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/init.d/jenkins\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、 找到 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("candidates")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v('"\n'),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、 在引号中填入自己的java路径，如：/usr/local/java/自己的jdk包名/bin/java\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、 执行 systemctl daemon-reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"安装jenkins插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装jenkins插件"}},[s._v("#")]),s._v(" 安装jenkins插件")]),s._v(" "),t("h5",{attrs:{id:"_1、更改插件下载地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、更改插件下载地址"}},[s._v("#")]),s._v(" 1、更改插件下载地址")]),s._v(" "),t("blockquote",[t("p",[s._v("jenkins->Manage jenkins->Manage Plugins，点击Advanced")]),s._v(" "),t("p",[s._v("https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json")]),s._v(" "),t("p",[s._v("sumbit后，直接在浏览器输入：jenkins地址/restart，重启 jenkins")])]),s._v(" "),t("p",[s._v("然后进入linux里，cd /var/lib/jenkins/updates")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/http:\\/\\/updates.jenkins-\n\nci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g'")]),s._v(" default.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i\n\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g'")]),s._v(" default.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h5",{attrs:{id:"_2、下载插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、下载插件"}},[s._v("#")]),s._v(" 2、下载插件")]),s._v(" "),t("blockquote",[t("p",[s._v("Jenkins->Manage Jenkins->Manage Plugins，点击Available")])]),s._v(" "),t("h4",{attrs:{id:"用户权限管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用户权限管理"}},[s._v("#")]),s._v(" 用户权限管理")]),s._v(" "),t("h5",{attrs:{id:"_1、安装role-based-authorization-strategy-插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装role-based-authorization-strategy-插件"}},[s._v("#")]),s._v(" 1、安装Role-based Authorization Strategy 插件")]),s._v(" "),t("h5",{attrs:{id:"_2、更改授权策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、更改授权策略"}},[s._v("#")]),s._v(" 2、更改授权策略")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("jenkins->Manage jenkins->Conigure Global Security")])]),s._v(" "),t("li",[t("p",[s._v("授权策略选择 Role-Based Strategy")])]),s._v(" "),t("li",[t("p",[s._v("点击保存")])])]),s._v(" "),t("h5",{attrs:{id:"_3、创建角色及分配权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、创建角色及分配权限"}},[s._v("#")]),s._v(" 3、创建角色及分配权限")]),s._v(" "),t("ol",[t("li",[s._v("jenkins->Manage jenkins->Manage and Assign Roles")]),s._v(" "),t("li",[s._v("点击 Manage Roles")])]),s._v(" "),t("h4",{attrs:{id:"凭证管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#凭证管理"}},[s._v("#")]),s._v(" 凭证管理")]),s._v(" "),t("h5",{attrs:{id:"_1、安装credentials-binding插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装credentials-binding插件"}},[s._v("#")]),s._v(" 1、安装Credentials Binding插件")]),s._v(" "),t("h5",{attrs:{id:"_2、"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、"}},[s._v("#")]),s._v(" 2、")]),s._v(" "),t("h4",{attrs:{id:"安装git插件和工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装git插件和工具"}},[s._v("#")]),s._v(" 安装Git插件和工具")]),s._v(" "),t("p",[s._v("为了让Jenkins支持从Gitlab拉取源码，需要安装Git插件以及CenOS7上安装Git工具")]),s._v(" "),t("h5",{attrs:{id:"jenkins插件直接搜索-git既是"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins插件直接搜索-git既是"}},[s._v("#")]),s._v(" jenkins插件直接搜索 Git既是")]),s._v(" "),t("h5",{attrs:{id:"centos7上安装git工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7上安装git工具"}},[s._v("#")]),s._v(" CentOS7上安装Git工具：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装之前最好搜索一下都有哪些版本的Git")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" --version "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看是否安装成功")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"宝塔"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#宝塔"}},[s._v("#")]),s._v(" 宝塔")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("==================================================================\nCongratulations! Installed successfully!\n==================================================================\n外网面板地址: http://218.20.7.51:8888/d3837c4f\n内网面板地址: http://192.168.3.12:8888/d3837c4f\nusername: g3myapx3\npassword: 86628f7c\nIf you cannot access the panel,\nrelease the following panel port [8888] in the security group\n若无法访问面板，请检查防火墙/安全组是否有放行面板[8888]端口\n==================================================================\nTime consumed: 2 Minute!\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"linux防火墙限制ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux防火墙限制ip"}},[s._v("#")]),s._v(" Linux防火墙限制IP")]),s._v(" "),t("h4",{attrs:{id:"iptables防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iptables防火墙"}},[s._v("#")]),s._v(" iptables防火墙")]),s._v(" "),t("h5",{attrs:{id:"先查看iptables防火墙是否有限制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先查看iptables防火墙是否有限制"}},[s._v("#")]),s._v(" 先查看iptables防火墙是否有限制")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("执行指令 ：firewall-cmd --get-active-zones 查看有哪些域是使用的\n\n假设是public域生效，则执行指令 firewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --list-all\n\n如果多个域生效，则执行指令 firewall-cmd --list-all\n\nPS：可以留意一下 ssh服务有没有开放，如果没有得话就需要开放ssh\nfirewall-cmd --permanent --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h5",{attrs:{id:"rich-rules配置ip白名单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rich-rules配置ip白名单"}},[s._v("#")]),s._v(" rich rules配置IP白名单")]),s._v(" "),t("h6",{attrs:{id:"基本选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本选项"}},[s._v("#")]),s._v(" 基本选项")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("accpet允许，reject禁止\n--add-rich-rule:新增\n--remove-rich-rule:删除\n--query-rich-rule:查询\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h6",{attrs:{id:"设置ip和端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置ip和端口"}},[s._v("#")]),s._v(" 设置IP和端口：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".新增\n\t永久允许某个ip访问某个端口： \n\tfirewall-cmd --permanent --add-rich-rule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule family="')]),s._v("ipv4"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" source address="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.111"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" port protocol="')]),s._v("tcp"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" port="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" accept"')]),s._v("\n\t永久允许某个网段访问某些端口\n\tfirewall-cmd --permanent --add-rich-rule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule family="')]),s._v("ipv4"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" source address="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0/24"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" port protocol="')]),s._v("tcp"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" port="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("-9999"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" accept"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".删除\n\t永久删除某个ip访问某个端口： \n\tfirewall-cmd --permanent --remove-rich-rule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule family="')]),s._v("ipv4"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" source address="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.111"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" port protocol="')]),s._v("tcp"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" port="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" accept"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".查询\n\t查询某个ip访问某个端口： 如果加 --permanent 只显示是否永久有效，返回 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("no\n\tfirewall-cmd --query-rich-rule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule family="')]),s._v("ipv4"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" source address="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.111"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" port protocol="')]),s._v("tcp"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" port="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" accept"')]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h6",{attrs:{id:"设置ip和服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置ip和服务"}},[s._v("#")]),s._v(" 设置IP和服务：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".新增\n\t永久允许某个ip段访问某个服务： \n\tfirewall-cmd --permanent --add-rich-rule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule family="')]),s._v("ipv4"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" source address="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0/24"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" service name="')]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" accept"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".删除\n\t永久删除某个ip段访问某个服务： \n\tfirewall-cmd --permanent --remove-rich-rule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule family="')]),s._v("ipv4"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" source address="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0/24"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" service name="')]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" accept"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".查询\n\t查询某个ip段对某个服务的访问状态： 如果加 --permanent 只显示是否永久有效，返回 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("no\n\tfirewall-cmd --query-rich-rule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule family="')]),s._v("ipv4"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" source address="')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0/24"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" service name="')]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" accept"')]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"tcpd服务器防火墙配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcpd服务器防火墙配置"}},[s._v("#")]),s._v(" tcpd服务器防火墙配置")]),s._v(" "),t("h5",{attrs:{id:"hosts-allow文件-负责控制可以访问本机的ip地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hosts-allow文件-负责控制可以访问本机的ip地址"}},[s._v("#")]),s._v(" hosts.allow文件，负责控制可以访问本机的IP地址")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("进入 etc目录先查看是否存在 hosts.allow 文件，有再进行vim操作\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" hosts.allow\n然后添加需要的设置\nsshd:192.168.1.0:allow "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新增一个IP白名单，可以通过ssh方式连接")]),s._v("\nsshd:192.168.1.*:allow "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新增一个IP段白名单，可以通过ssh方式连接")]),s._v("\n然后ESC，输入 :wq 保存退出，即可生效\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h5",{attrs:{id:"hosts-deny文件-负责控制禁止访问本机的ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hosts-deny文件-负责控制禁止访问本机的ip"}},[s._v("#")]),s._v(" hosts.deny文件，负责控制禁止访问本机的IP")])])}),[],!1,null,null,null);a.default=e.exports}}]);