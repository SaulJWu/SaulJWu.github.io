(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{655:function(e,t,v){"use strict";v.r(t);var _=v(15),a=Object(_.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("p",[e._v("今天我们访问网站，使用App时，都是基于Web这种Browser/Server模式，简称BS架构，它的特点是，客户端只需要浏览器，应用程序的逻辑和数据都存储在服务器端。浏览器只需要请求服务器，获取Web页面，并把Web页面展示给用户即可。")]),e._v(" "),v("p",[e._v("Web页面具有极强的交互性。由于Web页面是用HTML编写的，而HTML具备超强的表现力，并且，服务器端升级后，客户端无需任何部署就可以使用到新的版本，因此，BS架构升级非常容易。")]),e._v(" "),v("h2",{attrs:{id:"http协议"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http协议"}},[e._v("#")]),e._v(" HTTP协议")]),e._v(" "),v("p",[e._v("在Web应用中，浏览器请求一个URL，服务器就把生成的HTML网页发送给浏览器，而浏览器和服务器之间的传输协议是HTTP，所以：")]),e._v(" "),v("ul",[v("li",[e._v("HTML是一种用来定义网页的文本，会HTML，就可以编写网页；")]),e._v(" "),v("li",[e._v("HTTP是在网络上传输HTML的协议，用于浏览器和服务器的通信。")])]),e._v(" "),v("p",[e._v("HTTP协议是一个基于TCP协议之上的请求-响应协议，它非常简单，我们先使用Chrome浏览器查看新浪首页，然后选择View - Developer - Inspect Elements就可以看到HTML：")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://raw.githubusercontent.com/SaulJWu/images/main/20210210193322.jpeg",alt:"html"}})]),e._v(" "),v("p",[e._v("切换到Network，重新加载页面，可以看到浏览器发出的每一个请求和响应：")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://raw.githubusercontent.com/SaulJWu/images/main/20210210193343.jpeg",alt:"http"}})]),e._v(" "),v("p",[v("strong",[e._v("使用Chrome浏览器可以方便地调试Web应用程序。")])]),e._v(" "),v("h2",{attrs:{id:"请求页面的流程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求页面的流程"}},[e._v("#")]),e._v(" 请求页面的流程")]),e._v(" "),v("p",[e._v("对于Browser来说，请求页面的流程如下：")]),e._v(" "),v("ol",[v("li",[e._v("与服务器建立TCP连接；")]),e._v(" "),v("li",[e._v("发送HTTP请求；")]),e._v(" "),v("li",[e._v("收取HTTP响应，然后把网页在浏览器中显示出来。")])]),e._v(" "),v("h3",{attrs:{id:"请求"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[e._v("#")]),e._v(" 请求")]),e._v(" "),v("p",[e._v("浏览器发送的HTTP请求如下：")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("GET / HTTP/1.1\nHost: www.sina.com.cn\nUser-Agent: Mozilla/5.0 xxx\nAccept: */*\nAccept-Language: zh-CN,zh;q=0.9,en-US;q=0.8\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br")])]),v("p",[e._v("其中，第一行表示使用"),v("code",[e._v("GET")]),e._v("请求获取路径为"),v("code",[e._v("/")]),e._v("的资源，并使用"),v("code",[e._v("HTTP/1.1")]),e._v("协议，从第二行开始，每行都是以"),v("code",[e._v("Header: Value")]),e._v("形式表示的HTTP头，比较常用的HTTP Header包括：")]),e._v(" "),v("ul",[v("li",[e._v("Host: 表示请求的主机名，因为一个服务器上可能运行着多个网站，因此，Host表示浏览器正在请求的域名；")]),e._v(" "),v("li",[e._v("User-Agent: 标识客户端本身，例如Chrome浏览器的标识类似"),v("code",[e._v("Mozilla/5.0 ... Chrome/79")]),e._v("，IE浏览器的标识类似"),v("code",[e._v("Mozilla/5.0 (Windows NT ...) like Gecko")]),e._v("；")]),e._v(" "),v("li",[e._v("Accept：表示浏览器能接收的资源类型，如"),v("code",[e._v("text/*")]),e._v("，"),v("code",[e._v("image/*")]),e._v("或者"),v("code",[e._v("*/*")]),e._v("表示所有；")]),e._v(" "),v("li",[e._v("Accept-Language：表示浏览器偏好的语言，服务器可以据此返回不同语言的网页；")]),e._v(" "),v("li",[e._v("Accept-Encoding：表示浏览器可以支持的压缩类型，例如"),v("code",[e._v("gzip, deflate, br")]),e._v("。")])]),e._v(" "),v("h3",{attrs:{id:"响应"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#响应"}},[e._v("#")]),e._v(" 响应")]),e._v(" "),v("p",[e._v("服务器的响应如下：")]),e._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("HTTP/1.1 200 OK\nContent-Type: text/html\nContent-Length: 21932\nContent-Encoding: gzip\nCache-Control: max-age=300\n\n<html>...网页数据...\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br"),v("span",{staticClass:"line-number"},[e._v("6")]),v("br"),v("span",{staticClass:"line-number"},[e._v("7")]),v("br")])]),v("p",[e._v("服务器响应的第一行总是版本号+空格+数字+空格+文本，数字表示响应代码，其中"),v("code",[e._v("2xx")]),e._v("表示成功，"),v("code",[e._v("3xx")]),e._v("表示重定向，"),v("code",[e._v("4xx")]),e._v("表示客户端引发的错误，"),v("code",[e._v("5xx")]),e._v("表示服务器端引发的错误。数字是给程序识别，文本则是给开发者调试使用的。常见的响应代码有：")]),e._v(" "),v("ul",[v("li",[e._v("200 OK：表示成功；")]),e._v(" "),v("li",[e._v("301 Moved Permanently：表示该URL已经永久重定向；")]),e._v(" "),v("li",[e._v("302 Found：表示该URL需要临时重定向；")]),e._v(" "),v("li",[e._v("304 Not Modified：表示该资源没有修改，客户端可以使用本地缓存的版本；")]),e._v(" "),v("li",[e._v("400 Bad Request：表示客户端发送了一个错误的请求，例如参数无效；")]),e._v(" "),v("li",[e._v("401 Unauthorized：表示客户端因为身份未验证而不允许访问该URL；")]),e._v(" "),v("li",[e._v("403 Forbidden：表示服务器因为权限问题拒绝了客户端的请求；")]),e._v(" "),v("li",[e._v("404 Not Found：表示客户端请求了一个不存在的资源；")]),e._v(" "),v("li",[e._v("500 Internal Server Error：表示服务器处理时内部出错，例如因为无法连接数据库；")]),e._v(" "),v("li",[e._v("503 Service Unavailable：表示服务器此刻暂时无法处理请求。")])]),e._v(" "),v("p",[e._v("从第二行开始，服务器每一行均返回一个HTTP头。服务器经常返回的HTTP Header包括：")]),e._v(" "),v("ul",[v("li",[e._v("Content-Type：表示该响应内容的类型，例如"),v("code",[e._v("text/html")]),e._v("，"),v("code",[e._v("image/jpeg")]),e._v("；")]),e._v(" "),v("li",[e._v("Content-Length：表示该响应内容的长度（字节数）；")]),e._v(" "),v("li",[e._v("Content-Encoding：表示该响应压缩算法，例如"),v("code",[e._v("gzip")]),e._v("；")]),e._v(" "),v("li",[e._v("Cache-Control：指示客户端应如何缓存，例如"),v("code",[e._v("max-age=300")]),e._v("表示可以最多缓存300秒。")])]),e._v(" "),v("p",[e._v("HTTP请求和响应都由HTTP Header和HTTP Body构成，其中HTTP Header每行都以"),v("code",[e._v("\\r\\n")]),e._v("结束。如果遇到两个连续的"),v("code",[e._v("\\r\\n")]),e._v("，那么后面就是HTTP Body。浏览器读取HTTP Body，并根据Header信息中指示的"),v("code",[e._v("Content-Type")]),e._v("、"),v("code",[e._v("Content-Encoding")]),e._v("等解压后显示网页、图像或其他内容。")]),e._v(" "),v("p",[e._v("通常浏览器获取的第一个资源是HTML网页，在网页中，如果嵌入了JavaScript、CSS、图片、视频等其他资源，浏览器会根据资源的URL再次向服务器请求对应的资源。")]),e._v(" "),v("p",[e._v("关于HTTP协议的详细内容，请参考"),v("a",{attrs:{href:"https://www.amazon.cn/dp/B00M2DKYRC/",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP权威指南"),v("OutboundLink")],1),e._v("一书，或者"),v("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mozilla开发者网站"),v("OutboundLink")],1),e._v("。")]),e._v(" "),v("p",[e._v("我们在前面介绍的"),v("a",{attrs:{href:"https://www.liaoxuefeng.com/wiki/1252599548343744/1319099982413858",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP编程"),v("OutboundLink")],1),e._v("是以客户端的身份去请求服务器资源。现在，我们需要以服务器的身份响应客户端请求，编写服务器程序来处理客户端请求通常就称之为Web开发。")]),e._v(" "),v("h2",{attrs:{id:"编写http-server"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#编写http-server"}},[e._v("#")]),e._v(" 编写HTTP Server")])])}),[],!1,null,null,null);t.default=a.exports}}]);