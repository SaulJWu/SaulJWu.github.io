---
title: kubesphere å®šåˆ¶åŒ–å®‰è£…åŠå»ºç«‹å¤šç§Ÿæˆ·ç³»ç»Ÿ
date: 2021-08-09 10:56:51
permalink: /pages/012177/
categories:
  - åˆ†å¸ƒå¼
  - K8S
tags:
  - 
---
## 1ã€å®šåˆ¶åŒ–å®‰è£…

KubeSphere åœ¨ 2.1 ç‰ˆæœ¬çš„ Installer å¯¹å„åŠŸèƒ½ç»„ä»¶è¿›è¡Œäº† è§£è€¦ï¼Œå¿«é€Ÿå®‰è£…å°†é»˜è®¤ä»…å¼€å¯æœ€å°åŒ–å®‰è£…ï¼ˆMinimal Installationï¼‰ï¼Œæ”¯æŒåœ¨å®‰è£…å‰æˆ–å®‰è£…å [è‡ªå®šä¹‰å¯æ’æ‹”çš„åŠŸèƒ½ç»„ä»¶çš„å®‰è£…](https://v2-1.docs.kubesphere.io/docs/zh-CN/installation/intro/#è‡ªå®šä¹‰å®‰è£…å¯æ’æ‹”çš„åŠŸèƒ½ç»„ä»¶)ï¼Œä½¿æœ€å°åŒ–å®‰è£… æ›´å¿«é€Ÿè½»é‡ä¸”èµ„æºå ç”¨æ›´å°‘ï¼Œä¹Ÿæ–¹ä¾¿ä¸åŒç”¨æˆ· æŒ‰éœ€é€‰æ‹©å®‰è£…ä¸åŒçš„åŠŸèƒ½ç»„ä»¶ã€‚



KubeSphere æœ‰ä»¥ä¸‹å…­ä¸ªå¯æ’æ‹”åŠŸèƒ½ç»„ä»¶ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œé€‰æ‹©å¼€å¯å®‰è£… KubeSphere çš„åŠŸèƒ½ç»„ä»¶ã€‚æˆ‘ä»¬éå¸¸å»ºè®®æ‚¨å¼€å¯è¿™äº›åŠŸèƒ½ç»„ä»¶æ¥ä½“éªŒ KubeSphere å®Œæ•´çš„åŠŸèƒ½ä»¥åŠç«¯åˆ°ç«¯çš„è§£å†³æ–¹æ¡ˆã€‚

- [KubeSphere åº”ç”¨å•†åº—](https://v2-1.docs.kubesphere.io/docs/zh-CN/installation/install-openpitrix)
- [KubeSphere DevOps ç³»ç»Ÿ](https://v2-1.docs.kubesphere.io/docs/zh-CN/installation/install-devops)
- [KubeSphere æ—¥å¿—ç³»ç»Ÿ](https://v2-1.docs.kubesphere.io/docs/zh-CN/installation/install-logging)
- [KubeSphere Service Meshï¼ˆåŸºäº Istioï¼‰](https://v2-1.docs.kubesphere.io/docs/zh-CN/installation/install-servicemesh)
- [KubeSphere å‘Šè­¦é€šçŸ¥ç³»ç»Ÿ](https://v2-1.docs.kubesphere.io/docs/zh-CN/installation/pluggable-components/install-alert-notification)
- [Metrics-serverï¼ˆHPAï¼‰](https://v2-1.docs.kubesphere.io/docs/zh-CN/installation/pluggable-components/instal-metrics-server)



### **è‡ªå®šä¹‰å®‰è£…å¯æ’æ‹”çš„åŠŸèƒ½ç»„ä»¶**

Installer æ”¯æŒåœ¨ KubeSphere å®‰è£…å‰å’Œå®‰è£…åå•ç‹¬å®‰è£…å¯é€‰çš„åŠŸèƒ½ç»„ä»¶ï¼Œæ‚¨å¯ä»¥æ ¹æ® ä¸šåŠ¡éœ€æ±‚å’Œæœºå™¨é…ç½®ï¼Œé€‰æ‹©å®‰è£…æ‰€éœ€çš„åŠŸèƒ½ç»„ä»¶ï¼Œä½“éªŒ KubeSphere å®Œæ•´çš„ç«¯åˆ°ç«¯çš„å®¹å™¨äº§å“è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸” æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯å¼€æºå…è´¹çš„ã€‚



### å¼€å¯å®‰è£… DevOps ç³»ç»Ÿ

é€šè¿‡ä¿®æ”¹ ks-installer çš„ configmap å¯ä»¥é€‰è£…ç»„ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆkubectl å‘½ä»¤éœ€è¦ä»¥ root ç”¨æˆ·æ‰§è¡Œï¼‰ã€‚

```php
$ kubectl edit cm -n kubesphere-system ks-installer
```

### å¼€å¯ devops,æ¶ˆæ¯é€šçŸ¥ï¼ŒæŠ¥è­¦é€šçŸ¥ç­‰æ’ä»¶ã€‚

```php
...
    devops:
      enabled: True
      jenkinsMemoryLim: 2Gi
      jenkinsMemoryReq: 1000Mi
      jenkinsVolumeSize: 8Gi
      jenkinsJavaOpts_Xms: 512m
      jenkinsJavaOpts_Xmx: 512m
      jenkinsJavaOpts_MaxRAM: 2g
      sonarqube:
        enabled: True
        postgresqlVolumeSize: 8Gi

    servicemesh:
      enabled: false

    notification:
      enabled: True

    alerting:
      enabled: True
kind: ConfigMap
```

ä¿å­˜é€€å‡ºï¼Œå‚è€ƒ éªŒè¯å¯æ’æ‹”åŠŸèƒ½ç»„ä»¶çš„å®‰è£… ï¼Œæ— éœ€å†æ¬¡æ‰§è¡Œå®‰è£…å‘½ä»¤ ./install.shï¼Œä»…éœ€é€šè¿‡æŸ¥è¯¢ ks-installer æ—¥å¿—æˆ– Pod çŠ¶æ€å³å¯éªŒè¯åŠŸèƒ½ç»„ä»¶æ˜¯å¦å®‰è£…æˆåŠŸã€‚

```bash
[root@k8s-node1 ~]# kubectl edit cm -n kubesphere-system ks-installer
configmap/ks-installer edited
```

### æŸ¥çœ‹å®‰è£…æ—¥å¿—ï¼š

```bash
kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath='{.items[0].metadata.name}') -f
```

æ—¥å¿—æ‰“å°è®°å½•ï¼š

```bash
PLAY RECAP *********************************************************************
localhost                  : ok=36   changed=26   unreachable=0    failed=0    skipped=12   rescued=0    ig
nored=0   

Start installing notification
Start installing monitoring
Start installing devops
Start installing alerting
**************************************************
task notification status is successful
task alerting status is successful
total: 4     completed:2
**************************************************
...
**************************************************
task notification status is successful
task monitoring status is successful
task alerting status is successful
total: 4     completed:3
**************************************************
task notification status is successful
task monitoring status is successful
task devops status is successful
task alerting status is successful
total: 4     completed:4
**************************************************
#####################################################
###              Welcome to KubeSphere!           ###
#####################################################

Console: http://192.168.0.2:30880
Account: admin
Password: P@88w0rd

NOTESï¼š
  1. After logging into the console, please check the
     monitoring status of service components in
     the "Cluster Status". If the service is not
     ready, please wait patiently. You can start
     to use when all components are ready.
  2. Please modify the default password after login.

#####################################################
```

ç¨ç­‰ä¸€é˜µï¼Œç„¶åå°±ä¼šå¯ä»¥çœ‹åˆ°ï¼Œnotificationï¼Œmonitoringï¼Œdevopsï¼Œalerting æ’ä»¶å·²ç»å®‰è£…å¥½äº†ã€‚

![file](https://gitee.com/SaulJWu/blog-images/raw/master/images/20210809112910.png)

kubesphereè¿˜æœ‰ä¸€ä¸ªæ¿€åŠ¨äººå¿ƒå¾—åŠŸèƒ½ï¼Œé‚£å°±æ˜¯å¯ä»¥åœ¨é¡µé¢ç›´æ¥è¿›å…¥ç»ˆç«¯ï¼š

![file](https://gitee.com/SaulJWu/blog-images/raw/master/images/20210809112927.png)

ç•Œé¢è¿˜æ˜¯éå¸¸çš„æ¼‚äº®ï¼š

![file](http://digtime.cn/uploads/images/202009/29/1/WOZWD6HHHA.png)

å½“ç„¶äº†ï¼Œä¸Šè¾¹çš„ç»ˆç«¯å·¥å…·ğŸ”¨åªæœ‰adminç”¨æˆ·æ‰å¯ä»¥æ“ä½œã€‚

## 2ã€å»ºç«‹å¤šç§Ÿæˆ·ç³»ç»Ÿ

æœ¬[æ–‡æ¡£](https://v2-1.docs.kubesphere.io/docs/zh-CN/quick-start/admin-quick-start/)é¢å‘åˆæ¬¡ä½¿ç”¨ KubeSphere çš„é›†ç¾¤ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¼•å¯¼æ–°æ‰‹ç”¨æˆ·åˆ›å»ºä¼ä¸šç©ºé—´ã€åˆ›å»ºæ–°çš„è§’è‰²å’Œè´¦æˆ·ï¼Œç„¶åé‚€è¯·æ–°ç”¨æˆ·è¿›å…¥ä¼ä¸šç©ºé—´åï¼Œåˆ›å»ºé¡¹ç›®å’Œ DevOps å·¥ç¨‹ï¼Œå¸®åŠ©ç”¨æˆ·ç†Ÿæ‚‰å¤šç§Ÿæˆ·ä¸‹çš„ç”¨æˆ·å’Œè§’è‰²ç®¡ç†ï¼Œå¿«é€Ÿä¸Šæ‰‹ KubeSphereã€‚

ç›®å‰ï¼Œå¹³å°çš„èµ„æºä¸€å…±æœ‰ä¸‰ä¸ªå±‚çº§ï¼ŒåŒ…æ‹¬ é›†ç¾¤ (Cluster)ã€ ä¼ä¸šç©ºé—´ (Workspace)ã€ é¡¹ç›® (Project) å’Œ DevOps Project (DevOps å·¥ç¨‹)ï¼Œå±‚çº§å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå³ä¸€ä¸ªé›†ç¾¤ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªä¼ä¸šç©ºé—´ï¼Œè€Œæ¯ä¸ªä¼ä¸šç©ºé—´ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªé¡¹ç›®å’Œ DevOpså·¥ç¨‹ï¼Œè€Œé›†ç¾¤ã€ä¼ä¸šç©ºé—´ã€é¡¹ç›®å’Œ DevOpså·¥ç¨‹ä¸­ï¼Œé»˜è®¤æœ‰å¤šä¸ªä¸åŒçš„å†…ç½®è§’è‰²ã€‚

![](https://gitee.com/SaulJWu/blog-images/raw/master/images/20210809134520.png)

å»ºç«‹é¡¹ç›®æˆå‘˜ï¼š

![file](https://gitee.com/SaulJWu/blog-images/raw/master/images/20210809113203.png)

å»ºç«‹å¹³å°è§’è‰²ï¼š

![file](https://gitee.com/SaulJWu/blog-images/raw/master/images/20210809113149.png)

## 3ã€ç›¸å…³æ–‡æ¡£ï¼š

[Kubesphereå¤šç§Ÿæˆ·ç®¡ç†å¿«é€Ÿå…¥é—¨](https://v2-1.docs.kubesphere.io/docs/zh-CN/quick-start/admin-quick-start/)

