---
title: Elasticsearch-Query Dsl
date: 2020-11-24 16:49:05
permalink: /pages/dbad57/
categories:
  - 后端
  - Elasticsearch-全文检索
tags:
  - Elasticsearch
  - Query Dsl
---

## 前言
前面了解了ES的两种搜索方式，第二种方式我们称为QUERY DSL，就是查询领域对象语言。

## 基本语法格式
Elasticsearch提供了一个可以执行查询的Json风格的DSL（Domain-specific language 领域对象语言）。这个被称为Query Dsl。该查询语言非常全面，并且刚开始的有事感觉有点复杂，真正学好它的方法是从一些基础实例开始的。

### 一个查询语句的典型结构

~~~json
{
    QUERY_NAME:{
        ARGUMENT:VALUE,
        ARGUMENT:VALUE,...
    }
}
~~~

## 查询全部

~~~json
GET bank/_search
{
  "query": {
    "match_all": {}
  }
}
~~~

## 排序

### 结构

~~~json
GET bank/_search
{
  "query": {
    "match_all": {}
  },
  "sort": [
    {
      "FIELD": {
        "order": "desc"
      }
    }
  ]
}
~~~

### 实例

~~~json
GET bank/_search
{
  "query": {
    "match_all": {}
  },
  "sort": [
    {
      "balance": {
        "order": "desc"
      }
    }
  ]
}
~~~

### 简写实例

~~~json
GET bank/_search
{
  "query": {
    "match_all": {}
  },
  "sort": [
    {
      "balance": "desc"
    }
  ]
}
~~~



## 查询某个字段

如果是针对某个字段，那么它的机构如下:

~~~json
{
    QUERY_NAME:{
        FIELD_NAME:{
            ARGUMENT:VALUE,
	        ARGUMENT:VALUE,...
        }
    }
}
~~~





## 分页查询

~~~json
GET /bank/_search
{
  "query": { "match_all": {} },
  "sort": [
    { "account_number": "asc" }
  ],
  "from": 10,
  "size": 10
}
~~~

- `form`是从第几条开始查
- `size`每次查询多少条记录

