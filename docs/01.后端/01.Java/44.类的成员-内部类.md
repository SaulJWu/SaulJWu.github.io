---
title: 类的成员-内部类
date: 2020-12-16 19:14:46
permalink: /pages/a472bc/
categories:
  - 后端
  - Java
tags:
  - 内部类inner
---
> 类的成员之五：内部类

## 概述

- 当一个事物的内部，还有一个部分需要一个完整的结构进行描述，而这个内部的完整的结构又只为外部事物提供服务，那么整个内部的完整结构最好使用内部类。
- 在Java中，允许一个类的定义位于另一个类的内部，前者称为**内部类**，后者称为**外部类**。
- `Inner class`一般用在定义它的类或语句块之内，在外部引用它时必须给出完整的名称。
  - `Inner class`的名字不能与包含它的外部类类名相同；
- 分类
  - **成员内部类**（`static`成员内部类和非`static`成员内部类）
  - **局部内部类**（不谈修饰符）、匿名内部类



## 成员内部类

> 成员内部类作为类的角色

- 可以在内部定义属性、方法、构造器等结构
- 可以声明为`abstract`类，因此可以被其它的内部类继承
- 可以声明为`final`的，言外之意没有`final`修饰的，可以被继承
- 可以调用外部类的结构
- 可以被4种权限修饰
- 编译以后生成`OuterClass$InnerClass.class`字节码文件（也适用于局部内部类）

~~~java
class Person{
    
    public void eat(){
        ……
    }
    
    //抽象
    abstract static Bird{
        
    }
    
    
    //静态成员内部类
    static class Dog{
        //定义属性
        String name;
        int age;
        //定义方法
        public void show(){
             ……
        }
    }
    
    //非静态成员内部类
    class Cat{
        //定义属性
        double weight;
        //定义构造器
        public Cat(){
            ……
        }
        
        
        //定义方法
        public void miao(){
            //调用外部类的方法
            eat();//实际上是Person.this.eat();
        }
    }
}
~~~

> 成员内部类作为类的成员的角色

- 和外部类不同，`Inner class`还可以声明为`private`或`protected`；
- 可以调用外部类的结构
- Innerclass可以声明为static的，但此时就不能再使用外层类的非static的成员变量；



## 局部内部类

~~~java
class Person{
    public void method(){
        //方法内的局部内部类
        class AA{
            
        }
    }
    
    {
        //代码块内的局部内部类
        class BB{
            
        }
    }
    
    public Person(){
        //构造器内的局部内部类
        class CC{
            
        }
    }
}
~~~



## 关注

> 如何实例化成员内部类的对象

**创建静态的成员内部类:**

~~~java
Person.dog dog = new Person.dog();
dog.show();
~~~

创建非静态的成员内部类

```
Person p = new Person();
Person.Cat cat = p.new Cat();
cat.miao();
```



> 如何在成员内部类区分外部类的结构

在内部类调用：

- 形参直接使用
- 内部类的属性或方法：`this.属性/方法`
- 内部类调用外部类的属性或方法：`外部类名.this.属性/方法`



> 开发中局部内部类的使用

在某些业务场景下，需要重写某个类的方法，然后在这个方法体内使用，就可以使用局部内部类。



