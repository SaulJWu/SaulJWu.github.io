---
title: 面向对象
date: 2020-12-08 15:00:41
permalink: /pages/ac3efa/
categories:
  - 后端
  - Java
tags:
  - 面向对象
---

## 学习路线
学习面向对象内容的三条主线：

1. **Java**类及类的成员：属性、方法、构造器、代码块、内部类
2. **面向对象的三大特征**：封装性、继承性、多态性、（抽象性）
3. **其它关键字**：this、super、static、final、abstract、interface、package、import

> 大处着眼，小处着手



## 面向过程与面向对象



### **何谓“面向对象”的编程思想？**

首先解释一下“思想”。

先问你个问题：你想做个怎样的人？

可能你会回答：我想做个好人，孝敬父母，尊重长辈，关爱亲朋……

你看，这就是思想。这是你做人的思想，或者说，是你做人的原则。

做人有做人的原则，编程也有编程的原则。这些编程的原则呢，就

是编程思想。



### 面向过程(POP) 与 面向对象(OOP)

- 二者都是一种思想，面向对象是相对于面向过程而言的。面向过程，强调的是功能行为，以函数为最小单位考虑怎么做。面向对象，将功能封装进对象，强调具备了功能的对象，以类/对象为最小单位，考虑谁来做。

- 面向对象更加强调运用人类在日常的思维逻辑中采用的思想方法与原则，如抽象、分类、继承、聚合、多态等。

### **面向对象的三大特征**

- 封装 (Encapsulation)

- 继承 (Inheritance)

- 多态 (Polymorphism)

面向对象：Object Oriented Programming 

面向过程：Procedure Oriented Programming



### 面向过程例子

<img src="C:\Users\SaulJ\AppData\Roaming\Typora\typora-user-images\image-20201208151045123.png" alt="image-20201208151045123" style="zoom:50%;" />

### 面向过程例子

<img src="C:\Users\SaulJ\AppData\Roaming\Typora\typora-user-images\image-20201208151107241.png" alt="image-20201208151107241" style="zoom:50%;" />



### 面向对象的思想概述

- 程序员从面向过程的**执行者**转化成了面向对象的**指挥者**
- 面向对象分析方法分析问题的思路和步骤：
  - 根据问题需要，选择问题所针对的**现实世界中的实体**。 
  - 从实体中寻找解决问题相关的属性和功能，这些属性和功能就形成了**概念世界中的类**。 
  - 把抽象的实体用计算机语言进行描述，**形成计算机世界中类的定义**。即借助某种程序语言，把类构造成计算机能够识别和处理的数据结构。
  - 将**类实例化成计算机世界中的对象**。对象是计算机世界中解决问题的最终工具。

> 其实现在语言发展越来越快，只能说Java是具有面向对象特征的语言，不能说Java就是面向对象的语言。



### 练习1

**1.我要开车去丽江，这句话包含的类有什么？**

车，交通工具类

丽江，地点类



**2.体会以下几个经典案例涉及到的类。**

- 人在黑板上画圆

- 列车司机紧急刹车

- **售货员**统计收获**小票**的金额

- 你把**门**关上了



**3.抽象出下面系统中的“类”及其关系。**

![image-20201208152212262](https://raw.githubusercontent.com/SaulJWu/images/main/20201208152212.png)

名词就是类。

动词就是类的功能。





## 类和对象



### 面向对象的思想概述

- 面向对象的两个要素：类和对象。
- 类(Class)和对象(Object)是面向对象的核心概念。
  - 类是对一类事物的描述，是**抽象**的、概念上的定义
  - 对象是**实际存在**的该类事物的每个个体，因而也称为**实例(instance)**。 
-  “万事万物皆对象”

![image-20201208152441648](https://raw.githubusercontent.com/SaulJWu/images/main/20201208152441.png)

可以理解为：**类 = 抽象概念的人；对象 = 实实在在的某个人**

面向对象程序设计的重点是**类的设计**

类的设计，**其实就是类的成员的设计**



### Java类及类的成员

现实世界的生物体，大到鲸鱼，小到蚂蚁，都是由最基本的**细胞**构成的。同理，Java代码世界是由诸多个不同功能的**类**构成的。

现实生物世界中的细胞又是由什么构成的呢？细胞核、细胞质、… 那么，

Java中用类`class`来描述事物也是如此。常见的类的成员有：

- 属性：对应类中的成员变量 = `field` = 域、字段
- 行为：对应类中的成员方法 = 函数 = `method`

![image-20201208152801142](https://raw.githubusercontent.com/SaulJWu/images/main/20201208152801.png)



### 类的语法格式

~~~java
修饰符 class 类名{
    属性声明;
    方法声明;
}
~~~

修饰符`public`：**类可以被任意访问**。

**类的正文要用**{ }括起来，{}就是作用域。



### 创建Java自定义类

**步骤：**

1. 定义类（考虑修饰符、类名）

2. 编写类的属性（考虑修饰符、属性类型、属性名、初始化值）

3. 编写类的方法（考虑修饰符、返回值类型、方法名、形参等）



比如：

~~~java
package oopTest;

public class Person {
    int age;
    String name;
    int gender;

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getGender() {
        return gender;
    }

    public void setGender(int gender) {
        this.gender = gender;
    }
}
~~~



### 类的创建和使用

**创建对象语法：** **类名 对象名** **= new** **类名();**

使用**对象名**.**对象成员**的方式访问对象成员（包括属性和方法）

~~~java
Person p = new Person();
p.name = "张三";
p.age = 18;
p.setGender(1);
int name1 = p.name;
int name2 = p.getName();
System.out.println(p.getAge())
~~~

创建对象，在有些地方也叫初始化或者实例化。

> 注意

如果创建了一个类的多个对象，每个对象都会在堆内存开辟新的空间，内存地址也是独立的，每个对象都独立的拥有一套类的属性。（非`static`）

意味着，如果去修改一个对象的属性a，则不影响另一个对象属性a的值。



如果把一个新的引用指向已经存在的对象，修改这个应用的变量时，那么它们的改变是相同，因为2个对象都指向同一个内存地址。

~~~java
Person p1 = new Person();
p1.setNmae("zhangsan");
p1.setAge(18);

Person p3 = p1;
p3.setAge(10);
Sysout.out.println(p1.age);//会返回10而不是18，因为2个引用指向一个对象，都是同一个内存地址。
~~~

> 什么是引用？

~~~java
int i;//创建一个引用
int j = 10;//创建一个引用并且把10赋值给这个引用
Person p1;//创建一个引用
Person p2 = new Person();//创建一个引用，并且在堆空间中实例一个对象，这个引用指向这个对象。
~~~

如果非要比喻的话：

引用，可以理解为遥控器。

对象，理解为电视机。

引用可以多个，那么遥控器可以多个，也可以独立存在，任意一个遥控器改变了电视频道，就像代码中，使用其中一个引用改变对象的值。

### 内存解析

![image-20201210190151104](C:\Users\SaulJ\AppData\Roaming\Typora\typora-user-images\image-20201210190151104.png)

- 堆（`Heap`），此内存区域的唯一目的就是==存放对象实例==，几乎所有的对象实例都在这里分配内存。这一点在Java虚拟机规范中的描述是：所有的对象实例以及数组都要在堆上分配。

- 通常所说的栈（`Stack`），是指==虚拟机栈==。虚拟机栈用于==存储局部变量==等。局部变量表存放了编译期可知长度的各种基本数据类型（boolean、byte、char、short、int、float、long、double）、对象引用（reference类型，它不等同于对象本身，是对象在堆内存的首地址）。==方法执行完，自动释放==。

- 方法区（`MethodArea`），用于==存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据==。

![image-20201210191318229](C:\Users\SaulJ\AppData\Roaming\Typora\typora-user-images\image-20201210191318229.png)





## 类的成员

### 属性

类的成员有2个：

- 属性
- 方法

其中属性也可以叫**成员变量**或者**字段**，方法也可以叫函数。

在类内部声明的变量，称为==成员变量==。

在方法体内部声明的变量，称为==局部变量==。

> 属性的语法格式

修饰符 数据类型 属性名 =  初始化值;

- 修饰符
  - 常用的权限修饰符有：private、缺省、protected、public
  - 其他修饰符：static、final (暂不考虑)
- 数据类型
  - 任何基本数据类型(如int、Boolean) 或任何引用数据类型。
- 属性名
  - 属于标识符，符合命名规则和规范即可。





> 属性（成员变量）与局部变量的区别

|              | 成员变量                         | 局部变量                                 |
| ------------ | -------------------------------- | ---------------------------------------- |
| 声明的位置   | 直接在类中声明                   | 方法形参或内部、代码块内、构造器内等     |
| 修饰符       | private、public、static、final等 | 不能用权限修饰符修饰，可以用final修饰    |
| 初始化值     | 有默认初始化值                   | 没有默认初始化值，必须显式赋值，方可使用 |
| 内存加载位置 | 堆空间或静态域内                 | 栈空间                                   |

> 属性（成员变量）与局部变量的相同点

- 定义变量的格式：数据类型 变量明 = 变量值
- 先声明，后使用
- 变量都有其对应的作用域



> 成员变量的基本类型默认值

如果类的成员变量（字段）是基本数据类型，那么在类初始化（实例化）时，这些类型将会被赋予一个初始值。

| 基本类型 | 初始值        |
| -------- | ------------- |
| boolean  | false         |
| char     | \u0000 (null) |
| byte     | (byte) 0      |
| short    | (short) 0     |
| int      | 0             |
| long     | 0L            |
| float    | 0.0f          |
| double   | 0.0d          |

这些默认值仅在 Java 初始化类的时候才会被赋予。这种方式确保了基本类型的字段始终能被初始化（在 C++ 中不会），从而减少了 bug 的来源。但是，这些初始值对于程序来说并不一定是合法或者正确的。 所以，为了安全，我们最好始终显式地初始化变量。

这种默认值的赋予并不适用于局部变量 —— 那些不属于类的字段的变量。



### 方法

> 什么是方法？

方法是类或对象行为特征的抽象，用来完成某个功能操作。在某些语言中也称为函数或过程。

将功能封装为方法的目的是，可以实现代码重用，简化代码。

Java里的方法不能独立存在，所有的方法必须定义在类里。

> 方法的声明与使用

**语法格式**：

```
修饰符 返回值类型 方法名(形参列表){
	……
	return 返回值;
}
```

- 修饰符

  - public,缺省,private, protected
  - static、final (暂不考虑)

- 返回值类型：声明出返回值的类型。与方法体中“return 返回值”搭配使用

  - 可以是基本数据类型
  - 如果返回值类型是`void`，代表没有返回值，不需要用`return`
  - 也可以是==对象==

- 方法名：属于标识符，命名时遵循标识符命名规则和规范，“见名知意”

  形参列表：可以包含零个，一个或多个参数。多个参数时，中间用“,”隔开

  - 参数类型可以是基本数据类型，也可以是对象
  - 语法格式：数据类型 变量名1，数据类型 变量名2，数据类型 变量名3……
  - 形参属于局部变量。

- return：代表方法结束，作用是方法在执行完毕后返还给调用它的程序的数据。来返回指定类型的变量或常量。

  - 如果返回值类型是`void`，就不用使用`return`关键字;
  - 在同一个作用域(就是大括号的意思)，return后面不能有执行语句

- 返回值：可以是变量或者常量，配合`return`关键字一起用

  - 返回值的类型必须和返回值类型是一致的。

**例如：**

~~~java
public class Person{
    private String name;
    private int age;
    
    public int getAge(){
        return age;
    }
    
    public void setAge(int i){
        age = i;
    }
    
    public void eat(){
        System.out.println("吃饭");
    }
    
    public void sleep(int hour){
        System.out.println("睡了"+hour+"小时");
    }
}
~~~

> 如果按照是否有形参及返回值来对方法分类：

|        | 无返回值                  | 有返回值                         |
| ------ | ------------------------- | -------------------------------- |
| 无形参 | void 方法名（）{}         | 返回值的类型方法名（）{}         |
| 有形参 | void 方法名（形参列表）{} | 返回值的类型方法名（形参列表）{} |

